var Mc=Object.defineProperty;var o=(Co,Ba)=>Mc(Co,"name",{value:Ba,configurable:!0});(()=>{var Co={5326:(Qe,s,b)=>{"use strict";b.r(s),b.d(s,{AppInsightsCore:()=>Q,BaseCore:()=>K,BaseTelemetryPlugin:()=>vt.i,CoreUtils:()=>H.Tr,DiagnosticLogger:()=>W.AQ,ESPromise:()=>_e,ESPromiseScheduler:()=>we,EventHelper:()=>k.zB,EventLatency:()=>M,EventPersistence:()=>y,EventPropertyType:()=>g,EventsDiscardedReason:()=>Ge.h,FullVersionString:()=>H.vs,InternalAppInsightsCore:()=>Y.F,InternalBaseCore:()=>P.A,LoggingSeverity:()=>w.X,MinChannelPriorty:()=>Te,NotificationManager:()=>re.f,PerfEvent:()=>N.zn,PerfManager:()=>N.Jk,ProcessTelemetryContext:()=>Ze.Vi,TraceLevel:()=>O,Undefined:()=>he.jA,Utils:()=>H.cQ,ValueKind:()=>J,ValueSanitizer:()=>Ie,Version:()=>H.Gf,_ExtendedInternalMessageId:()=>U,_InternalLogMessage:()=>W.lQ,_InternalMessageId:()=>w.v,__getRegisteredEvents:()=>V.um,_logInternalMessage:()=>W.L4,_throwInternal:()=>W.kP,_warnToConsole:()=>W.jV,addEventHandler:()=>V.Ib,addEventListeners:()=>V.yw,addPageHideEventListener:()=>V.TJ,addPageShowEventListener:()=>V.nD,addPageUnloadEventListener:()=>V.c9,areCookiesSupported:()=>Je.p7,arrForEach:()=>T.tO,arrIndexOf:()=>T.UA,arrMap:()=>T.Mr,arrReduce:()=>T.Xz,attachEvent:()=>V.pZ,cookieAvailable:()=>Je.p7,createCookieMgr:()=>Je.Nz,createEnumStyle:()=>p.By,createGuid:()=>H.cm,createProcessTelemetryContext:()=>Ze.CD,createTraceParent:()=>Ae.SU,createUniqueNamespace:()=>nt.J,createUnloadHandlerContainer:()=>pe.Y,dateNow:()=>T.m6,deleteCookie:()=>H.kT,detachEvent:()=>V.pD,disableCookies:()=>H.oF,disallowsSameSiteNone:()=>Je.UY,doPerf:()=>N.Lm,dumpObj:()=>z.eU,eventOff:()=>V.QY,eventOn:()=>V.XO,extend:()=>H.l7,findW3cTraceParent:()=>Ae.lq,formatTraceParent:()=>Ae.aR,generateW3CId:()=>k.DO,getCommonSchemaMetaData:()=>H.Vv,getConsole:()=>z.dr,getCookie:()=>H.ej,getCookieValue:()=>H.Do,getCrypto:()=>z.MX,getDocument:()=>z.Me,getExceptionName:()=>T.jj,getFieldValueType:()=>H.Sy,getGlobal:()=>Be.Rd,getGlobalInst:()=>z.a8,getHistory:()=>z.s1,getIEVersion:()=>z.sA,getISOString:()=>T.Y6,getJSON:()=>z.xA,getLocation:()=>z.k$,getMsCrypto:()=>z.gz,getNavigator:()=>z.jW,getPerformance:()=>z.r,getSetValue:()=>T.qK,getTenantId:()=>H.jM,getTime:()=>H.hK,getWindow:()=>z.Jj,hasDocument:()=>z.Nv,hasHistory:()=>z.fE,hasJSON:()=>z.nS,hasNavigator:()=>z.d6,hasOwnProperty:()=>T.nr,hasWindow:()=>z.Ym,isArray:()=>T.kJ,isArrayValid:()=>H.JT,isBeaconsSupported:()=>z.MF,isBoolean:()=>T.jn,isChromium:()=>H.mJ,isDate:()=>T.J_,isDocumentObjectAvailable:()=>H.x9,isError:()=>T.VZ,isFetchSupported:()=>z.JO,isFunction:()=>T.mf,isIE:()=>z.w1,isLatency:()=>H.r7,isNotTruthy:()=>T.F,isNullOrUndefined:()=>T.le,isNumber:()=>T.hj,isObject:()=>T.Kn,isReactNative:()=>z.b$,isSampledFlag:()=>Ae.Pn,isString:()=>T.HD,isTruthy:()=>T.fQ,isTypeof:()=>T.Ym,isUint8ArrayAvailable:()=>H.IZ,isUndefined:()=>T.o8,isValidSpanId:()=>Ae.Lc,isValidTraceId:()=>Ae.jN,isValidTraceParent:()=>Ae.J6,isValueAssigned:()=>H.Sn,isValueKind:()=>H.oS,isWindowObjectAvailable:()=>H.dH,isXhrSupported:()=>z.Z3,mergeEvtNamespace:()=>V.jU,newGuid:()=>k.GW,newId:()=>ee.pZ,normalizeJsName:()=>T.Gf,objCreate:()=>Be.pu,objDefineAccessors:()=>T.l_,objForEachKey:()=>T.rW,objFreeze:()=>T.FL,objKeys:()=>T.FY,objSeal:()=>T.Xi,openXhr:()=>H.ot,optimizeObject:()=>T.Ax,parseTraceParent:()=>Ae.j_,perfNow:()=>k.Jj,proxyAssign:()=>T.cf,proxyFunctionAs:()=>T.Oi,proxyFunctions:()=>T.Vb,random32:()=>ee._l,randomValue:()=>ee.az,removeEventHandler:()=>V.C1,removeEventListeners:()=>V.nJ,removePageHideEventListener:()=>V.C9,removePageShowEventListener:()=>V.Yl,removePageUnloadEventListener:()=>V.JA,safeGetCookieMgr:()=>Je.JP,safeGetLogger:()=>W.vH,sanitizeProperty:()=>H.yj,setCookie:()=>H.d8,setEnableEnvMocks:()=>z.dI,setProcessTelemetryTimings:()=>H.if,setValue:()=>T.sO,strContains:()=>T._Q,strEndsWith:()=>T.Id,strFunction:()=>he.cb,strObject:()=>he.fK,strPrototype:()=>he.hB,strStartsWith:()=>T.xe,strTrim:()=>T.nd,strUndefined:()=>he.jA,throwError:()=>T._y,toISOString:()=>T.Y6,useXDomainRequest:()=>z.cp});var R=b(1088),p=b(4873),T=b(6708),w=b(7310),J=(0,p.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),M=(0,p.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),g=(0,p.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),y=(0,p.By)({Normal:1,Critical:2}),O=(0,p.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),U=(0,T.FL)((0,R.uc)((0,R.uc)({},w.v),(0,p.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),_=b(1679),W=b(5018),N=b(9288),z=b(7630),Y=b(5121),Ee=b(7984),H=b(3599),X=function(Se){(0,R.ne)(ie,Se);function ie(){var Re=Se.call(this)||this;return Re.pluginVersionStringArr=[],(0,_.Z)(ie,Re,function(ge,tt){(!ge.logger||!ge.logger.queue)&&(ge.logger=new W.AQ({loggingLevelConsole:1})),ge.initialize=function(Ne,A,G,ue){(0,N.Lm)(ge,function(){return"AppInsightsCore.initialize"},function(){var je=ge.pluginVersionStringArr;if(Ne){Ne.endpointUrl||(Ne.endpointUrl=Ee.YT);var Ye=Ne.propertyStorageOverride;Ye&&(!Ye.getProperty||!Ye.setProperty)&&(0,T._y)("Invalid property storage override passed."),Ne.channels&&(0,T.tO)(Ne.channels,function(At){At&&(0,T.tO)(At,function(wt){if(wt.identifier&&wt.version){var dn=wt.identifier+"="+wt.version;je.push(dn)}})})}ge.getWParam=function(){return typeof document!="undefined"||!!Ne.enableWParam?0:-1},A&&(0,T.tO)(A,function(At){if(At&&At.identifier&&At.version){var wt=At.identifier+"="+At.version;je.push(wt)}}),ge.pluginVersionString=je.join(";"),ge.pluginVersionStringArr=je;try{tt.initialize(Ne,A,G,ue),ge.pollInternalLogs("InternalLog")}catch(At){var _t=ge.logger,qe=(0,z.eU)(At);qe.indexOf("channels")!==-1&&(qe+=`
 - Channels must be provided through config.channels only!`),(0,W.kP)(_t,1,514,"SDK Initialization Failed - no telemetry will be sent: "+qe)}},function(){return{config:Ne,extensions:A,logger:G,notificationManager:ue}})},ge.track=function(Ne){(0,N.Lm)(ge,function(){return"AppInsightsCore.track"},function(){var A=Ne;if(A){A.timings=A.timings||{},A.timings.trackStart=(0,H.hK)(),(0,H.r7)(A.latency)||(A.latency=1);var G=A.ext=A.ext||{};G.sdk=G.sdk||{},G.sdk.ver=H.vs;var ue=A.baseData=A.baseData||{};ue[Ee.o6]=ue[Ee.o6]||{};var je=ue[Ee.o6];je[Ee.p8]=je[Ee.p8]||ge.pluginVersionString||Ee.qS}tt.track(A)},function(){return{item:Ne}},!Ne.sync)}}),Re}return o(ie,"AppInsightsCore"),ie.__ieDyn=1,ie}(Y.F);const Q=X;var P=b(6900),B=function(Se){(0,R.ne)(ie,Se);function ie(){var Re=Se.call(this)||this;return(0,_.Z)(ie,Re,function(ge,tt){ge.initialize=function(Ne,A,G,ue){Ne&&!Ne.endpointUrl&&(Ne.endpointUrl=Ee.YT),ge.getWParam=function(){return H.x9||!!Ne.enableWParam?0:-1};try{tt.initialize(Ne,A,G,ue)}catch(je){(0,W.kP)(ge.logger,1,514,"Initialization Failed: "+(0,z.eU)(je)+`
 - Note: Channels must be provided through config.channels only`)}},ge.track=function(Ne){var A=Ne;if(A){var G=A.ext=A.ext||{};G.sdk=G.sdk||{},G.sdk.ver=H.vs}tt.track(A)}}),Re}return o(ie,"BaseCore"),ie.__ieDyn=1,ie}(P.A);const K=B;var q=T.mf;function ne(Se,ie,Re){return function(ge){Se[ie]=ge,Re()}}o(ne,"_createPromiseAllOnResolvedFunction");var me=function(){function Se(ie){var Re=0,ge=null,tt=[];(0,_.Z)(Se,this,function(je){je.then=function(Ye,_t){return new Se(function(qe,At){Ne(Ye,_t,qe,At)})},je.catch=function(Ye){return je.then(null,Ye)}});function Ne(je,Ye,_t,qe){tt.push(function(){var At;try{Re===1?At=q(je)?je(ge):ge:At=q(Ye)?Ye(ge):ge,At instanceof Se?At.then(_t,qe):Re===2&&!q(Ye)?qe(At):_t(At)}catch(wt){qe(wt);return}}),Re!==0&&A()}o(Ne,"_enqueue");function A(){if(tt.length>0){var je=tt.slice();tt=[],setTimeout(function(){for(var Ye=0,_t=je.length;Ye<_t;++Ye)try{je[Ye]()}catch(qe){}},0)}}o(A,"_processQueue");function G(je){Re===0&&(ge=je,Re=1,A())}o(G,"_resolve");function ue(je){Re===0&&(ge=je,Re=2,A())}o(ue,"_reject"),o(function(){if(!q(ie))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ie(G,ue)}catch(Ye){ue(Ye)}},"_initialize")()}return o(Se,"ESPromise"),Se.resolve=function(ie){return ie instanceof Se?ie:ie&&q(ie.then)?new Se(function(Re,ge){try{ie.then(Re,ge)}catch(tt){ge(tt)}}):new Se(function(Re){Re(ie)})},Se.reject=function(ie){return new Se(function(Re,ge){ge(ie)})},Se.all=function(ie){if(!(!ie||!ie.length))return new Se(function(Re,ge){try{for(var tt=[],Ne=0,A=0;A<ie.length;A++){var G=ie[A];G&&q(G.then)?(Ne++,G.then(ne(tt,A,function(){--Ne==0&&Re(tt)}),ge)):tt[A]=G}Ne===0&&setTimeout(function(){Re(tt)},0)}catch(ue){ge(ue)}})},Se.race=function(ie){return new Se(function(Re,ge){if(!(!ie||!ie.length))try{for(var tt=o(function(A){var G=ie[A];G&&q(G.then)?G.then(Re,ge):setTimeout(function(){Re(G)},0)},"_loop_1"),Ne=0;Ne<ie.length;Ne++)tt(Ne)}catch(A){ge(A)}})},Se}();const _e=me;var Be=b(2091),oe=6e5,L=0,se=[],We=[],Fe=[];function ve(){return new Date().getTime()}o(ve,"_getTime");var F=function(){function Se(ie,Re){var ge=0,tt=(ie||"<unnamed>")+"."+L;L++,(0,_.Z)(Se,this,function(G){var ue=null,je=0;G.scheduleEvent=function(_t,qe,At){var wt=tt+"."+je;je++,qe&&(wt+="-("+qe+")");var dn=wt+"{"+ge+"}";ge++;var pn={evt:null,tm:ve(),id:dn,isRunning:!1,isAborted:!1};return ue?pn.evt=Xt(pn,ue):pn.evt=Tt(pn),ue=pn,ue.evt._schId=dn,pn.evt;function In(ht){for(var sn=ve(),Yt=sn-oe,an=ht.length,hn=0;hn<an;){var Rn=ht[hn];if(Rn&&Rn.tm<Yt){var Tn=null;Rn.abort?(Tn="Aborting ["+Rn.id+"] due to Excessive runtime ("+(sn-Rn.tm)+" ms)",Rn.abort(Tn)):Tn="Removing ["+Rn.id+"] due to Excessive runtime ("+(sn-Rn.tm)+" ms)",A(Tn),ht.splice(hn,1),an--}else hn++}}o(In,"_abortAndRemoveOldEvents");function Un(ht,sn){var Yt=!1,an=Ye(se,ht);if(an||(an=Ye(Fe,ht),Yt=!0),an){an.to&&(clearTimeout(an.to),an.to=null);var hn=ve()-an.tm;sn?Yt?A("Timed out event ["+ht+"] finally complete -- "+hn+" ms"):Ne("Promise ["+ht+"] Complete -- "+hn+" ms"):(Fe.push(an),A("Event ["+ht+"] Timed out and removed -- "+hn+" ms"))}else Ne("Failed to remove ["+ht+"] from running queue");ue&&ue.id===ht&&(ue=null),In(se),In(We),In(Fe)}o(Un,"_cleanup");function et(ht,sn){return function(Yt){return Un(ht,!0),sn&&sn(Yt),Yt}}o(et,"_removeScheduledEvent");function Lt(ht,sn,Yt,an){sn.then(function(hn){return hn instanceof _e?(Ne("Event ["+ht+"] returned a promise -- waiting"),Lt(ht,hn,Yt,an),hn):et(ht,Yt)(hn)},et(ht,an))}o(Lt,"_waitForFinalResult");function Qt(ht,sn){var Yt=ht.id;return new _e(function(an,hn){Ne("Event ["+Yt+"] Starting -- waited for "+(ht.wTm||"--")+" ms"),ht.isRunning=!0,ht.abort=function(Tn){ht.abort=null,ht.isAborted=!0,Un(Yt,!1),hn(new Error(Tn))};var Rn=sn(Yt);Rn instanceof _e?(At&&(ht.to=setTimeout(function(){Un(Yt,!1),hn(new Error("Timed out after ["+At+"] ms"))},At)),Lt(Yt,Rn,function(Tn){Ne("Event ["+Yt+"] Resolving after "+(ve()-ht.tm)+" ms"),an(Tn)},hn)):(Ne("Promise ["+Yt+"] Auto completed as the start action did not return a promise"),an())})}o(Qt,"_createScheduledEvent");function Tt(ht){var sn=ve();return ht.wTm=sn-ht.tm,ht.tm=sn,ht.isAborted?_e.reject(new Error("["+wt+"] was aborted")):(se.push(ht),Qt(ht,_t))}o(Tt,"_startWaitingEvent");function Xt(ht,sn){var Yt=new _e(function(an,hn){var Rn=ve()-sn.tm,Tn=sn.id;Ne("["+wt+"] is waiting for ["+Tn+":"+Rn+" ms] to complete before starting -- ["+We.length+"] waiting and ["+se.length+"] running"),ht.abort=function(xr){ht.abort=null,Ye(We,wt),ht.isAborted=!0,hn(new Error(xr))},sn.evt.then(function(xr){Ye(We,wt),Tt(ht).then(an,hn)},function(xr){Ye(We,wt),Tt(ht).then(an,hn)})});return We.push(ht),Yt}o(Xt,"_waitForPreviousEvent")};function Ye(_t,qe){for(var At=0;At<_t.length;At++)if(_t[At].id===qe)return _t.splice(At,1)[0];return null}o(Ye,"_removeQueuedEvent")});function Ne(G){var ue=(0,Be.Rd)();ue&&ue.QUnit&&console&&console.log("ESPromiseScheduler["+tt+"] "+G)}o(Ne,"_debugLog");function A(G){(0,W.jV)(Re,"ESPromiseScheduler["+tt+"] "+G)}o(A,"_warnLog")}return o(Se,"ESPromiseScheduler"),Se.incomplete=function(){return se},Se.waitingToStart=function(){return We},Se}();const we=F;var Ie=function(){function Se(ie){var Re=this,ge={},tt=[],Ne=[];ie&&Ne.push(ie);function A(Ye,_t){var qe,At=ge[Ye];if(At&&(qe=At[_t]),!qe&&qe!==null){if((0,T.HD)(Ye)&&(0,T.HD)(_t))if(Ne.length>0){for(var wt=0;wt<Ne.length;wt++)if(Ne[wt].handleField(Ye,_t)){qe={canHandle:!0,fieldHandler:Ne[wt]};break}}else tt.length===0&&(qe={canHandle:!0});if(!qe&&qe!==null){qe=null;for(var wt=0;wt<tt.length;wt++)if(tt[wt].handleField(Ye,_t)){qe={canHandle:!0,handler:tt[wt],fieldHandler:null};break}}At||(At=ge[Ye]={}),At[_t]=qe}return qe}o(A,"_getFieldSanitizer"),Re.addSanitizer=function(Ye){Ye&&(tt.push(Ye),ge={})},Re.addFieldSanitizer=function(Ye){Ye&&(Ne.push(Ye),ge={})},Re.handleField=function(Ye,_t){var qe=A(Ye,_t);return qe?qe.canHandle:!1},Re.value=function(Ye,_t,qe,At){var wt=A(Ye,_t);if(wt&&wt.canHandle){if(!wt||!wt.canHandle)return null;if(wt.handler)return wt.handler.value(Ye,_t,qe,At);if(!(0,T.HD)(_t)||(0,T.le)(qe)||qe===Ee.qS)return null;var dn=null,pn=(0,H.Sy)(qe);if((pn&8192)==8192){var In=pn&~8192;if(dn=qe,!(0,H.Sn)(dn.value)||In!==1&&In!==2&&In!==3&&(In&4096)!=4096)return null}else pn===1||pn===2||pn===3||(pn&4096)==4096?dn=ue(Ye,_t,qe):pn===4&&(dn=ue(Ye,_t,At?JSON.stringify(qe):qe));if(dn)return G(wt,Ye,_t,pn,dn,At)}return null},Re.property=function(Ye,_t,qe,At){var wt=A(Ye,_t);if(!wt||!wt.canHandle||!(0,T.HD)(_t)||(0,T.le)(qe)||!(0,H.Sn)(qe.value))return null;var dn=(0,H.Sy)(qe.value);return dn===0?null:G(wt,Ye,_t,dn,qe,At)};function G(Ye,_t,qe,At,wt,dn){if(Ye.handler)return Ye.handler.property(_t,qe,wt,dn);if(!(0,T.le)(wt.kind)){if((At&4096)==4096||!(0,H.oS)(wt.kind))return null;wt.value=wt.value.toString()}return je(Ye.fieldHandler,_t,qe,At,wt)}o(G,"_handleProperty");function ue(Ye,_t,qe){return(0,H.Sn)(qe)?{value:qe}:null}o(ue,"_convertToProperty");function je(Ye,_t,qe,At,wt){if(wt&&Ye){var dn=Ye.getSanitizer(_t,qe,At,wt.kind,wt.propertyType);if(dn)if(At===4){var pn={},In=wt.value;(0,T.rW)(In,function(et,Lt){var Qt=_t+"."+qe;if((0,H.Sn)(Lt)){var Tt=ue(Qt,et,Lt);Tt=je(Ye,Qt,et,(0,H.Sy)(Lt),Tt),Tt&&(pn[et]=Tt.value)}}),wt.value=pn}else{var Un={path:_t,name:qe,type:At,prop:wt,sanitizer:Re};wt=dn.call(Re,Un)}}return wt}o(je,"_callFieldSanitizer")}return o(Se,"ValueSanitizer"),Se.getFieldType=H.Sy,Se}(),Te=100,re=b(1880),vt=b(4063),Ze=b(1589),Ge=b(5928),k=b(5843),V=b(4869),ee=b(4878),he=b(4392),Je=b(3242),nt=b(5883),pe=b(310),Ae=b(4206)},7984:(Qe,s,b)=>{"use strict";b.d(s,{qS:()=>R,YT:()=>p,p8:()=>J,o6:()=>M});var R="",p="https://browser.events.data.microsoft.com/OneCollector/1.0/",T="pluginVersionString",w=T+"Arr",J="version",M="properties"},3599:(Qe,s,b)=>{"use strict";b.d(s,{Gf:()=>_,vs:()=>W,x9:()=>X,dH:()=>Q,Sn:()=>P,jM:()=>B,IZ:()=>K,r7:()=>q,yj:()=>ne,Vv:()=>me,oF:()=>_e,d8:()=>Be,kT:()=>oe,ej:()=>L,Do:()=>se,cm:()=>We,l7:()=>Fe,hK:()=>ve,oS:()=>F,JT:()=>Te,if:()=>re,Sy:()=>vt,cQ:()=>Ze,Tr:()=>Ge,mJ:()=>k,ot:()=>V});var R=b(7630),p=b(6708),T=b(3242),w=b(5843),J=b(4392),M=b(4869),g=b(4878),y=b(2091),O=b(7984),U,_="3.2.8",W="1DS-Web-JS-"+_,N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",z="withCredentials",Y="timeout",Ee=(U={},U[0]=0,U[2]=6,U[1]=1,U[3]=7,U[4096|2]=6,U[4096|1]=1,U[4096|3]=7,U),H=null,X=Boolean((0,R.Me)()),Q=Boolean((0,R.Jj)());function P(ee){return!(ee===O.qS||(0,p.le)(ee))}o(P,"isValueAssigned");function B(ee){if(ee){var he=ee.indexOf("-");if(he>-1)return ee.substring(0,he)}return O.qS}o(B,"getTenantId");function K(){return H===null&&(H=!(0,p.o8)(Uint8Array)&&!Ie()&&!(0,R.b$)()),H}o(K,"isUint8ArrayAvailable");function q(ee){return!!(ee&&(0,p.hj)(ee)&&ee>=1&&ee<=4)}o(q,"isLatency");function ne(ee,he,Je){if(!he&&!P(he)||typeof ee!="string")return null;var nt=typeof he;if(nt==="string"||nt==="number"||nt==="boolean"||(0,p.kJ)(he))he={value:he};else if(nt==="object"&&!J.CY.call(he,"value"))he={value:Je?JSON.stringify(he):he};else if((0,p.le)(he.value)||he.value===O.qS||!(0,p.HD)(he.value)&&!(0,p.hj)(he.value)&&!(0,p.jn)(he.value)&&!(0,p.kJ)(he.value))return null;if((0,p.kJ)(he.value)&&!Te(he.value))return null;if(!(0,p.le)(he.kind)){if((0,p.kJ)(he.value)||!F(he.kind))return null;he.value=he.value.toString()}return he}o(ne,"sanitizeProperty");function me(ee,he,Je){var nt=-1;if(!(0,p.o8)(ee))if(he>0&&(he===32?nt=1<<13:he<=13&&(nt=he<<5)),we(Je))nt===-1&&(nt=0),nt|=Je;else{var pe=Ee[vt(ee)]||-1;nt!==-1&&pe!==-1?nt|=pe:pe===6&&(nt=pe)}return nt}o(me,"getCommonSchemaMetaData");function _e(){(0,T.JP)(null).setEnabled(!1)}o(_e,"disableCookies");function Be(ee,he,Je){(0,T.p7)(null)&&(0,T.JP)(null).set(ee,he,Je*86400,null,"/")}o(Be,"setCookie");function oe(ee){(0,T.p7)(null)&&(0,T.JP)(null).del(ee)}o(oe,"deleteCookie");function L(ee){return(0,T.p7)(null)?se((0,T.JP)(null),ee):O.qS}o(L,"getCookie");function se(ee,he,Je){Je===void 0&&(Je=!0);var nt;return ee&&(nt=ee.get(he),Je&&nt&&decodeURIComponent&&(nt=decodeURIComponent(nt))),nt||O.qS}o(se,"getCookieValue");function We(ee){ee===void 0&&(ee="D");var he=(0,w.GW)();return ee==="B"?he="{"+he+"}":ee==="P"?he="("+he+")":ee==="N"&&(he=he.replace(/-/g,O.qS)),he}o(We,"createGuid");function Fe(ee,he,Je,nt,pe){var Ae={},Se=!1,ie=0,Re=arguments.length,ge=Object[J.hB],tt=arguments;for(ge.toString.call(tt[0])==="[object Boolean]"&&(Se=tt[0],ie++);ie<Re;ie++){var ee=tt[ie];(0,p.rW)(ee,function(A,G){Se&&G&&(0,p.Kn)(G)?(0,p.kJ)(G)?(Ae[A]=Ae[A]||[],(0,p.tO)(G,function(ue,je){ue&&(0,p.Kn)(ue)?Ae[A][je]=Fe(!0,Ae[A][je],ue):Ae[A][je]=ue})):Ae[A]=Fe(!0,Ae[A],G):Ae[A]=G})}return Ae}o(Fe,"extend");var ve=w.Jj;function F(ee){return ee===0||ee>0&&ee<=13||ee===32}o(F,"isValueKind");function we(ee){return ee>=0&&ee<=9}o(we,"isDataType");function Ie(){var ee=(0,R.jW)();if(!(0,p.o8)(ee)&&ee.userAgent){var he=ee.userAgent.toLowerCase();if((he.indexOf("safari")>=0||he.indexOf("firefox")>=0)&&he.indexOf("chrome")<0)return!0}return!1}o(Ie,"isSafariOrFirefox");function Te(ee){return ee.length>0}o(Te,"isArrayValid");function re(ee,he){var Je=ee;Je.timings=Je.timings||{},Je.timings.processTelemetryStart=Je.timings.processTelemetryStart||{},Je.timings.processTelemetryStart[he]=ve()}o(re,"setProcessTelemetryTimings");function vt(ee){var he=0;if(ee!=null){var Je=typeof ee;Je==="string"?he=1:Je==="number"?he=2:Je==="boolean"?he=3:Je===J.fK&&(he=4,(0,p.kJ)(ee)?(he=4096,ee.length>0&&(he|=vt(ee[0]))):J.CY.call(ee,"value")&&(he=8192|vt(ee.value)))}return he}o(vt,"getFieldValueType");var Ze={Version:_,FullVersionString:W,strUndefined:J.jA,strObject:J.fK,Undefined:J.jA,arrForEach:p.tO,arrIndexOf:p.UA,arrMap:p.Mr,arrReduce:p.Xz,objKeys:p.FY,toISOString:p.Y6,isReactNative:R.b$,isString:p.HD,isNumber:p.hj,isBoolean:p.jn,isFunction:p.mf,isArray:p.kJ,isObject:p.Kn,strTrim:p.nd,isDocumentObjectAvailable:X,isWindowObjectAvailable:Q,isValueAssigned:P,getTenantId:B,isBeaconsSupported:R.MF,isUint8ArrayAvailable:K,isLatency:q,sanitizeProperty:ne,getISOString:p.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:me,cookieAvailable:T.p7,disallowsSameSiteNone:T.UY,setCookie:Be,deleteCookie:oe,getCookie:L,createGuid:We,extend:Fe,getTime:ve,isValueKind:F,isArrayValid:Te,objDefineAccessors:p.l_,addPageUnloadEventListener:M.c9,setProcessTelemetryTimings:re,addEventHandler:M.Ib,getFieldValueType:vt,strEndsWith:p.Id,objForEachKey:p.rW},Ge={_canUseCookies:void 0,isTypeof:p.Ym,isUndefined:p.o8,isNullOrUndefined:p.le,hasOwnProperty:p.nr,isFunction:p.mf,isObject:p.Kn,isDate:p.J_,isArray:p.kJ,isError:p.VZ,isString:p.HD,isNumber:p.hj,isBoolean:p.jn,toISOString:p.Y6,arrForEach:p.tO,arrIndexOf:p.UA,arrMap:p.Mr,arrReduce:p.Xz,strTrim:p.nd,objCreate:y.pu,objKeys:p.FY,objDefineAccessors:p.l_,addEventHandler:M.Ib,dateNow:p.m6,isIE:R.w1,disableCookies:_e,newGuid:w.GW,perfNow:w.Jj,newId:g.pZ,randomValue:g.az,random32:g._l,mwcRandomSeed:g.CN,mwcRandom32:g.F6,generateW3CId:w.DO};function k(){return!!(0,R.a8)("chrome")}o(k,"isChromium");function V(ee,he,Je,nt,pe,Ae){nt===void 0&&(nt=!1),pe===void 0&&(pe=!1);function Se(Re,ge,tt){try{Re[ge]=tt}catch(Ne){}}o(Se,"_wrapSetXhrProp");var ie=new XMLHttpRequest;return nt&&Se(ie,N,nt),Je&&Se(ie,z,Je),ie.open(ee,he,!pe),Je&&Se(ie,z,Je),!pe&&Ae&&Se(ie,Y,Ae),ie}o(V,"openXhr")},9865:(Qe,s,b)=>{"use strict";b.r(s),b.d(s,{BE_PROFILE:()=>z,NRT_PROFILE:()=>N,PostChannel:()=>Ut,RT_PROFILE:()=>W});var R=b(1088),p=b(1679),T=b(9288),w=b(4869),J=b(5883),M=b(3599),g=b(6708),y=b(7630),O=b(5928),U=b(5018),_=b(4063),W="REAL_TIME",N="NEAR_REAL_TIME",z="BEST_EFFORT",Y="",Ee="POST",H="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",X="drop",Q="send",P="requeue",B="rspFail",K="oth",q="no-cache, no-store",ne="application/x-json-stream",me="cache-control",_e="content-type",Be="kill-tokens",oe="kill-duration",L="kill-duration-seconds",se="time-delta-millis",We="client-version",Fe="client-id",ve="time-delta-to-apply-millis",F="upload-time",we="apikey",Ie="AuthMsaDeviceTicket",Te="AuthXToken",re="sdk-version",vt="NoResponseBody",Ze="msfpc",Ge="trace",k="user";function V(yt){var Dt=(yt.ext||{}).intweb;return Dt&&(0,M.Sn)(Dt[Ze])?Dt[Ze]:null}o(V,"_getEventMsfpc");function ee(yt){for(var Dt=null,xt=0;Dt===null&&xt<yt.length;xt++)Dt=V(yt[xt]);return Dt}o(ee,"_getMsfpc");var he=function(){function yt(Dt,xt){var dt=xt?[].concat(xt):[],ln=this,zt=ee(dt);ln.iKey=function(){return Dt},ln.Msfpc=function(){return zt||Y},ln.count=function(){return dt.length},ln.events=function(){return dt},ln.addEvent=function(St){return St?(dt.push(St),zt||(zt=V(St)),!0):!1},ln.split=function(St,en){var un;if(St<dt.length){var Sn=dt.length-St;(0,g.le)(en)||(Sn=en<Sn?en:Sn),un=dt.splice(St,Sn),zt=ee(dt)}return new yt(Dt,un)}}return o(yt,"EventBatch"),yt.create=function(Dt,xt){return new yt(Dt,xt)},yt}(),Je=function(){function yt(){var Dt=!0,xt=!0,dt=!0,ln="use-collector-delta",zt=!1;(0,p.Z)(yt,this,function(St){St.allowRequestSending=function(){return Dt},St.firstRequestSent=function(){dt&&(dt=!1,zt||(Dt=!1))},St.shouldAddClockSkewHeaders=function(){return xt},St.getClockSkewHeaderValue=function(){return ln},St.setClockSkew=function(en){zt||(en?(ln=en,xt=!0,zt=!0):xt=!1,Dt=!0)}})}return o(yt,"ClockSkewManager"),yt.__ieDyn=1,yt}();const nt=Je;var pe=1e3,Ae=function(){function yt(){var Dt={};function xt(dt){var ln=[];return dt&&(0,g.tO)(dt,function(zt){ln.push((0,g.nd)(zt))}),ln}o(xt,"_normalizeTenants"),(0,p.Z)(yt,this,function(dt){dt.setKillSwitchTenants=function(ln,zt){if(ln&&zt)try{var St=xt(ln.split(","));if(zt==="this-request-only")return St;for(var en=parseInt(zt,10)*pe,un=0;un<St.length;++un)Dt[St[un]]=(0,g.m6)()+en}catch(Sn){return[]}return[]},dt.isTenantKilled=function(ln){var zt=Dt,St=(0,g.nd)(ln);return zt[St]!==void 0&&zt[St]>(0,g.m6)()?!0:(delete zt[St],!1)}})}return o(yt,"KillSwitch"),yt.__ieDyn=1,yt}();const Se=Ae;var ie=b(4392),Re=.8,ge=1.2,tt=3e3,Ne=6e5;function A(yt){return!(yt>=300&&yt<500&&yt!=408&&yt!=429||yt==501||yt==505)}o(A,"retryPolicyShouldRetryForStatus");function G(yt){var Dt=0,xt=tt*Re,dt=tt*ge,ln=Math.floor(Math.random()*(dt-xt))+xt;return Dt=Math.pow(2,yt)*ln,Math.min(Dt,Ne)}o(G,"retryPolicyGetMillisToBackoffForRetry");var ue=20,je=3984588,Ye=65e3,_t=2e6,qe=Math.min(_t,Ye),At="metadata",wt="f",dn=/\./,pn=function(){function yt(Dt,xt,dt,ln){var zt="data",St="baseData",en="ext",un=!!ln,Sn=!0,yn=xt,Wn={};(0,p.Z)(yt,this,function(Ln){Ln.createPayload=function(Pt,on,kt,Dn,Nt,gn){return{apiKeys:[],payloadBlob:Y,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Pt,isTeardown:on,isSync:kt,isBeacon:Dn,sendType:gn,sendReason:Nt}},Ln.appendPayload=function(Pt,on,kt){var Dn=Pt&&on&&!Pt.overflow;return Dn&&(0,T.Lm)(Dt,function(){return"Serializer:appendPayload"},function(){for(var Nt=on.events(),gn=Pt.payloadBlob,_n=Pt.numEvents,Nn=!1,tn=[],xn=[],Yn=Pt.isBeacon,Fn=Yn?Ye:je,qn=Yn?qe:_t,Bn=0,Gn=0;Bn<Nt.length;){var Vt=Nt[Bn];if(Vt){if(_n>=kt){Pt.overflow=on.split(Bn);break}var Ft=Ln.getEventBlob(Vt);if(Ft&&Ft.length<=qn){var ar=Ft.length,Or=gn.length;if(Or+ar>Fn){Pt.overflow=on.split(Bn);break}gn&&(gn+=`
`),gn+=Ft,Gn++,Gn>ue&&(gn.substr(0,1),Gn=0),Nn=!0,_n++}else Ft?tn.push(Vt):xn.push(Vt),Nt.splice(Bn,1),Bn--}Bn++}if(tn&&tn.length>0&&Pt.sizeExceed.push(he.create(on.iKey(),tn)),xn&&xn.length>0&&Pt.failedEvts.push(he.create(on.iKey(),xn)),Nn){Pt.batches.push(on),Pt.payloadBlob=gn,Pt.numEvents=_n;var tr=on.iKey();(0,g.UA)(Pt.apiKeys,tr)===-1&&Pt.apiKeys.push(tr)}},function(){return{payload:Pt,theBatch:{iKey:on.iKey(),evts:on.events()},max:kt}}),Dn},Ln.getEventBlob=function(Pt){try{return(0,T.Lm)(Dt,function(){return"Serializer.getEventBlob"},function(){var on={};on.name=Pt.name,on.time=Pt.time,on.ver=Pt.ver,on.iKey="o:"+(0,M.jM)(Pt.iKey);var kt={},Dn=Pt[en];Dn&&(on[en]=kt,(0,g.rW)(Dn,function(_n,Nn){var tn=kt[_n]={};wn(Nn,tn,"ext."+_n,!0,null,null,!0)}));var Nt=on[zt]={};Nt.baseType=Pt.baseType;var gn=Nt[St]={};return wn(Pt.baseData,gn,St,!1,[St],function(_n,Nn,tn){In(kt,_n,Nn,tn)},Sn),wn(Pt.data,Nt,zt,!1,[],function(_n,Nn,tn){In(kt,_n,Nn,tn)},Sn),JSON.stringify(on)},function(){return{item:Pt}})}catch(on){return null}};function Hn(Pt,on){var kt=Wn[Pt];return kt===void 0&&(Pt.length>=7&&(kt=(0,g.xe)(Pt,"ext.metadata")||(0,g.xe)(Pt,"ext.web")),Wn[Pt]=kt),kt}o(Hn,"_isReservedField");function wn(Pt,on,kt,Dn,Nt,gn,_n){(0,g.rW)(Pt,function(Nn,tn){var xn=null;if(tn||(0,M.Sn)(tn)){var Yn=kt,Fn=Nn,qn=Nt,Bn=on;if(un&&!Dn&&dn.test(Nn)){var Gn=Nn.split("."),Vt=Gn.length;if(Vt>1){qn&&(qn=qn.slice());for(var Ft=0;Ft<Vt-1;Ft++){var ar=Gn[Ft];Bn=Bn[ar]=Bn[ar]||{},Yn+="."+ar,qn&&qn.push(ar)}Fn=Gn[Vt-1]}}var Or=Dn&&Hn(Yn,Fn);if(!Or&&yn&&yn.handleField(Yn,Fn)?xn=yn.value(Yn,Fn,tn,dt):xn=(0,M.yj)(Fn,tn,dt),xn){var tr=xn.value;if(Bn[Fn]=tr,gn&&gn(qn,Fn,xn),_n&&typeof tr=="object"&&!(0,g.kJ)(tr)){var hr=qn;hr&&(hr=hr.slice(),hr.push(Fn)),wn(tn,tr,Yn+"."+Fn,Dn,hr,gn,_n)}}}})}o(wn,"_processPathKeys")})}return o(yt,"Serializer"),yt.__ieDyn=1,yt}();function In(yt,Dt,xt,dt){if(dt&&yt){var ln=(0,M.Vv)(dt.value,dt.kind,dt.propertyType);if(ln>-1){var zt=yt[At];zt||(zt=yt[At]={f:{}});var St=zt[wt];if(St||(St=zt[wt]={}),Dt)for(var en=0;en<Dt.length;en++){var un=Dt[en];St[un]||(St[un]={f:{}});var Sn=St[un][wt];Sn||(Sn=St[un][wt]={}),St=Sn}St=St[xt]={},(0,g.kJ)(dt.value)?St.a={t:ln}:St.t=ln}}}o(In,"_addJSONPropertyMetaData");var Un,et="sendAttempt",Lt="&"+vt+"=true",Qt=(Un={},Un[1]=P,Un[100]=P,Un[200]="sent",Un[8004]=X,Un[8003]=X,Un),Tt={},Xt={};function ht(yt,Dt,xt){Tt[yt]=Dt,xt!==!1&&(Xt[Dt]=yt)}o(ht,"_addCollectorHeaderQsMapping"),ht(Ie,Ie,!1),ht(We,We),ht(Fe,"Client-Id"),ht(we,we),ht(ve,ve),ht(F,F),ht(Te,Te);function sn(yt){try{return yt.responseText}catch(Dt){}return Y}o(sn,"_getResponseText");function Yt(yt,Dt){var xt=!1;if(yt&&Dt){var dt=(0,g.FY)(yt);if(dt&&dt.length>0)for(var ln=Dt.toLowerCase(),zt=0;zt<dt.length;zt++){var St=dt[zt];if(St&&(0,g.nr)(Dt,St)&&St.toLowerCase()===ln){xt=!0;break}}}return xt}o(Yt,"_hasHeader");function an(yt,Dt,xt,dt){Dt&&xt&&xt.length>0&&(dt&&Tt[Dt]?(yt.hdrs[Tt[Dt]]=xt,yt.useHdrs=!0):yt.url+="&"+Dt+"="+xt)}o(an,"_addRequestDetails");function hn(yt,Dt){return Dt&&((0,g.hj)(Dt)?yt=[Dt].concat(yt):(0,g.kJ)(Dt)&&(yt=Dt.concat(yt))),yt}o(hn,"_prependTransports");var Rn=function(){function yt(Dt,xt,dt,ln,zt){this._responseHandlers=[];var St="?cors=true&"+_e.toLowerCase()+"="+ne,en=new Se,un=!1,Sn=new nt,yn=!1,Wn=0,Ln,Hn,wn,Pt,on=!0,kt=[],Dn={},Nt=[],gn=null,_n=!1,Nn,tn=!1,xn=!1,Yn,Fn,qn,Bn,Gn;(0,p.Z)(yt,this,function(Vt){var Ft=!0;Vt.initialize=function(ye,S,$,de,Oe){var mt;Oe||(Oe={}),St=ye+St,xn=(0,g.o8)(Oe.avoidOptions)?!0:!Oe.avoidOptions,Pt=S,Nn=S.getCookieMgr(),_n=!Pt.config.disableEventTimings;var it=!!Pt.config.enableCompoundKey;Ln=$,Hn=Ln.diagLog();var fe=Oe.valueSanitizer,Ce=Oe.stringifyObjects;(0,g.o8)(Oe.enableCompoundKey)||(it=!!Oe.enableCompoundKey),Yn=Oe.xhrTimeout,Fn=!!Oe.disableXhrSync,qn=!!Oe.disableFetchKeepAlive,Gn=Oe.addNoResponse!==!1,yn=!(0,y.b$)(),gn=new pn(Pt,fe,Ce,it),(0,g.le)(Oe.useSendBeacon)||(yn=!!Oe.useSendBeacon);var Le=de,Ve=Oe.alwaysUseXhrOverride?de:null,ct=Oe.alwaysUseXhrOverride?de:null,gt=[3,2];if(!de){on=!1;var Mt=(0,y.k$)();Mt&&Mt.protocol&&Mt.protocol.toLowerCase()==="file:"&&(Ft=!1);var Et=[];(0,y.b$)()?(Et=[2,1],gt=[2,1,3]):Et=[1,2,3],Et=hn(Et,Oe.transports),de=ar(Et,!1),de||(0,U.jV)(Hn,"No available transport to send events"),Le=ar(Et,!0)}Ve||(gt=hn(gt,Oe.unloadTransports),Ve=ar(gt,!0)),Bn=!on&&(yn&&(0,y.MF)()||!qn&&(0,y.JO)(!0)),wn=(mt={},mt[0]=de,mt[1]=Le||ar([1,2,3],!0),mt[2]=Ve||Le||ar([1],!0),mt[3]=ct||ar([2,3],!0)||Le||ar([1],!0),mt)};function ar(ye,S){for(var $=0,de=null,Oe=0;de==null&&Oe<ye.length;)$=ye[Oe],$===1?(0,y.cp)()?de=Or:(0,y.Z3)()&&(de=hr):$===2&&(0,y.JO)(S)&&(!S||S&&!qn)?de=tr:yn&&$===3&&(0,y.MF)()&&(de=Pr),Oe++;return de?{_transport:$,_isSync:S,sendPOST:de}:null}o(ar,"_getSenderInterface"),Vt._getDbgPlgTargets=function(){return[wn[0],en,gn,wn]};function Or(ye,S,$){var de=new XDomainRequest;de.open(Ee,ye.urlString),ye.timeout&&(de.timeout=ye.timeout),de.onload=function(){var Oe=sn(de);Qn(S,200,{},Oe),zn(Oe)},de.onerror=function(){Qn(S,400,{})},de.ontimeout=function(){Qn(S,500,{})},de.onprogress=function(){},$?de.send(ye.data):zt.set(function(){de.send(ye.data)},0)}o(Or,"_xdrSendPost");function tr(ye,S,$){var de,Oe=ye.urlString,mt=!1,it=!1,fe=(de={body:ye.data,method:Ee},de[H]=!0,de);$&&(fe.keepalive=!0,ye._sendReason===2&&(mt=!0,Gn&&(Oe+=Lt))),Ft&&(fe.credentials="include"),ye.headers&&(0,g.FY)(ye.headers).length>0&&(fe.headers=ye.headers),fetch(Oe,fe).then(function(Ce){var Le={},Ve=Y,ct=Ce.headers;ct&&ct.forEach(function(gt,Mt){Le[Mt]=gt}),Ce.body&&Ce.text().then(function(gt){Ve=gt}),it||(it=!0,Qn(S,Ce.status,Le,Ve),zn(Ve))}).catch(function(Ce){it||(it=!0,Qn(S,0,{}))}),mt&&!it&&(it=!0,Qn(S,200,{})),!it&&ye.timeout>0&&zt.set(function(){it||(it=!0,Qn(S,500,{}))},ye.timeout)}o(tr,"_fetchSendPost");function hr(ye,S,$){var de=ye.urlString;function Oe(Ce,Le,Ve){if(!Ce[Ve]&&Le&&Le.getResponseHeader){var ct=Le.getResponseHeader(Ve);ct&&(Ce[Ve]=(0,g.nd)(ct))}return Ce}o(Oe,"_appendHeader");function mt(Ce){var Le={};return Ce.getAllResponseHeaders?Le=Jr(Ce.getAllResponseHeaders()):(Le=Oe(Le,Ce,se),Le=Oe(Le,Ce,oe),Le=Oe(Le,Ce,L)),Le}o(mt,"_getAllResponseHeaders");function it(Ce,Le){Qn(S,Ce.status,mt(Ce),Le)}o(it,"xhrComplete"),$&&ye.disableXhrSync&&($=!1);var fe=(0,M.ot)(Ee,de,Ft,!0,$,ye.timeout);(0,g.rW)(ye.headers,function(Ce,Le){fe.setRequestHeader(Ce,Le)}),fe.onload=function(){var Ce=sn(fe);it(fe,Ce),zn(Ce)},fe.onerror=function(){it(fe)},fe.ontimeout=function(){it(fe)},fe.send(ye.data)}o(hr,"_xhrSendPost");function Qn(ye,S,$,de){try{ye(S,$,de)}catch(Oe){(0,U.kP)(Hn,2,518,(0,y.eU)(Oe))}}o(Qn,"_doOnComplete");function Pr(ye,S,$){var de=ye,Oe=200,mt=de._thePayload,it=ye.urlString+(Gn?Lt:Y);try{var fe=(0,y.jW)();if(!fe.sendBeacon(it,ye.data))if(mt){var Ce=[];(0,g.tO)(mt.batches,function(Le){if(Ce&&Le&&Le.count()>0){for(var Ve=Le.events(),ct=0;ct<Ve.length;ct++)if(!fe.sendBeacon(it,gn.getEventBlob(Ve[ct]))){Ce.push(Le.split(ct));break}}else Ce.push(Le.split(0))}),rr(Ce,8003,mt.sendType,!0)}else Oe=0}catch(Le){(0,U.jV)(Hn,"Failed to send telemetry using sendBeacon API. Ex:"+(0,y.eU)(Le)),Oe=0}finally{Qn(S,Oe,{},Y)}}o(Pr,"_beaconSendPost");function nr(ye){return ye===2||ye===3}o(nr,"_isBeaconPayload");function Xn(ye){return tn&&nr(ye)&&(ye=2),ye}o(Xn,"_adjustSendType"),Vt.addQueryStringParameter=function(ye,S){for(var $=0;$<kt.length;$++)if(kt[$].name===ye){kt[$].value=S;return}kt.push({name:ye,value:S})},Vt.addHeader=function(ye,S){Dn[ye]=S},Vt.canSendRequest=function(){return zr()&&Sn.allowRequestSending()},Vt.sendQueuedRequests=function(ye,S){(0,g.o8)(ye)&&(ye=0),tn&&(ye=Xn(ye),S=2),yr(Nt,ye,0)&&wr(gr(),0,!1,ye,S||0)},Vt.isCompletelyIdle=function(){return!un&&Wn===0&&Nt.length===0},Vt.setUnloading=function(ye){tn=ye},Vt.addBatch=function(ye){if(ye&&ye.count()>0){if(en.isTenantKilled(ye.iKey()))return!1;Nt.push(ye)}return!0},Vt.teardown=function(){Nt.length>0&&wr(gr(),0,!0,2,2)},Vt.pause=function(){un=!0},Vt.resume=function(){un=!1,Vt.sendQueuedRequests(0,4)},Vt.sendSynchronousBatch=function(ye,S,$){ye&&ye.count()>0&&((0,g.le)(S)&&(S=1),tn&&(S=Xn(S),$=2),wr([ye],0,!1,S,$||0))};function zr(){return!un&&Wn<xt}o(zr,"_hasIdleConnection");function gr(){var ye=Nt;return Nt=[],ye}o(gr,"_clearQueue");function yr(ye,S,$){var de=!1;return ye&&ye.length>0&&!un&&wn[S]&&gn&&(de=S!==0||zr()&&($>0||Sn.allowRequestSending())),de}o(yr,"_canSendPayload");function or(ye){var S={};return ye&&(0,g.tO)(ye,function($,de){S[de]={iKey:$.iKey(),evts:$.events()}}),S}o(or,"_createDebugBatches");function wr(ye,S,$,de,Oe){if(!(!ye||ye.length===0)){if(un){rr(ye,1,de);return}de=Xn(de);try{var mt=ye,it=de!==0;(0,T.Lm)(Pt,function(){return"HttpManager:_sendBatches"},function(fe){fe&&(ye=ye.slice(0));for(var Ce=[],Le=null,Ve=(0,M.hK)(),ct=wn[de]||(it?wn[1]:wn[0]),gt=ct&&ct._transport,Mt=Bn&&(tn||nr(de)||gt===3||ct._isSync&&gt===2);yr(ye,de,S);){var Et=ye.shift();Et&&Et.count()>0&&(en.isTenantKilled(Et.iKey())?Ce.push(Et):(Le=Le||gn.createPayload(S,$,it,Mt,Oe,de),gn.appendPayload(Le,Et,Dt)?Le.overflow!==null&&(ye=[Le.overflow].concat(ye),Le.overflow=null,kr(Le,Ve,(0,M.hK)(),Oe),Ve=(0,M.hK)(),Le=null):(kr(Le,Ve,(0,M.hK)(),Oe),Ve=(0,M.hK)(),ye=[Et].concat(ye),Le=null)))}Le&&kr(Le,Ve,(0,M.hK)(),Oe),ye.length>0&&(Nt=ye.concat(Nt)),rr(Ce,8004,de)},function(){return{batches:or(mt),retryCount:S,isTeardown:$,isSynchronous:it,sendReason:Oe,useSendBeacon:nr(de),sendType:de}},!it)}catch(fe){(0,U.kP)(Hn,2,48,"Unexpected Exception sending batch: "+(0,y.eU)(fe))}}}o(wr,"_sendBatches");function ii(ye,S){var $={url:St,hdrs:{},useHdrs:!1};S?($.hdrs=(0,M.l7)($.hdrs,Dn),$.useHdrs=(0,g.FY)($.hdrs).length>0):(0,g.rW)(Dn,function(fe,Ce){Xt[fe]?an($,Xt[fe],Ce,!1):($.hdrs[fe]=Ce,$.useHdrs=!0)}),an($,Fe,"NO_AUTH",S),an($,We,M.vs,S);var de=Y;(0,g.tO)(ye.apiKeys,function(fe){de.length>0&&(de+=","),de+=fe}),an($,we,de,S),an($,F,(0,g.m6)().toString(),S);var Oe=Kn(ye);if((0,M.Sn)(Oe)&&($.url+="&ext.intweb.msfpc="+Oe),Sn.shouldAddClockSkewHeaders()&&an($,ve,Sn.getClockSkewHeaderValue(),S),Pt.getWParam){var mt=Pt.getWParam();mt>=0&&($.url+="&w="+mt)}for(var it=0;it<kt.length;it++)$.url+="&"+kt[it].name+"="+kt[it].value;return $}o(ii,"_buildRequestDetails");function Hr(ye,S,$){ye[S]=ye[S]||{},ye[S][Ln.identifier]=$}o(Hr,"_setTimingValue");function kr(ye,S,$,de){if(ye&&ye.payloadBlob&&ye.payloadBlob.length>0){var Oe=!!Vt.sendHook,mt=wn[ye.sendType];!nr(ye.sendType)&&ye.isBeacon&&ye.sendReason===2&&(mt=wn[2]||wn[3]||mt);var it=xn;(ye.isBeacon||mt._transport===3)&&(it=!1);var fe=ii(ye,it);it=it||fe.useHdrs;var Ce=(0,M.hK)();(0,T.Lm)(Pt,function(){return"HttpManager:_doPayloadSend"},function(){for(var Le=0;Le<ye.batches.length;Le++)for(var Ve=ye.batches[Le],ct=Ve.events(),gt=0;gt<ct.length;gt++){var Mt=ct[gt];if(_n){var Et=Mt.timings=Mt.timings||{};Hr(Et,"sendEventStart",Ce),Hr(Et,"serializationStart",S),Hr(Et,"serializationCompleted",$)}Mt[et]>0?Mt[et]++:Mt[et]=1}rr(ye.batches,1e3+(de||0),ye.sendType,!0);var qt={data:ye.payloadBlob,urlString:fe.url,headers:fe.hdrs,_thePayload:ye,_sendReason:de,timeout:Yn,disableXhrSync:Fn,disableFetchKeepAlive:qn};it&&(Yt(qt.headers,me)||(qt.headers[me]=q),Yt(qt.headers,_e)||(qt.headers[_e]=ne));var Pn=null;mt&&(Pn=o(function(Gt){Sn.firstRequestSent();var Zn=o(function(lr,Ar){$n(lr,Ar,ye,de)},"onComplete"),er=ye.isTeardown||ye.isSync;try{mt.sendPOST(Gt,Zn,er),Vt.sendListener&&Vt.sendListener(qt,Gt,er,ye.isBeacon)}catch(lr){(0,U.jV)(Hn,"Unexpected exception sending payload. Ex:"+(0,y.eU)(lr)),Qn(Zn,0,{})}},"sender")),(0,T.Lm)(Pt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Pn)if(ye.sendType===0&&Wn++,Oe&&!ye.isBeacon&&mt._transport!==3){var Gt={data:qt.data,urlString:qt.urlString,headers:(0,M.l7)({},qt.headers),timeout:qt.timeout,disableXhrSync:qt.disableXhrSync,disableFetchKeepAlive:qt.disableFetchKeepAlive},Zn=!1;(0,T.Lm)(Pt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Vt.sendHook(Gt,function(er){Zn=!0,!on&&!er._thePayload&&(er._thePayload=er._thePayload||qt._thePayload,er._sendReason=er._sendReason||qt._sendReason),Pn(er)},ye.isSync||ye.isTeardown)}catch(er){Zn||Pn(qt)}})}else Pn(qt)})},function(){return{thePayload:ye,serializationStart:S,serializationCompleted:$,sendReason:de}},ye.isSync)}ye.sizeExceed&&ye.sizeExceed.length>0&&rr(ye.sizeExceed,8003,ye.sendType),ye.failedEvts&&ye.failedEvts.length>0&&rr(ye.failedEvts,8002,ye.sendType)}o(kr,"_doPayloadSend");function ai(ye,S){_n&&(0,g.tO)(ye,function($){var de=$.timings=$.timings||{};Hr(de,"sendEventCompleted",S)})}o(ai,"_addEventCompletedTimings");function $n(ye,S,$,de){var Oe=9e3,mt=null,it=!1,fe=!1;try{var Ce=!0;if(typeof ye!==ie.jA){if(S){Sn.setClockSkew(S[se]);var Le=S[oe]||S["kill-duration-seconds"];(0,g.tO)(en.setKillSwitchTenants(S[Be],Le),function(ct){(0,g.tO)($.batches,function(gt){if(gt.iKey()===ct){mt=mt||[];var Mt=gt.split(0);$.numEvents-=Mt.count(),mt.push(Mt)}})})}if(ye==200||ye==204){Oe=200;return}(!A(ye)||$.numEvents<=0)&&(Ce=!1),Oe=9e3+ye%1e3}if(Ce){Oe=100;var Ve=$.retryCnt;$.sendType===0&&(Ve<dt?(it=!0,nn(function(){$.sendType===0&&Wn--,wr($.batches,Ve+1,$.isTeardown,tn?2:$.sendType,5)},tn,G(Ve))):(fe=!0,tn&&(Oe=8001)))}}finally{it||(Sn.setClockSkew(),oi($,Oe,de,fe)),rr(mt,8004,$.sendType)}}o($n,"_retryRequestIfNeeded");function oi(ye,S,$,de){try{de&&Ln._backOffTransmission(),S===200&&(!de&&!ye.isSync&&Ln._clearBackOff(),sr(ye.batches)),rr(ye.batches,S,ye.sendType,!0)}finally{ye.sendType===0&&(Wn--,$!==5&&Vt.sendQueuedRequests(ye.sendType,$))}}o(oi,"_handleRequestFinished");function sr(ye){if(_n){var S=(0,M.hK)();(0,g.tO)(ye,function($){$&&$.count()>0&&ai($.events(),S)})}}o(sr,"_addCompleteTimings");function nn(ye,S,$){S?ye():zt.set(ye,$)}o(nn,"_doAction");function Jr(ye){var S={};if((0,g.HD)(ye)){var $=(0,g.nd)(ye).split(/[\r\n]+/);(0,g.tO)($,function(de){if(de){var Oe=de.indexOf(": ");if(Oe!==-1){var mt=(0,g.nd)(de.substring(0,Oe)).toLowerCase(),it=(0,g.nd)(de.substring(Oe+1));S[mt]=it}else S[(0,g.nd)(de)]=1}})}return S}o(Jr,"_convertAllHeadersToMap");function Kn(ye){for(var S=0;S<ye.batches.length;S++){var $=ye.batches[S].Msfpc();if($)return encodeURIComponent($)}return Y}o(Kn,"_getMsfpc");function zn(ye){var S=Vt._responseHandlers;try{for(var $=0;$<S.length;$++)try{S[$](ye)}catch(Oe){(0,U.kP)(Hn,1,519,"Response handler failed: "+Oe)}if(ye){var de=JSON.parse(ye);(0,M.Sn)(de.webResult)&&(0,M.Sn)(de.webResult[Ze])&&Nn.set("MSFPC",de.webResult[Ze],365*86400)}}catch(Oe){}}o(zn,"_handleCollectorResponse");function rr(ye,S,$,de){if(ye&&ye.length>0&&ln){var Oe=ln[On(S)];if(Oe){var mt=$!==0;(0,T.Lm)(Pt,function(){return"HttpManager:_sendBatchesNotification"},function(){nn(function(){try{Oe.call(ln,ye,S,mt,$)}catch(it){(0,U.kP)(Hn,1,74,"send request notification failed: "+it)}},de||mt,0)},function(){return{batches:or(ye),reason:S,isSync:mt,sendSync:de,sendType:$}},!mt)}}}o(rr,"_sendBatchesNotification");function On(ye){var S=Qt[ye];return(0,M.Sn)(S)||(S=K,ye>=9e3&&ye<=9999?S=B:ye>=8e3&&ye<=8999?S=X:ye>=1e3&&ye<=1999&&(S=Q)),S}o(On,"_getNotificationAction")})}return o(yt,"HttpManager"),yt.__ieDyn=1,yt}();function Tn(yt,Dt){for(var xt=[],dt=2;dt<arguments.length;dt++)xt[dt-2]=arguments[dt];return setTimeout(yt,Dt,xt)}o(Tn,"defaultSetTimeout");function xr(yt){clearTimeout(yt)}o(xr,"defaultClearTimeout");function pr(yt,Dt){return{set:yt||Tn,clear:Dt||xr}}o(pr,"createTimeoutWrapper");var bn=.25,Kr=500,Yr=20,fr=6,ri=2,qr=4,Gr=2,Z=1,ze="eventsDiscarded",ot="overrideInstrumentationKey",pt="maxEventRetryAttempts",Ht="maxUnloadEventRetryAttempts",Bt="addUnloadCb",Mn=function(yt){(0,R.ne)(Dt,yt);function Dt(){var xt=yt.call(this)||this;xt.identifier="PostChannel",xt.priority=1011,xt.version="3.2.8";var dt,ln=!1,zt=[],St=null,en=!1,un=0,Sn=500,yn=0,Wn=1e4,Ln={},Hn=W,wn=null,Pt=null,on=0,kt=0,Dn,Nt,gn={},_n,Nn,tn=-1,xn,Yn=!0,Fn=!1,qn=fr,Bn=ri,Gn,Vt;return(0,p.Z)(Dt,xt,function(Ft,ar){zr(),Ft._getDbgPlgTargets=function(){return[Nt]},Ft.initialize=function(fe,Ce,Le){(0,T.Lm)(Ce,function(){return"PostChannel:initialize"},function(){var Ve=Ce;ar.initialize(fe,Ce,Le);try{var ct=!!Ce[Bt];Gn=(0,w.jU)((0,J.J)(Ft.identifier),Ce.evtNamespace&&Ce.evtNamespace());var gt=Ft._getTelCtx();fe.extensionConfig[Ft.identifier]=fe.extensionConfig[Ft.identifier]||{},dt=gt.getExtCfg(Ft.identifier),Vt=pr(dt.setTimeoutOverride,dt.clearTimeoutOverride),Yn=!dt.disableOptimizeObj&&(0,M.mJ)(),Or(Ve),dt.eventsLimitInMem>0&&(Wn=dt.eventsLimitInMem),dt.immediateEventLimit>0&&(Sn=dt.immediateEventLimit),dt.autoFlushEventsLimit>0&&(_n=dt.autoFlushEventsLimit),(0,g.hj)(dt[pt])&&(qn=dt[pt]),(0,g.hj)(dt[Ht])&&(Bn=dt[Ht]),it(),dt.httpXHROverride&&dt.httpXHROverride.sendPOST&&(Dn=dt.httpXHROverride),(0,M.Sn)(fe.anonCookieName)&&Nt.addQueryStringParameter("anoncknm",fe.anonCookieName),Nt.sendHook=dt.payloadPreprocessor,Nt.sendListener=dt.payloadListener;var Mt=dt.overrideEndpointUrl?dt.overrideEndpointUrl:fe.endpointUrl;Ft._notificationManager=Ce.getNotifyMgr(),Nt.initialize(Mt,Ft.core,Ft,Dn,dt);var Et=fe.disablePageUnloadEvents||[];(0,w.c9)(tr,Et,Gn),(0,w.TJ)(tr,Et,Gn),(0,w.nD)(hr,fe.disablePageShowEvents,Gn)}catch(qt){throw Ft.setInitialized(!1),qt}},function(){return{coreConfig:fe,core:Ce,extensions:Le}})},Ft.processTelemetry=function(fe,Ce){(0,M.if)(fe,Ft.identifier),Ce=Ft._getTelCtx(Ce);var Le=Ce.getExtCfg(Ft.identifier),Ve=!!dt.disableTelemetry;Le&&(Ve=Ve||!!Le.disableTelemetry);var ct=fe;!Ve&&!ln&&(dt[ot]&&(ct.iKey=dt[ot]),Le&&Le[ot]&&(ct.iKey=Le[ot]),Qn(ct,!0),Fn?or(2,2):Xn()),Ft.processNext(ct,Ce)},Ft._doTeardown=function(fe,Ce){or(2,2),ln=!0,Nt.teardown(),(0,w.JA)(null,Gn),(0,w.C9)(null,Gn),(0,w.Yl)(null,Gn),zr()};function Or(fe){var Ce=fe.getWParam;fe.getWParam=function(){var Le=0;return dt.ignoreMc1Ms0CookieProcessing&&(Le=Le|2),Le|Ce()}}o(Or,"_hookWParam");function tr(fe){var Ce=fe||(0,y.Jj)().event;Ce.type!=="beforeunload"&&(Fn=!0,Nt.setUnloading(Fn)),or(2,2)}o(tr,"_handleUnloadEvents");function hr(fe){Fn=!1,Nt.setUnloading(Fn)}o(hr,"_handleShowEvents");function Qn(fe,Ce){if(fe.sendAttempt||(fe.sendAttempt=0),fe.latency||(fe.latency=1),fe.ext&&fe.ext[Ge]&&delete fe.ext[Ge],fe.ext&&fe.ext[k]&&fe.ext[k].id&&delete fe.ext[k].id,Yn&&(M.if,fe.ext=(0,g.Ax)(fe.ext),fe.baseData&&(fe.baseData=(0,g.Ax)(fe.baseData)),fe.data&&(fe.data=(0,g.Ax)(fe.data))),fe.sync){if(on||en)fe.latency=3,fe.sync=!1;else if(Nt){Yn&&(fe=(0,g.Ax)(fe)),Nt.sendSynchronousBatch(he.create(fe.iKey,[fe]),fe.sync===!0?1:fe.sync,3);return}}var Le=fe.latency,Ve=yn,ct=Wn;Le===4&&(Ve=un,ct=Sn);var gt=!1;if(Ve<ct)gt=!kr(fe,Ce);else{var Mt=1,Et=Yr;Le===4&&(Mt=4,Et=1),gt=!0,ai(fe.iKey,fe.latency,Mt,Et)&&(gt=!kr(fe,Ce))}gt&&On(ze,[fe],O.h.QueueFull)}o(Qn,"_addEventToQueues"),Ft.setEventQueueLimits=function(fe,Ce){Wn=fe>0?fe:1e4,_n=Ce>0?Ce:0,it();var Le=yn>fe;if(!Le&&Nn>0)for(var Ve=1;!Le&&Ve<=3;Ve++){var ct=gn[Ve];ct&&ct.batches&&(0,g.tO)(ct.batches,function(gt){gt&&gt.count()>=Nn&&(Le=!0)})}Hr(!0,Le)},Ft.pause=function(){yr(),en=!0,Nt.pause()},Ft.resume=function(){en=!1,Nt.resume(),Xn()},Ft.addResponseHandler=function(fe){Nt._responseHandlers.push(fe)},Ft._loadTransmitProfiles=function(fe){Jr(),(0,g.rW)(fe,function(Ce,Le){var Ve=Le.length;if(Ve>=2){var ct=Ve>2?Le[2]:0;if(Le.splice(0,Ve-2),Le[1]<0&&(Le[0]=-1),Le[1]>0&&Le[0]>0){var gt=Le[0]/Le[1];Le[0]=Math.ceil(gt)*Le[1]}ct>=0&&Le[1]>=0&&ct>Le[1]&&(ct=Le[1]),Le.push(ct),Ln[Ce]=Le}})},Ft.flush=function(fe,Ce,Le){if(fe===void 0&&(fe=!0),!en)if(Le=Le||1,fe)St==null?(yr(),oi(1,0,Le),St=gr(function(){St=null,sr(Ce,Le)},0)):zt.push(Ce);else{var Ve=yr();Pr(1,1,Le),Ce!=null&&Ce(),Ve&&Xn()}},Ft.setMsaAuthTicket=function(fe){Nt.addHeader(Ie,fe)},Ft.hasEvents=nr,Ft._setTransmitProfile=function(fe){Hn!==fe&&Ln[fe]!==void 0&&(yr(),Hn=fe,Xn())};function Pr(fe,Ce,Le){var Ve=oi(fe,Ce,Le);return Nt.sendQueuedRequests(Ce,Le),Ve}o(Pr,"_sendEventsForLatencyAndAbove");function nr(){return yn>0}o(nr,"_hasEvents");function Xn(){if(tn>=0&&oi(tn,0,xn)&&Nt.sendQueuedRequests(0,xn),un>0&&!Pt&&!en){var fe=Ln[Hn][2];fe>=0&&(Pt=gr(function(){Pt=null,Pr(4,0,1),Xn()},fe))}var Ce=Ln[Hn][1];!wn&&!St&&Ce>=0&&!en&&(nr()?wn=gr(function(){wn=null,Pr(kt===0?3:1,0,1),kt++,kt%=2,Xn()},Ce):kt=0)}o(Xn,"_scheduleTimer"),Ft._backOffTransmission=function(){on<qr&&(on++,yr(),Xn())},Ft._clearBackOff=function(){on&&(on=0,yr(),Xn())};function zr(){dt=null,ln=!1,zt=[],St=null,en=!1,un=0,Sn=500,yn=0,Wn=1e4,Ln={},Hn=W,wn=null,Pt=null,on=0,kt=0,Dn=null,gn={},_n=void 0,Nn=0,tn=-1,xn=null,Yn=!0,Fn=!1,qn=fr,Bn=ri,Gn=null,Vt=pr(),Nt=new Rn(Kr,Gr,Z,{requeue:zn,send:S,sent:$,drop:de,rspFail:Oe,oth:mt},Vt),Kn(),wr(),it()}o(zr,"_initDefaults");function gr(fe,Ce){Ce===0&&on&&(Ce=1);var Le=1e3;return on&&(Le=G(on-1)),Vt.set(fe,Ce*Le)}o(gr,"_createTimer");function yr(){return wn!==null?(Vt.clear(wn),wn=null,kt=0,!0):!1}o(yr,"_clearScheduledTimer");function or(fe,Ce){yr(),St&&(Vt.clear(St),St=null),en||Pr(1,fe,Ce)}o(or,"_releaseAllQueues");function wr(){gn[4]={batches:[],iKeyMap:{}},gn[3]={batches:[],iKeyMap:{}},gn[2]={batches:[],iKeyMap:{}},gn[1]={batches:[],iKeyMap:{}}}o(wr,"_clearQueues");function ii(fe,Ce,Le){var Ve=gn[Ce];Ve||(Ce=1,Ve=gn[Ce]);var ct=Ve.iKeyMap[fe];return!ct&&Le&&(ct=he.create(fe),Ve.batches.push(ct),Ve.iKeyMap[fe]=ct),ct}o(ii,"_getEventBatch");function Hr(fe,Ce){Nt.canSendRequest()&&!on&&(_n>0&&yn>_n&&(Ce=!0),Ce&&St==null&&Ft.flush(fe,null,20))}o(Hr,"_performAutoFlush");function kr(fe,Ce){Yn&&(fe=(0,g.Ax)(fe));var Le=fe.latency,Ve=ii(fe.iKey,Le,!0);return Ve.addEvent(fe)?(Le!==4?(yn++,Ce&&fe.sendAttempt===0&&Hr(!fe.sync,Nn>0&&Ve.count()>=Nn)):un++,!0):!1}o(kr,"_addEventToProperQueue");function ai(fe,Ce,Le,Ve){for(;Le<=Ce;){var ct=ii(fe,Ce,!0);if(ct&&ct.count()>0){var gt=ct.split(0,Ve),Mt=gt.count();if(Mt>0)return Le===4?un-=Mt:yn-=Mt,ye(ze,[gt],O.h.QueueFull),!0}Le++}return $n(),!1}o(ai,"_dropEventWithLatencyOrLess");function $n(){for(var fe=0,Ce=0,Le=o(function(ct){var gt=gn[ct];gt&&gt.batches&&(0,g.tO)(gt.batches,function(Mt){ct===4?fe+=Mt.count():Ce+=Mt.count()})},"_loop_1"),Ve=1;Ve<=4;Ve++)Le(Ve);yn=Ce,un=fe}o($n,"_resetQueueCounts");function oi(fe,Ce,Le){var Ve=!1,ct=Ce===0;return!ct||Nt.canSendRequest()?(0,T.Lm)(Ft.core,function(){return"PostChannel._queueBatches"},function(){for(var gt=[],Mt=4;Mt>=fe;){var Et=gn[Mt];Et&&Et.batches&&Et.batches.length>0&&((0,g.tO)(Et.batches,function(qt){Nt.addBatch(qt)?Ve=Ve||qt&&qt.count()>0:gt=gt.concat(qt.events()),Mt===4?un-=qt.count():yn-=qt.count()}),Et.batches=[],Et.iKeyMap={}),Mt--}gt.length>0&&On(ze,gt,O.h.KillSwitch),Ve&&tn>=fe&&(tn=-1,xn=0)},function(){return{latency:fe,sendType:Ce,sendReason:Le}},!ct):(tn=tn>=0?Math.min(tn,fe):fe,xn=Math.max(xn,Le)),Ve}o(oi,"_queueBatches");function sr(fe,Ce){Pr(1,0,Ce),$n(),nn(function(){fe&&fe(),zt.length>0?St=gr(function(){St=null,sr(zt.shift(),Ce)},0):(St=null,Xn())})}o(sr,"_flushImpl");function nn(fe){Nt.isCompletelyIdle()?fe():St=gr(function(){St=null,nn(fe)},bn)}o(nn,"_waitForIdleManager");function Jr(){yr(),Kn(),Hn=W,Xn()}o(Jr,"_resetTransmitProfiles");function Kn(){Ln={},Ln[W]=[2,1,0],Ln[N]=[6,3,0],Ln[z]=[18,9,0]}o(Kn,"_initializeProfiles");function zn(fe,Ce){var Le=[],Ve=qn;Fn&&(Ve=Bn),(0,g.tO)(fe,function(ct){ct&&ct.count()>0&&(0,g.tO)(ct.events(),function(gt){gt&&(gt.sync&&(gt.latency=4,gt.sync=!1),gt.sendAttempt<Ve?((0,M.if)(gt,Ft.identifier),Qn(gt,!1)):Le.push(gt))})}),Le.length>0&&On(ze,Le,O.h.NonRetryableStatus),Fn&&or(2,2)}o(zn,"_requeueEvents");function rr(fe,Ce){var Le=Ft._notificationManager||{},Ve=Le[fe];if(Ve)try{Ve.apply(Le,Ce)}catch(ct){(0,U.kP)(Ft.diagLog(),1,74,fe+" notification failed: "+ct)}}o(rr,"_callNotification");function On(fe,Ce){for(var Le=[],Ve=2;Ve<arguments.length;Ve++)Le[Ve-2]=arguments[Ve];Ce&&Ce.length>0&&rr(fe,[Ce].concat(Le))}o(On,"_notifyEvents");function ye(fe,Ce){for(var Le=[],Ve=2;Ve<arguments.length;Ve++)Le[Ve-2]=arguments[Ve];Ce&&Ce.length>0&&(0,g.tO)(Ce,function(ct){ct&&ct.count()>0&&rr(fe,[ct.events()].concat(Le))})}o(ye,"_notifyBatchEvents");function S(fe,Ce,Le){fe&&fe.length>0&&rr("eventsSendRequest",[Ce>=1e3&&Ce<=1999?Ce-1e3:0,Le!==!0])}o(S,"_sendingEvent");function $(fe,Ce){ye("eventsSent",fe,Ce),Xn()}o($,"_eventsSentEvent");function de(fe,Ce){ye(ze,fe,Ce>=8e3&&Ce<=8999?Ce-8e3:O.h.Unknown)}o(de,"_eventsDropped");function Oe(fe){ye(ze,fe,O.h.NonRetryableStatus),Xn()}o(Oe,"_eventsResponseFail");function mt(fe,Ce){ye(ze,fe,O.h.Unknown),Xn()}o(mt,"_otherEvent");function it(){!dt||!dt.disableAutoBatchFlushLimit?Nn=Math.max(Kr*(Gr+1),Wn/6):Nn=0}o(it,"_setAutoLimits"),(0,g.l_)(Ft,"_setTimeoutOverride",function(){return Vt.set},function(fe){Vt=pr(fe,Vt.clear)}),(0,g.l_)(Ft,"_clearTimeoutOverride",function(){return Vt.clear},function(fe){Vt=pr(Vt.set,fe)})}),xt}return o(Dt,"PostChannel"),Dt.__ieDyn=1,Dt}(_.i);const Ut=Mn},4873:(Qe,s,b)=>{"use strict";b.d(s,{By:()=>p,cc:()=>w});var R=b(6708);function p(J){var M={};return(0,R.rW)(J,function(g,y){M[g]=y,M[y]=g}),(0,R._A)(M)}o(p,"createEnumStyle");function T(J){var M={};return objForEachKey(J,function(g,y){M[g]=g,M[y]=g}),deepFreeze(M)}o(T,"createEnumMap");function w(J){var M={};return(0,R.rW)(J,function(g,y){M[g]=y[1],M[y[0]]=y[1]}),(0,R._A)(M)}o(w,"createValueMap")},5928:(Qe,s,b)=>{"use strict";b.d(s,{h:()=>p});var R=b(4873),p=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(Qe,s,b)=>{"use strict";b.d(s,{X:()=>X,v:()=>Q});var R=b(4873),p,T="Failed",w=T+"MonitorAjax",J="Track",M="Start",g="Stop",y="Event",O="AuthContext",U="Exception",_="Local",W="Session",N="Storage",z="Browser",Y="Cannot",Ee="Buffer",H="InstrumentationKey",X=(0,R.By)({CRITICAL:1,WARNING:2}),Q=(0,R.By)((p={},p[z+"DoesNotSupport"+_+N]=0,p[z+Y+"Read"+_+N]=1,p[z+Y+"Read"+W+N]=2,p[z+Y+"Write"+_+N]=3,p[z+Y+"Write"+W+N]=4,p[z+T+"RemovalFrom"+_+N]=5,p[z+T+"RemovalFrom"+W+N]=6,p[Y+"SendEmptyTelemetry"]=7,p.ClientPerformanceMathError=8,p["ErrorParsingAI"+W+"Cookie"]=9,p.ErrorPVCalc=10,p[U+"WhileLoggingError"]=11,p[T+"AddingTelemetryTo"+Ee]=12,p[w+"Abort"]=13,p[w+"Dur"]=14,p[w+"Open"]=15,p[w+"RSC"]=16,p[w+"Send"]=17,p[w+"GetCorrelationHeader"]=18,p[T+"ToAddHandlerForOnBeforeUnload"]=19,p[T+"ToSendQueuedTelemetry"]=20,p[T+"ToReportDataLoss"]=21,p["Flush"+T]=22,p.MessageLimitPerPVExceeded=23,p.MissingRequiredFieldSpecification=24,p.NavigationTimingNotSupported=25,p.OnError=26,p[W+"RenewalDateIsZero"]=27,p.SenderNotInitialized=28,p[M+J+y+T]=29,p[g+J+y+T]=30,p[M+J+T]=31,p[g+J+T]=32,p.TelemetrySampledAndNotSent=33,p[J+y+T]=34,p[J+U+T]=35,p[J+"Metric"+T]=36,p[J+"PV"+T]=37,p[J+"PV"+T+"Calc"]=38,p[J+"Trace"+T]=39,p["Transmission"+T]=40,p[T+"ToSet"+N+Ee]=41,p[T+"ToRestore"+N+Ee]=42,p.InvalidBackendResponse=43,p[T+"ToFixDepricatedValues"]=44,p.InvalidDurationValue=45,p.TelemetryEnvelopeInvalid=46,p.CreateEnvelopeError=47,p[Y+"SerializeObject"]=48,p[Y+"SerializeObjectNonSerializable"]=49,p.CircularReferenceDetected=50,p["Clear"+O+T]=51,p[U+"Truncated"]=52,p.IllegalCharsInName=53,p.ItemNotInArray=54,p.MaxAjaxPerPVExceeded=55,p.MessageTruncated=56,p.NameTooLong=57,p.SampleRateOutOfRange=58,p["Set"+O+T]=59,p["Set"+O+T+"AccountName"]=60,p.StringValueTooLong=61,p.StartCalledMoreThanOnce=62,p.StopCalledWithoutStart=63,p["TelemetryInitializer"+T]=64,p.TrackArgumentsNotSpecified=65,p.UrlTooLong=66,p[W+N+Ee+"Full"]=67,p[Y+"AccessCookie"]=68,p.IdTooLong=69,p.InvalidEvent=70,p[w+"SetRequestHeader"]=71,p["Send"+z+"InfoOnUserInit"]=72,p["Plugin"+U]=73,p["Notification"+U]=74,p.SnippetScriptLoadFailure=99,p["Invalid"+H]=100,p[Y+"ParseAiBlobValue"]=101,p.InvalidContentBlob=102,p[J+"PageAction"+y+T]=103,p[T+"AddingCustomDefinedRequestContext"]=104,p["InMemory"+N+Ee+"Full"]=105,p[H+"Deprecation"]=106,p))},5121:(Qe,s,b)=>{"use strict";b.d(s,{F:()=>U});var R=b(1088),p=b(1679),T=b(8096),w=b(6900),J=b(5018),M=b(6708),g=b(6041),y=b(1880),O=b(9288),U=function(_){(0,R.ne)(W,_);function W(){var N=_.call(this)||this;return(0,p.Z)(W,N,function(z,Y){z[T.VL]=function(X,Q,P,B){Y[T.VL](X,Q,P||new J.AQ(X),B||new y.f(X))},z.track=function(X){(0,O.Lm)(z[g.kl](),function(){return"AppInsightsCore:track"},function(){X===null&&(H(X),(0,M._y)("Invalid telemetry item")),Ee(X),Y.track(X)},function(){return{item:X}},!X.sync)};function Ee(X){(0,M.le)(X[T.I])&&(H(X),(0,M._y)("telemetry name required"))}o(Ee,"_validateTelemetryItem");function H(X){var Q=z[T.tb]();Q&&Q[g.$F]([X],2)}o(H,"_notifyInvalidEvent")}),N}return o(W,"AppInsightsCore"),W.__ieDyn=1,W}(w.A)},6900:(Qe,s,b)=>{"use strict";b.d(s,{A:()=>Fe});var R=b(1088),p=b(1679),T=b(2091),w=b(8096),J=b(6708),M=b(6041),g=b(1589),y=b(3833),O=500,U="Channel has invalid priority - ";function _(ve,F,we){F&&(0,J.kJ)(F)&&F[w.R5]>0&&(F=F.sort(function(Ie,Te){return Ie[M.yi]-Te[M.yi]}),(0,J.tO)(F,function(Ie){Ie[M.yi]<O&&(0,J._y)(U+Ie[w.pZ])}),ve[w.MW]({queue:(0,J.FL)(F),chain:(0,g.jV)(F,we[w.TC],we)}))}o(_,"_addChannelQueue");function W(ve,F){function we(){return(0,g.CD)(null,F[w.TC],F,null)}o(we,"_getTelCtx");function Ie(k,V,ee,he){var Je=k?k[w.R5]+1:1;function nt(){Je--,Je===0&&(he&&he(),he=null)}o(nt,"_runChainOnComplete"),Je>0&&(0,J.tO)(k,function(pe){if(pe&&pe.queue[w.R5]>0){var Ae=pe.chain,Se=V[w.zV](Ae);Se[w.Fc](nt),ee(Se)}else Je--}),nt()}o(Ie,"_processChannelQueue");function Te(k,V){var ee=V||{reason:0};return Ie(ve,k,function(he){he[w.uL](ee)},function(){k[w.uL](ee)}),!0}o(Te,"_doUpdate");function re(k,V){var ee=V||{reason:0,isAsync:!1};return Ie(ve,k,function(he){he[w.uL](ee)},function(){k[w.uL](ee),Ze=!1}),!0}o(re,"_doTeardown");function vt(k){var V=null;return ve&&ve[w.R5]>0&&(0,J.tO)(ve,function(ee){if(ee&&ee.queue[w.R5]>0&&((0,J.tO)(ee.queue,function(he){if(he[w.pZ]===k)return V=he,-1}),V))return-1}),V}o(vt,"_getChannel");var Ze=!1,Ge={identifier:"ChannelControllerPlugin",priority:O,initialize:function(k,V,ee,he){Ze=!0,(0,J.tO)(ve,function(Je){Je&&Je.queue[w.R5]>0&&(0,y.bP)((0,g.CD)(Je.chain,k,V),ee)})},isInitialized:function(){return Ze},processTelemetry:function(k,V){Ie(ve,V||we(),function(ee){ee[w.uL](k)},function(){V[w.uL](k)})},update:Te,pause:function(){Ie(ve,we(),function(k){k.iterate(function(V){V.pause&&V.pause()})},null)},resume:function(){Ie(ve,we(),function(k){k.iterate(function(V){V.resume&&V.resume()})},null)},teardown:re,getChannel:vt,flush:function(k,V,ee,he){var Je=1,nt=!1,pe=null;he=he||5e3;function Ae(){Je--,nt&&Je===0&&(pe&&(clearTimeout(pe),pe=null),V&&V(nt),V=null)}return o(Ae,"doCallback"),Ie(ve,we(),function(Se){Se.iterate(function(ie){if(ie[w.kL]){Je++;var Re=!1;ie[w.kL](k,function(){Re=!0,Ae()},ee)||Re||(k&&pe==null?pe=setTimeout(function(){pe=null,Ae()},he):Ae())}})},function(){nt=!0,Ae()}),!0},_setQueue:function(k){ve=k}};return Ge}o(W,"createChannelControllerPlugin");function N(ve,F,we){var Ie=[];if(ve&&(0,J.tO)(ve,function(re){return _(Ie,re,we)}),F){var Te=[];(0,J.tO)(F,function(re){re[M.yi]>O&&Te[w.MW](re)}),_(Ie,Te,we)}return Ie}o(N,"createChannelQueues");var z=b(3242),Y=b(5883),Ee=b(7158),H=b(5018),X=b(9288),Q=b(4063),P=b(7630),B=function(ve){(0,R.ne)(F,ve);function F(){var we=ve.call(this)||this;we.identifier="TelemetryInitializerPlugin",we.priority=199;var Ie,Te;re(),(0,p.Z)(F,we,function(vt,Ze){vt.addTelemetryInitializer=function(Ge){var k={id:Ie++,fn:Ge};Te[w.MW](k);var V={remove:function(){(0,J.tO)(Te,function(ee,he){if(ee.id===k.id)return Te[w.cb](he,1),-1})}};return V},vt[M.hL]=function(Ge,k){for(var V=!1,ee=Te[w.R5],he=0;he<ee;++he){var Je=Te[he];if(Je)try{if(Je.fn[w.ZV](null,[Ge])===!1){V=!0;break}}catch(nt){(0,H.kP)(k[w.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,J.jj)(nt),{exception:(0,P.eU)(nt)},!0)}}V||vt[w.uL](Ge,k)},vt[w.F3]=function(){re()}});function re(){Ie=0,Te=[]}return o(re,"_initDefaults"),we}return o(F,"TelemetryInitializerPlugin"),F.__ieDyn=1,F}(Q.i),K=b(310),q="Plugins must provide initialize method",ne="_notificationManager",me="SDK is still unloading...",_e="SDK is not initialized",Be={loggingLevelConsole:1};function oe(ve,F){return new X.Jk(F)}o(oe,"_createPerfManager");function L(ve,F,we){var Ie,Te=[],re={};return(0,J.tO)(we,function(vt){((0,J.le)(vt)||(0,J.le)(vt[w.VL]))&&(0,J._y)(q);var Ze=vt[M.yi],Ge=vt[w.pZ];vt&&Ze&&((0,J.le)(re[Ze])?re[Ze]=Ge:(0,H.jV)(ve,"Two extensions have same priority #"+Ze+" - "+re[Ze]+", "+Ge)),(!Ze||Ze<F)&&Te[w.MW](vt)}),Ie={all:we},Ie[M.oV]=Te,Ie}o(L,"_validateExtensions");function se(ve,F){var we=!1;return(0,J.tO)(F,function(Ie){if(Ie===ve)return we=!0,-1}),we}o(se,"_isPluginPresent");function We(){var ve;return(0,T.pu)((ve={},ve[w.g]=function(F){},ve[w.n7]=function(F){},ve[M.uC]=function(F){},ve[M.$F]=function(F,we){},ve[M.f_]=function(F,we){},ve))}o(We,"_createDummyNotificationManager");var Fe=function(){function ve(){var F,we,Ie,Te,re,vt,Ze,Ge,k,V,ee,he,Je,nt,pe,Ae,Se,ie,Re,ge,tt=0;(0,p.Z)(ve,this,function(Ne){A(),Ne[w.yl]=function(){return we},Ne[w.VL]=function(et,Lt,Qt,Tt){nt&&(0,J._y)(me),Ne[w.yl]()&&(0,J._y)("Core should not be initialized more than once"),F=et||{},Ne[w.TC]=F,(0,J.le)(et[w.p$])&&(0,J._y)("Please provide instrumentation key"),Te=Tt,Ne[ne]=Tt,wt(),dn(),pn(),Qt&&(Ne[w.eZ]=Qt);var Xt=(0,J.qK)(F,M.js,[]);k=[],k[w.MW].apply(k,(0,R.$h)((0,R.$h)([],Lt,!1),Xt,!1)),he=(0,J.qK)(F,M.Z,[]),ue(null),(!Je||Je[w.R5]===0)&&(0,J._y)("No "+M.Z+" available"),we=!0,Ne.releaseQueue()},Ne.getTransmissionControls=function(){var et=[];return Je&&(0,J.tO)(Je,function(Lt){et[w.MW](Lt.queue)}),(0,J.FL)(et)},Ne.track=function(et){et.iKey=et.iKey||F[w.p$],et[w.Z_]=et[w.Z_]||(0,J.Y6)(new Date),et.ver=et.ver||"4.0",!nt&&Ne[w.yl]()?G()[w.uL](et):Ie[w.MW](et)},Ne[w.SD]=G,Ne[w.tb]=function(){return Te||(Te=We(),Ne[ne]=Te),Te},Ne[w.g]=function(et){Te&&Te[w.g](et)},Ne[w.n7]=function(et){Te&&Te[w.n7](et)},Ne.getCookieMgr=function(){return Ze||(Ze=(0,z.Nz)(F,Ne[w.eZ])),Ze},Ne.setCookieMgr=function(et){Ze=et},Ne[M.kl]=function(){if(!re&&!vt&&(0,J.v4)(F.enablePerfMgr)){var et=(0,J.v4)(F[M.DN]);(0,J.mf)(et)&&(vt=et(Ne,Ne[w.tb]()))}return re||vt||(0,X.j5)()},Ne.setPerfMgr=function(et){re=et},Ne.eventCnt=function(){return Ie[w.R5]},Ne.releaseQueue=function(){if(we&&Ie[w.R5]>0){var et=Ie;Ie=[],(0,J.tO)(et,function(Lt){G()[w.uL](Lt)})}},Ne.pollInternalLogs=function(et){Ae=et||null;var Lt=(0,J.v4)(F.diagnosticLogInterval);return(!Lt||!(Lt>0))&&(Lt=1e4),tt&&clearInterval(tt),tt=setInterval(function(){qe()},Lt),tt},Ne[w.LS]=function(){tt&&(clearInterval(tt),tt=0,qe())},(0,J.Vb)(Ne,function(){return pe},["addTelemetryInitializer"]),Ne.unload=function(et,Lt,Qt){var Tt;et===void 0&&(et=!0),we||(0,J._y)(_e),nt&&(0,J._y)(me);var Xt=(Tt={reason:50},Tt[w.d]=et,Tt.flushComplete=!1,Tt),ht=(0,g.Bt)(Ye(),Ne);ht[w.Fc](function(){A(),Lt&&Lt(Xt)},Ne);function sn(Yt){Xt.flushComplete=Yt,nt=!0,ie.run(ht,Xt),Ne[w.LS](),ht[w.uL](Xt)}o(sn,"_doUnload"),At(et,sn,6,Qt)||sn(!1)},Ne[w.TO]=je,Ne.addPlugin=function(et,Lt,Qt,Tt){if(!et){Tt&&Tt(!1),Un(q);return}var Xt=je(et[w.pZ]);if(Xt&&!Lt){Tt&&Tt(!1),Un("Plugin ["+et[w.pZ]+"] is already loaded!");return}var ht={reason:16};function sn(hn){k[w.MW](et),ht.added=[et],ue(ht),Tt&&Tt(!0)}if(o(sn,"_addPlugin"),Xt){var Yt=[Xt.plugin],an={reason:2,isAsync:!!Qt};_t(Yt,an,function(hn){hn?(ht.removed=Yt,ht.reason|=32,sn(!0)):Tt&&Tt(!1)})}else sn(!1)},Ne.evtNamespace=function(){return Se},Ne[w.kL]=At,Ne.getTraceCtx=function(et){return ge||(ge=(0,y.Yn)()),ge},Ne.setTraceCtx=function(et){ge=et||null},(0,J.Oi)(Ne,"addUnloadCb",function(){return ie},"add");function A(){we=!1,F=(0,J.mm)(!0,{},Be),Ne[w.TC]=F,Ne[w.eZ]=new H.AQ(F),Ne[w.iC]=[],pe=new B,Ie=[],Te=null,re=null,vt=null,Ze=null,Ge=null,V=null,k=[],ee=null,he=null,Je=null,nt=!1,Ae=null,Se=(0,Y.J)("AIBaseCore",!0),ie=(0,K.Y)(),ge=null}o(A,"_initDefaults");function G(){return(0,g.CD)(Ye(),F,Ne)}o(G,"_createTelCtx");function ue(et){var Lt=L(Ne[w.eZ],O,k);V=Lt[M.oV],Ge=null;var Qt=Lt.all;if(Je=(0,J.FL)(N(he,Qt,Ne)),ee){var Tt=(0,J.UA)(Qt,ee);Tt!==-1&&Qt[w.cb](Tt,1),Tt=(0,J.UA)(V,ee),Tt!==-1&&V[w.cb](Tt,1),ee._setQueue(Je)}else ee=W(Je,Ne);Qt[w.MW](ee),V[w.MW](ee),Ne[w.iC]=(0,y.AA)(Qt),ee[w.VL](F,Ne,Qt),(0,y.bP)(G(),Qt),Ne[w.iC]=(0,J.FL)((0,y.AA)(V||[])).slice(),et&&In(et)}o(ue,"_initPluginChain");function je(et){var Lt,Qt=null,Tt=null;return(0,J.tO)(Ne[w.iC],function(Xt){if(Xt[w.pZ]===et&&Xt!==ee&&Xt!==pe)return Tt=Xt,-1}),!Tt&&ee&&(Tt=ee.getChannel(et)),Tt&&(Qt=(Lt={plugin:Tt},Lt[w.$h]=function(Xt){(0,y.OY)(Tt)[M.mE]=!Xt},Lt.isEnabled=function(){var Xt=(0,y.OY)(Tt);return!Xt[w.fi]&&!Xt[M.mE]},Lt.remove=function(Xt,ht){var sn;Xt===void 0&&(Xt=!0);var Yt=[Tt],an=(sn={reason:1},sn[w.d]=Xt,sn);_t(Yt,an,function(hn){hn&&ue({reason:32,removed:Yt}),ht&&ht(hn)})},Lt)),Qt}o(je,"_getPlugin");function Ye(){if(!Ge){var et=(V||[]).slice();(0,J.UA)(et,pe)===-1&&et[w.MW](pe),Ge=(0,g.jV)((0,y.AA)(et),F,Ne)}return Ge}o(Ye,"_getPluginChain");function _t(et,Lt,Qt){if(et&&et[w.R5]>0){var Tt=(0,g.jV)(et,F,Ne),Xt=(0,g.Bt)(Tt,Ne);Xt[w.Fc](function(){var ht=!1,sn=[];(0,J.tO)(k,function(an,hn){se(an,et)?ht=!0:sn[w.MW](an)}),k=sn;var Yt=[];he&&((0,J.tO)(he,function(an,hn){var Rn=[];(0,J.tO)(an,function(Tn){se(Tn,et)?ht=!0:Rn[w.MW](Tn)}),Yt[w.MW](Rn)}),he=Yt),Qt&&Qt(ht)}),Xt[w.uL](Lt)}else Qt(!1)}o(_t,"_removePlugins");function qe(){var et=Ne[w.eZ]?Ne[w.eZ].queue:[];et&&((0,J.tO)(et,function(Lt){var Qt,Tt=(Qt={},Qt[w.I]=Ae||"InternalMessageId: "+Lt[w.Gc],Qt.iKey=(0,J.v4)(F[w.p$]),Qt.time=(0,J.Y6)(new Date),Qt.baseType=H.lQ.dataType,Qt.baseData={message:Lt[w.gU]},Qt);Ne.track(Tt)}),et[w.R5]=0)}o(qe,"_flushInternalLogs");function At(et,Lt,Qt,Tt){return ee?ee[w.kL](et,Lt,Qt||6,Tt):(Lt&&Lt(!1),!0)}o(At,"_flushChannels");function wt(){var et=(0,J.v4)(F.disableDbgExt);et===!0&&Re&&(Te[w.n7](Re),Re=null),Te&&!Re&&et!==!0&&(Re=(0,Ee.p)(F),Te[w.g](Re))}o(wt,"_initDebugListener");function dn(){var et=(0,J.v4)(F.enablePerfMgr);!et&&vt&&(vt=null),et&&(0,J.qK)(F,M.DN,oe)}o(dn,"_initPerfManager");function pn(){var et=(0,J.qK)(F,M.Zh,{});et.NotificationManager=Te}o(pn,"_initExtConfig");function In(et){var Lt=(0,g.xy)(Ye(),Ne);(!Ne._updateHook||Ne._updateHook(Lt,et)!==!0)&&Lt[w.uL](et)}o(In,"_doUpdate");function Un(et){var Lt=Ne[w.eZ];Lt?(0,H.kP)(Lt,2,73,et):(0,J._y)(et)}o(Un,"_logOrThrowError")})}return o(ve,"BaseCore"),ve.__ieDyn=1,ve}()},4063:(Qe,s,b)=>{"use strict";b.d(s,{i:()=>y});var R=b(1679),p=b(8096),T=b(6708),w=b(6041),J=b(1589),M=b(310),g="getPlugin",y=function(){function O(){var U=this,_,W,N,z,Y;X(),(0,R.Z)(O,U,function(Q){Q[p.VL]=function(P,B,K,q){H(P,B,q),_=!0},Q[p.fi]=function(P,B){var K,q=Q[w.oV];if(!q||P&&q!==P[w.oV]())return;var ne,me=!1,_e=P||(0,J.Bt)(null,q,N&&N[g]?N[g]():N),Be=B||(K={reason:0},K[p.d]=!1,K);function oe(){if(!me){me=!0,z.run(_e,B);var L=Y;Y=[],(0,T.tO)(L,function(se){se.rm()}),ne===!0&&_e[p.uL](Be),X()}}return o(oe,"_unloadCallback"),!Q[p.F3]||Q[p.F3](_e,Be,oe)!==!0?oe():ne=!0,ne},Q[p.Tu]=function(P,B){var K=Q[w.oV];if(!K||P&&K!==P[w.oV]())return;var q,ne=!1,me=P||(0,J.xy)(null,K,N&&N[g]?N[g]():N),_e=B||{reason:0};function Be(){ne||(ne=!0,H(me.getCfg(),me.core(),me[p.W2]()))}return o(Be,"_updateCallback"),!Q._doUpdate||Q._doUpdate(me,_e,Be)!==!0?Be():q=!0,q},Q._addHook=function(P){P&&((0,T.kJ)(P)?Y=Y.concat(P):Y[p.MW](P))},(0,T.Oi)(Q,"_addUnloadCb",function(){return z},"add")}),U[p.mc]=function(Q){return Ee(Q)[p.mc]()},U[p.yl]=function(){return _},U.setInitialized=function(Q){_=Q},U[p.Jd]=function(Q){N=Q},U[p.uL]=function(Q,P){P?P[p.uL](Q):N&&(0,T.mf)(N[w.hL])&&N[w.hL](Q,null)},U._getTelCtx=Ee;function Ee(Q){Q===void 0&&(Q=null);var P=Q;if(!P){var B=W||(0,J.CD)(null,{},U[w.oV]);N&&N[g]?P=B[p.zV](null,N[g]):P=B[p.zV](null,N)}return P}o(Ee,"_getTelCtx");function H(Q,P,B){Q&&(0,T.sO)(Q,w.Zh,[],null,T.le),!B&&P&&(B=P[p.SD]()[p.W2]());var K=N;N&&N[g]&&(K=N[g]()),U[w.oV]=P,W=(0,J.CD)(B,Q,P,K)}o(H,"_setDefaults");function X(){_=!1,U[w.oV]=null,W=null,N=null,Y=[],z=(0,M.Y)()}o(X,"_initDefaults")}return o(O,"BaseTelemetryPlugin"),O.__ieDyn=1,O}()},3242:(Qe,s,b)=>{"use strict";b.d(s,{kj:()=>P,JP:()=>me,Nz:()=>_e,p7:()=>Be,UY:()=>ve});var R=b(8096),p=b(5018),T=b(7630),w=b(6708),J=b(6041),M="toGMTString",g="toUTCString",y="cookie",O="expires",U="enabled",_="isCookieUseDisabled",W="disableCookiesUsage",N="_ckMgr",z=null,Y=null,Ee=null,H=(0,T.Me)(),X={},Q={};function P(F,we){var Ie=_e[N]||Q[N];return Ie||(Ie=_e[N]=_e(F,we),Q[N]=Ie),Ie}o(P,"_gblCookieMgr");function B(F){return F?F.isEnabled():!0}o(B,"_isMgrEnabled");function K(F){var we=F[R.Lk]=F[R.Lk]||{};if((0,w.sO)(we,"domain",F.cookieDomain,w.BX,w.le),(0,w.sO)(we,"path",F.cookiePath||"/",null,w.le),(0,w.le)(we[U])){var Ie=void 0;(0,w.o8)(F[_])||(Ie=!F[_]),(0,w.o8)(F[W])||(Ie=!F[W]),we[U]=Ie}return we}o(K,"_createCookieMgrConfig");function q(F,we){return we&&F&&(0,w.kJ)(F.ignoreCookies)?F.ignoreCookies[R.ou](we)!==-1:!1}o(q,"_isIgnoredCookie");function ne(F,we){return we&&F&&(0,w.kJ)(F.blockedCookies)&&F.blockedCookies[R.ou](we)!==-1?!0:q(F,we)}o(ne,"_isBlockedCookie");function me(F,we){var Ie;if(F)Ie=F.getCookieMgr();else if(we){var Te=we[R.Lk];Te[N]?Ie=Te[N]:Ie=_e(we)}return Ie||(Ie=P(we,(F||{})[R.eZ])),Ie}o(me,"safeGetCookieMgr");function _e(F,we){var Ie,Te=K(F||Q),re=Te.path||"/",vt=Te.domain,Ze=Te[U]!==!1,Ge=(Ie={isEnabled:function(){var k=Ze&&Be(we),V=Q[N];return k&&V&&Ge!==V&&(k=B(V)),k}},Ie[R.$h]=function(k){Ze=k!==!1},Ie.set=function(k,V,ee,he,Je){var nt=!1;if(B(Ge)&&!ne(Te,k)){var pe={},Ae=(0,w.nd)(V||J.qS),Se=Ae[R.ou](";");if(Se!==-1&&(Ae=(0,w.nd)(V[R.zc](0,Se)),pe=oe(V[R.zc](Se+1))),(0,w.sO)(pe,"domain",he||vt,w.fQ,w.o8),!(0,w.le)(ee)){var ie=(0,T.w1)();if((0,w.o8)(pe[O])){var Re=(0,w.m6)(),ge=Re+ee*1e3;if(ge>0){var tt=new Date;tt.setTime(ge),(0,w.sO)(pe,O,L(tt,ie?M:g)||L(tt,ie?M:g)||J.qS,w.fQ)}}ie||(0,w.sO)(pe,"max-age",J.qS+ee,null,w.o8)}var Ne=(0,T.k$)();Ne&&Ne.protocol==="https:"&&((0,w.sO)(pe,"secure",null,null,w.o8),Y===null&&(Y=!ve(((0,T.jW)()||{})[R.qV])),Y&&(0,w.sO)(pe,"SameSite","None",null,w.o8)),(0,w.sO)(pe,"path",Je||re,null,w.o8);var A=Te.setCookie||Fe;A(k,se(Ae,pe)),nt=!0}return nt},Ie.get=function(k){var V=J.qS;return B(Ge)&&!q(Te,k)&&(V=(Te.getCookie||We)(k)),V},Ie.del=function(k,V){var ee=!1;return B(Ge)&&(ee=Ge.purge(k,V)),ee},Ie.purge=function(k,V){var ee,he=!1;if(Be(we)){var Je=(ee={},ee.path=V||"/",ee[O]="Thu, 01 Jan 1970 00:00:01 GMT",ee);(0,T.w1)()||(Je["max-age"]="0");var nt=Te.delCookie||Fe;nt(k,se(J.qS,Je)),he=!0}return he},Ie);return Ge[N]=Ge,Ge}o(_e,"createCookieMgr");function Be(F){if(z===null){z=!1;try{var we=H||{};z=we[y]!==void 0}catch(Ie){(0,p.kP)(F,2,68,"Cannot access document.cookie - "+(0,w.jj)(Ie),{exception:(0,T.eU)(Ie)})}}return z}o(Be,"areCookiesSupported");function oe(F){var we={};if(F&&F[R.R5]){var Ie=(0,w.nd)(F)[R.w6](";");(0,w.tO)(Ie,function(Te){if(Te=(0,w.nd)(Te||J.qS),Te){var re=Te[R.ou]("=");re===-1?we[Te]=null:we[(0,w.nd)(Te[R.zc](0,re))]=(0,w.nd)(Te[R.zc](re+1))}})}return we}o(oe,"_extractParts");function L(F,we){return(0,w.mf)(F[we])?F[we]():null}o(L,"_formatDate");function se(F,we){var Ie=F||J.qS;return(0,w.rW)(we,function(Te,re){Ie+="; "+Te+((0,w.le)(re)?J.qS:"="+re)}),Ie}o(se,"_formatCookieValue");function We(F){var we=J.qS;if(H){var Ie=H[y]||J.qS;Ee!==Ie&&(X=oe(Ie),Ee=Ie),we=(0,w.nd)(X[F]||J.qS)}return we}o(We,"_getCookieValue");function Fe(F,we){H&&(H[y]=F+"="+we)}o(Fe,"_setCookieValue");function ve(F){return(0,w.HD)(F)?!!((0,w._Q)(F,"CPU iPhone OS 12")||(0,w._Q)(F,"iPad; CPU OS 12")||(0,w._Q)(F,"Macintosh; Intel Mac OS X 10_14")&&(0,w._Q)(F,"Version/")&&(0,w._Q)(F,"Safari")||(0,w._Q)(F,"Macintosh; Intel Mac OS X 10_14")&&(0,w.Id)(F,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,w._Q)(F,"Chrome/5")||(0,w._Q)(F,"Chrome/6")||(0,w._Q)(F,"UnrealEngine")&&!(0,w._Q)(F,"Chrome")||(0,w._Q)(F,"UCBrowser/12")||(0,w._Q)(F,"UCBrowser/11")):!1}o(ve,"uaDisallowsSameSiteNone")},5843:(Qe,s,b)=>{"use strict";b.d(s,{GW:()=>W,Jj:()=>N,DO:()=>Y,Tr:()=>Ee,zB:()=>X,oF:()=>P,vn:()=>B,ej:()=>K,d8:()=>q,kT:()=>ne});var R=b(2091),p=b(8096),T=b(3242),w=b(7630),J=b(4869),M=b(6708),g=b(6041),y=b(4878),O=null,U,_=null;function W(){var me=Y();return me[p.zc](0,8)+"-"+me[p.zc](8,12)+"-"+me[p.zc](12,16)+"-"+me[p.zc](16,20)+"-"+me[p.zc](20)}o(W,"newGuid");function N(){var me=(0,w.r)();return me&&me.now?me.now():(0,M.m6)()}o(N,"perfNow");function z(me,_e){if(me&&_e){var Be=me[_DYN_LENGTH],oe=Be-_e[_DYN_LENGTH];return me[_DYN_SUBSTRING](oe>=0?oe:0,Be)===_e}return!1}o(z,"strEndsWith");function Y(){for(var me=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],_e=g.qS,Be,oe=0;oe<4;oe++)Be=(0,y._l)(),_e+=me[Be&15]+me[Be>>4&15]+me[Be>>8&15]+me[Be>>12&15]+me[Be>>16&15]+me[Be>>20&15]+me[Be>>24&15]+me[Be>>28&15];var L=me[8+((0,y._l)()&3)|0];return _e[p.Jn](0,8)+_e[p.Jn](9,4)+"4"+_e[p.Jn](13,3)+L+_e[p.Jn](16,3)+_e[p.Jn](19,12)}o(Y,"generateW3CId");var Ee={_canUseCookies:void 0,isTypeof:M.Ym,isUndefined:M.o8,isNullOrUndefined:M.le,hasOwnProperty:M.nr,isFunction:M.mf,isObject:M.Kn,isDate:M.J_,isArray:M.kJ,isError:M.VZ,isString:M.HD,isNumber:M.hj,isBoolean:M.jn,toISOString:M.Y6,arrForEach:M.tO,arrIndexOf:M.UA,arrMap:M.Mr,arrReduce:M.Xz,strTrim:M.nd,objCreate:R.pu,objKeys:M.FY,objDefineAccessors:M.l_,addEventHandler:J.Ib,dateNow:M.m6,isIE:w.w1,disableCookies:P,newGuid:W,perfNow:N,newId:y.pZ,randomValue:y.az,random32:y._l,mwcRandomSeed:y.CN,mwcRandom32:y.F6,generateW3CId:Y},H=/[xy]/g,X={Attach:J.pZ,AttachEvent:J.pZ,Detach:J.pD,DetachEvent:J.pD};function Q(me,_e){var Be=(0,T.kj)(me,_e),oe=Ee._canUseCookies;return O===null&&(O=[],U=oe,(0,M.l_)(Ee,"_canUseCookies",function(){return U},function(L){U=L,(0,M.tO)(O,function(se){se[p.$h](L)})})),(0,M.UA)(O,Be)===-1&&O[p.MW](Be),(0,M.jn)(oe)&&Be[p.$h](oe),(0,M.jn)(U)&&Be[p.$h](U),Be}o(Q,"_legacyCookieMgr");function P(){Q()[p.$h](!1)}o(P,"disableCookies");function B(me){return Q(null,me).isEnabled()}o(B,"canUseCookies");function K(me,_e){return Q(null,me).get(_e)}o(K,"getCookie");function q(me,_e,Be,oe){Q(null,me).set(_e,Be,null,oe)}o(q,"setCookie");function ne(me,_e){return Q(null,me).del(_e)}o(ne,"deleteCookie")},5883:(Qe,s,b)=>{"use strict";b.d(s,{J:()=>N,K:()=>z});var R=b(4392),p=b(8096),T=b(6708),w=b(6041),J=b(4878),M=R.RJ,g="2.8.9",y="."+(0,J.pZ)(6),O=0;function U(Y,Ee,H){if(M)try{return M(Y,Ee,{value:H,enumerable:!1,configurable:!0}),!0}catch(X){}return!1}o(U,"_createAccessor");function _(Y){return Y[p.xv]===1||Y[p.xv]===9||!+Y[p.xv]}o(_,"_canAcceptData");function W(Y,Ee){var H=Ee[Y.id];if(!H){H={};try{_(Ee)&&(U(Ee,Y.id,H)||(Ee[Y.id]=H))}catch(X){}}return H}o(W,"_getCache");function N(Y,Ee){return Ee===void 0&&(Ee=!1),(0,T.Gf)(Y+O+++(Ee?"."+g:w.qS)+y)}o(N,"createUniqueNamespace");function z(Y){var Ee={id:N("_aiData-"+(Y||w.qS)+"."+g),accept:function(H){return _(H)},get:function(H,X,Q,P){var B=H[Ee.id];return B?B[(0,T.Gf)(X)]:(P&&(B=W(Ee,H),B[(0,T.Gf)(X)]=Q),Q)},kill:function(H,X){if(H&&H[X])try{delete H[X]}catch(Q){}}};return Ee}o(z,"createElmNodeData")},7158:(Qe,s,b)=>{"use strict";b.d(s,{j:()=>y,p:()=>O});var R=b(8096),p=b(7630),T=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],w=null,J;function M(U,_){return function(){var W=arguments,N=y(_);if(N){var z=N.listener;z&&z[U]&&z[U][R.ZV](z,W)}}}o(M,"_listenerProxyFunc");function g(){var U=(0,p.a8)("Microsoft");return U&&(w=U.ApplicationInsights),w}o(g,"_getExtensionNamespace");function y(U){var _=w;return!_&&U.disableDbgExt!==!0&&(_=w||g()),_?_.ChromeDbgExt:null}o(y,"getDebugExt");function O(U){if(!J){J={};for(var _=0;_<T[R.R5];_++)J[T[_]]=M(T[_],U)}return J}o(O,"getDebugListener")},5018:(Qe,s,b)=>{"use strict";b.d(s,{lQ:()=>W,vH:()=>N,AQ:()=>z,kP:()=>Ee,jV:()=>H,L4:()=>X});var R=b(1679),p=b(8096),T=b(7158),w=b(7630),J=b(6708),M=b(6041),g="AI (Internal): ",y="AI: ",O="AITR_";function U(Q){return Q?'"'+Q[p.i7](/\"/g,M.qS)+'"':M.qS}o(U,"_sanitizeDiagnosticText");function _(Q,P){var B=(0,w.dr)();if(B){var K="log";B[Q]&&(K=Q),(0,J.mf)(B[K])&&B[K](P)}}o(_,"_logToConsole");var W=function(){function Q(P,B,K,q){K===void 0&&(K=!1);var ne=this;ne[p.Gc]=P,ne[p.gU]=(K?y:g)+P;var me=M.qS;(0,w.nS)()&&(me=(0,w.xA)().stringify(q));var _e=(B?" message:"+U(B):M.qS)+(q?" props:"+U(me):M.qS);ne[p.gU]+=_e}return o(Q,"_InternalLogMessage"),Q.dataType="MessageData",Q}();function N(Q,P){return(Q||{})[p.eZ]||new z(P)}o(N,"safeGetLogger");var z=function(){function Q(P){this.identifier="DiagnosticLogger",this.queue=[];var B=0,K={},q,ne,me,_e;(0,R.Z)(Q,this,function(Be){L(P||{}),Be.consoleLoggingLevel=function(){return q},Be.telemetryLoggingLevel=function(){return ne},Be.maxInternalMessageLimit=function(){return me},Be[p.Fr]=function(){return _e},Be.throwInternal=function(Fe,ve,F,we,Ie){Ie===void 0&&(Ie=!1);var Te=new W(ve,F,Ie,we);if(_e)throw(0,w.eU)(Te);var re=Fe===1?M.ys:M.cL;if((0,J.o8)(Te[p.gU]))We("throw"+(Fe===1?"Critical":"Warning"),Te);else{if(Ie){var vt=+Te[p.Gc];!K[vt]&&q>=Fe&&(Be[re](Te[p.gU]),K[vt]=!0)}else q>=Fe&&Be[re](Te[p.gU]);oe(Fe,Te)}},Be[M.cL]=function(Fe){_("warn",Fe),We("warning",Fe)},Be[M.ys]=function(Fe){_("error",Fe),We("error",Fe)},Be.resetInternalMessageCount=function(){B=0,K={}},Be[p.jk]=oe;function oe(Fe,ve){if(!se()){var F=!0,we=O+ve[p.Gc];if(K[we]?F=!1:K[we]=!0,F&&(Fe<=ne&&(Be.queue[p.MW](ve),B++,We(Fe===1?"error":"warn",ve)),B===me)){var Ie="Internal events throttle limit per PageView reached for this app.",Te=new W(23,Ie,!1);Be.queue[p.MW](Te),Fe===1?Be[M.ys](Ie):Be[M.cL](Ie)}}}o(oe,"_logInternalMessage");function L(Fe){q=(0,J.v4)(Fe.loggingLevelConsole,0),ne=(0,J.v4)(Fe.loggingLevelTelemetry,1),me=(0,J.v4)(Fe.maxMessageLimit,25),_e=(0,J.v4)(Fe[p.Fr],!1)}o(L,"_setDefaultsFromConfig");function se(){return B>=me}o(se,"_areInternalMessagesThrottled");function We(Fe,ve){var F=(0,T.j)(P||{});F&&F[p.mc]&&F[p.mc](Fe,ve)}o(We,"_debugExtMsg")})}return o(Q,"DiagnosticLogger"),Q.__ieDyn=1,Q}();function Y(Q){return Q||new z}o(Y,"_getLogger");function Ee(Q,P,B,K,q,ne){ne===void 0&&(ne=!1),Y(Q).throwInternal(P,B,K,q,ne)}o(Ee,"_throwInternal");function H(Q,P){Y(Q)[M.cL](P)}o(H,"_warnToConsole");function X(Q,P,B){Y(Q)[p.jk](P,B)}o(X,"_logInternalMessage")},7630:(Qe,s,b)=>{"use strict";b.d(s,{dI:()=>Be,a8:()=>oe,Ym:()=>L,Jj:()=>se,Nv:()=>We,Me:()=>Fe,d6:()=>ve,jW:()=>F,fE:()=>we,s1:()=>Ie,k$:()=>Te,dr:()=>re,r:()=>vt,nS:()=>Ze,xA:()=>Ge,MX:()=>k,gz:()=>V,b$:()=>ee,w1:()=>he,sA:()=>Je,eU:()=>nt,MF:()=>Ae,JO:()=>Se,cp:()=>ie,Z3:()=>Re,ed:()=>tt,pI:()=>Ne});var R=b(4392),p=b(2091),T=b(8096),w=b(6708),J=b(6041),M="window",g="document",y="documentMode",O="navigator",U="history",_="location",W="console",N="performance",z="JSON",Y="crypto",Ee="msCrypto",H="ReactNative",X="msie",Q="trident/",P="XMLHttpRequest",B=null,K=null,q=!1,ne=null,me=null;function _e(A,G){var ue=!1;if(A){try{if(ue=G in A,!ue){var je=A[R.hB];je&&(ue=G in je)}}catch(_t){}if(!ue)try{var Ye=new A;ue=!(0,w.o8)(Ye[G])}catch(_t){}}return ue}o(_e,"_hasProperty");function Be(A){q=A}o(Be,"setEnableEnvMocks");function oe(A){var G=(0,p.Rd)();return G&&G[A]?G[A]:A===M&&L()?window:null}o(oe,"getGlobalInst");function L(){return Boolean(typeof window===R.fK&&window)}o(L,"hasWindow");function se(){return L()?window:oe(M)}o(se,"getWindow");function We(){return Boolean(typeof document===R.fK&&document)}o(We,"hasDocument");function Fe(){return We()?document:oe(g)}o(Fe,"getDocument");function ve(){return Boolean(typeof navigator===R.fK&&navigator)}o(ve,"hasNavigator");function F(){return ve()?navigator:oe(O)}o(F,"getNavigator");function we(){return Boolean(typeof history===R.fK&&history)}o(we,"hasHistory");function Ie(){return we()?history:oe(U)}o(Ie,"getHistory");function Te(A){if(A&&q){var G=oe("__mockLocation");if(G)return G}return typeof location===R.fK&&location?location:oe(_)}o(Te,"getLocation");function re(){return typeof console!==R.jA?console:oe(W)}o(re,"getConsole");function vt(){return oe(N)}o(vt,"getPerformance");function Ze(){return Boolean(typeof JSON===R.fK&&JSON||oe(z)!==null)}o(Ze,"hasJSON");function Ge(){return Ze()?JSON||oe(z):null}o(Ge,"getJSON");function k(){return oe(Y)}o(k,"getCrypto");function V(){return oe(Ee)}o(V,"getMsCrypto");function ee(){var A=F();return A&&A.product?A.product===H:!1}o(ee,"isReactNative");function he(){var A=F();if(A&&(A[T.qV]!==K||B===null)){K=A[T.qV];var G=(K||J.qS)[T.T1]();B=(0,w._Q)(G,X)||(0,w._Q)(G,Q)}return B}o(he,"isIE");function Je(A){if(A===void 0&&(A=null),!A){var G=F()||{};A=G?(G[T.qV]||J.qS)[T.T1]():J.qS}var ue=(A||J.qS)[T.T1]();if((0,w._Q)(ue,X)){var je=Fe()||{};return Math.max(parseInt(ue[T.w6](X)[1]),je[y]||0)}else if((0,w._Q)(ue,Q)){var Ye=parseInt(ue[T.w6](Q)[1]);if(Ye)return Ye+4}return null}o(Je,"getIEVersion");function nt(A){var G=Object[R.hB].toString[T._S](A),ue=J.qS;return G==="[object Error]"?ue="{ stack: '"+A.stack+"', message: '"+A.message+"', name: '"+A[T.I]+"'":Ze()&&(ue=Ge().stringify(A)),G+ue}o(nt,"dumpObj");function pe(A){if(!A||!isString(A)){var G=F()||{};A=G?(G[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var ue=(A||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return ue[_DYN_INDEX_OF]("safari")>=0}o(pe,"isSafari");function Ae(){return me===null&&(me=ve()&&Boolean(F().sendBeacon)),me}o(Ae,"isBeaconsSupported");function Se(A){var G=!1;try{G=!!oe("fetch");var ue=oe("Request");G&&A&&ue&&(G=_e(ue,"keepalive"))}catch(je){}return G}o(Se,"isFetchSupported");function ie(){return ne===null&&(ne=typeof XDomainRequest!==R.jA,ne&&Re()&&(ne=ne&&!_e(oe(P),"withCredentials"))),ne}o(ie,"useXDomainRequest");function Re(){var A=!1;try{var G=oe(P);A=!!G}catch(ue){}return A}o(Re,"isXhrSupported");function ge(A,G){if(A)for(var ue=0;ue<A[T.R5];ue++){var je=A[ue];if(je[T.I]&&je[T.I]===G)return je}return{}}o(ge,"_getNamedValue");function tt(A){var G=Fe();return G&&A?ge(G.querySelectorAll("meta"),A).content:null}o(tt,"findMetaTag");function Ne(A){var G,ue=vt();if(ue){var je=ue.getEntriesByType("navigation")||[];G=ge((je[T.R5]>0?je[0]:{}).serverTiming,A).description}return G}o(Ne,"findNamedServerTiming")},4869:(Qe,s,b)=>{"use strict";b.d(s,{um:()=>_e,jU:()=>Fe,XO:()=>ve,QY:()=>F,pZ:()=>we,pD:()=>Ie,Ib:()=>Te,C1:()=>re,yw:()=>Ze,nJ:()=>Ge,c9:()=>k,JA:()=>V,TJ:()=>ee,C9:()=>he,nD:()=>Je,Yl:()=>nt});var R=b(8096),p=b(5883),T=b(7630),w=b(6708),J=b(6041),M="on",g="attachEvent",y="addEventListener",O="detachEvent",U="removeEventListener",_="events",W="visibilitychange",N="pagehide",z="pageshow",Y="unload",Ee="beforeunload",H=(0,p.J)("aiEvtPageHide"),X=(0,p.J)("aiEvtPageShow"),Q=/\.[\.]+/g,P=/[\.]+$/,B=1,K=(0,p.K)("events"),q=/^([^.]*)(?:\.(.+)|)/;function ne(pe){return pe&&pe[R.i7]?pe[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,J.qS):pe}o(ne,"_normalizeNamespace");function me(pe,Ae){var Se;if(Ae){var ie=J.qS;(0,w.kJ)(Ae)?(ie=J.qS,(0,w.tO)(Ae,function(ge){ge=ne(ge),ge&&(ge[0]!=="."&&(ge="."+ge),ie+=ge)})):ie=ne(Ae),ie&&(ie[0]!=="."&&(ie="."+ie),pe=(pe||J.qS)+ie)}var Re=q.exec(pe||J.qS)||[];return Se={},Se[R.P6]=Re[1],Se.ns=(Re[2]||J.qS).replace(Q,".").replace(P,J.qS)[R.w6](".").sort().join("."),Se}o(me,"_getEvtNamespace");function _e(pe,Ae,Se){var ie=[],Re=K.get(pe,_,{},!1),ge=me(Ae,Se);return(0,w.rW)(Re,function(tt,Ne){(0,w.tO)(Ne,function(A){var G;(!ge[R.P6]||ge[R.P6]===A.evtName[R.P6])&&(!ge.ns||ge.ns===ge.ns)&&ie[R.MW]((G={},G[R.I]=A.evtName[R.P6]+(A.evtName.ns?"."+A.evtName.ns:J.qS),G.handler=A[R.Kn],G))})}),ie}o(_e,"__getRegisteredEvents");function Be(pe,Ae,Se){Se===void 0&&(Se=!0);var ie=K.get(pe,_,{},Se),Re=ie[Ae];return Re||(Re=ie[Ae]=[]),Re}o(Be,"_getRegisteredEvents");function oe(pe,Ae,Se,ie){pe&&Ae&&Ae[R.P6]&&(pe[U]?pe[U](Ae[R.P6],Se,ie):pe[O]&&pe[O](M+Ae[R.P6],Se))}o(oe,"_doDetach");function L(pe,Ae,Se,ie){var Re=!1;return pe&&Ae&&Ae[R.P6]&&Se&&(pe[y]?(pe[y](Ae[R.P6],Se,ie),Re=!0):pe[g]&&(pe[g](M+Ae[R.P6],Se),Re=!0)),Re}o(L,"_doAttach");function se(pe,Ae,Se,ie){for(var Re=Ae[R.R5];Re--;){var ge=Ae[Re];ge&&(!Se.ns||Se.ns===ge.evtName.ns)&&(!ie||ie(ge))&&(oe(pe,ge.evtName,ge[R.Kn],ge.capture),Ae[R.cb](Re,1))}}o(se,"_doUnregister");function We(pe,Ae,Se){if(Ae[R.P6])se(pe,Be(pe,Ae[R.P6]),Ae,Se);else{var ie=K.get(pe,_,{});(0,w.rW)(ie,function(Re,ge){se(pe,ge,Ae,Se)}),(0,w.FY)(ie)[R.R5]===0&&K.kill(pe,_)}}o(We,"_unregisterEvents");function Fe(pe,Ae){var Se;return Ae?((0,w.kJ)(Ae)?Se=[pe].concat(Ae):Se=[pe,Ae],Se=me("xx",Se).ns[R.w6](".")):Se=pe,Se}o(Fe,"mergeEvtNamespace");function ve(pe,Ae,Se,ie,Re){var ge;Re===void 0&&(Re=!1);var tt=!1;if(pe)try{var Ne=me(Ae,ie);if(tt=L(pe,Ne,Se,Re),tt&&K.accept(pe)){var A=(ge={guid:B++,evtName:Ne},ge[R.Kn]=Se,ge.capture=Re,ge);Be(pe,Ne.type)[R.MW](A)}}catch(G){}return tt}o(ve,"eventOn");function F(pe,Ae,Se,ie,Re){if(Re===void 0&&(Re=!1),pe)try{var ge=me(Ae,ie),tt=!1;We(pe,ge,function(Ne){return ge.ns&&!Se||Ne[R.Kn]===Se?(tt=!0,!0):!1}),tt||oe(pe,ge,Se,Re)}catch(Ne){}}o(F,"eventOff");function we(pe,Ae,Se,ie){return ie===void 0&&(ie=!1),ve(pe,Ae,Se,null,ie)}o(we,"attachEvent");function Ie(pe,Ae,Se,ie){ie===void 0&&(ie=!1),F(pe,Ae,Se,null,ie)}o(Ie,"detachEvent");function Te(pe,Ae,Se){var ie=!1,Re=(0,T.Jj)();Re&&(ie=ve(Re,pe,Ae,Se),ie=ve(Re.body,pe,Ae,Se)||ie);var ge=(0,T.Me)();return ge&&(ie=ve(ge,pe,Ae,Se)||ie),ie}o(Te,"addEventHandler");function re(pe,Ae,Se){var ie=(0,T.Jj)();ie&&(F(ie,pe,Ae,Se),F(ie.body,pe,Ae,Se));var Re=(0,T.Me)();Re&&F(Re,pe,Ae,Se)}o(re,"removeEventHandler");function vt(pe,Ae,Se,ie){var Re=!1;return Ae&&pe&&pe[R.R5]>0&&(0,w.tO)(pe,function(ge){ge&&(!Se||(0,w.UA)(Se,ge)===-1)&&(Re=Te(ge,Ae,ie)||Re)}),Re}o(vt,"_addEventListeners");function Ze(pe,Ae,Se,ie){var Re=!1;return Ae&&pe&&(0,w.kJ)(pe)&&(Re=vt(pe,Ae,Se,ie),!Re&&Se&&Se[R.R5]>0&&(Re=vt(pe,Ae,null,ie))),Re}o(Ze,"addEventListeners");function Ge(pe,Ae,Se){pe&&(0,w.kJ)(pe)&&(0,w.tO)(pe,function(ie){ie&&re(ie,Ae,Se)})}o(Ge,"removeEventListeners");function k(pe,Ae,Se){return Ze([Ee,Y,N],pe,Ae,Se)}o(k,"addPageUnloadEventListener");function V(pe,Ae){Ge([Ee,Y,N],pe,Ae)}o(V,"removePageUnloadEventListener");function ee(pe,Ae,Se){function ie(tt){var Ne=(0,T.Me)();pe&&Ne&&Ne.visibilityState==="hidden"&&pe(tt)}o(ie,"_handlePageVisibility");var Re=Fe(H,Se),ge=vt([N],pe,Ae,Re);return(!Ae||(0,w.UA)(Ae,W)===-1)&&(ge=vt([W],ie,Ae,Re)||ge),!ge&&Ae&&(ge=ee(pe,null,Se)),ge}o(ee,"addPageHideEventListener");function he(pe,Ae){var Se=Fe(H,Ae);Ge([N],pe,Se),Ge([W],null,Se)}o(he,"removePageHideEventListener");function Je(pe,Ae,Se){function ie(tt){var Ne=(0,T.Me)();pe&&Ne&&Ne.visibilityState==="visible"&&pe(tt)}o(ie,"_handlePageVisibility");var Re=Fe(X,Se),ge=vt([z],pe,Ae,Re);return ge=vt([W],ie,Ae,Re)||ge,!ge&&Ae&&(ge=Je(pe,null,Se)),ge}o(Je,"addPageShowEventListener");function nt(pe,Ae){var Se=Fe(X,Ae);Ge([z],pe,Se),Ge([W],null,Se)}o(nt,"removePageShowEventListener")},6708:(Qe,s,b)=>{"use strict";b.d(s,{Ym:()=>we,o8:()=>Ie,le:()=>re,BX:()=>vt,nr:()=>Ze,Kn:()=>Ge,mf:()=>k,Gf:()=>ee,rW:()=>he,Id:()=>Je,xe:()=>pe,_Q:()=>Se,J_:()=>ie,kJ:()=>Re,VZ:()=>tt,HD:()=>Ne,hj:()=>A,jn:()=>G,Y6:()=>Ye,tO:()=>qe,UA:()=>At,Mr:()=>wt,Xz:()=>dn,nd:()=>pn,FY:()=>et,l_:()=>Lt,_A:()=>Tt,FL:()=>Xt,Xi:()=>ht,m6:()=>sn,jj:()=>Yt,sO:()=>an,qK:()=>hn,v4:()=>Rn,F:()=>Tn,fQ:()=>xr,_y:()=>pr,cf:()=>Kr,Oi:()=>Yr,Vb:()=>fr,hl:()=>ri,Ax:()=>qr,mm:()=>Gr});var R=b(4392),p=b(2091),T=b(8096),w=b(6041),J="toISOString",M="endsWith",g="startsWith",y="indexOf",O="map",U="reduce",_="trim",W="toString",N="__proto__",z="constructor",Y=R.RJ,Ee=R.Pw.freeze,H=R.Pw.seal,X=R.Pw.keys,Q=String[R.hB],P=Q[_],B=Q[M],K=Q[g],q=Date[R.hB],ne=q[J],me=Array.isArray,_e=R.V4[W],Be=R.CY[W],oe=Be[T._S](R.Pw),L=/-([a-z])/g,se=/([^\w\d_$])/g,We=/^(\d+[\w\d_$])/,Fe=Object.getPrototypeOf;function ve(Z){if(Z){if(Fe)return Fe(Z);var ze=Z[N]||Z[R.hB]||Z[z];if(ze)return ze}return null}o(ve,"_getObjProto");function F(Z){return _e[_DYN_CALL](Z)}o(F,"objToString");function we(Z,ze){return typeof Z===ze}o(we,"isTypeof");function Ie(Z){return Z===void 0||typeof Z===R.jA}o(Ie,"isUndefined");function Te(Z){return!Ie(Z)}o(Te,"isNotUndefined");function re(Z){return Z===null||Ie(Z)}o(re,"isNullOrUndefined");function vt(Z){return!re(Z)}o(vt,"isNotNullOrUndefined");function Ze(Z,ze){return!!(Z&&R.CY[T._S](Z,ze))}o(Ze,"hasOwnProperty");function Ge(Z){return!!(Z&&typeof Z===R.fK)}o(Ge,"isObject");function k(Z){return!!(Z&&typeof Z===R.cb)}o(k,"isFunction");function V(Z){return Z&&k(Z.then)}o(V,"isPromiseLike");function ee(Z){var ze=Z;return ze&&Ne(ze)&&(ze=ze[T.i7](L,function(ot,pt){return pt.toUpperCase()}),ze=ze[T.i7](se,"_"),ze=ze[T.i7](We,function(ot,pt){return"_"+pt})),ze}o(ee,"normalizeJsName");function he(Z,ze){if(Z)for(var ot in Z)R.CY[T._S](Z,ot)&&ze[T._S](Z,ot,Z[ot])}o(he,"objForEachKey");function Je(Z,ze){var ot=!1;return Z&&ze&&!(ot=Z===ze)&&(ot=B?Z[M](ze):nt(Z,ze)),ot}o(Je,"strEndsWith");function nt(Z,ze){var ot=!1,pt=ze?ze[T.R5]:0,Ht=Z?Z[T.R5]:0;if(pt&&Ht&&Ht>=pt&&!(ot=Z===ze)){for(var Bt=Ht-1,Mn=pt-1;Mn>=0;Mn--){if(Z[Bt]!=ze[Mn])return!1;Bt--}ot=!0}return ot}o(nt,"_strEndsWithPoly");function pe(Z,ze){var ot=!1;return Z&&ze&&!(ot=Z===ze)&&(ot=K?Z[g](ze):Ae(Z,ze)),ot}o(pe,"strStartsWith");function Ae(Z,ze){var ot=!1,pt=ze?ze[T.R5]:0;if(Z&&pt&&Z[T.R5]>=pt&&!(ot=Z===ze)){for(var Ht=0;Ht<pt;Ht++)if(Z[Ht]!==ze[Ht])return!1;ot=!0}return ot}o(Ae,"_strStartsWithPoly");function Se(Z,ze){return Z&&ze?Z[T.ou](ze)!==-1:!1}o(Se,"strContains");function ie(Z){return!!(Z&&_e[T._S](Z)==="[object Date]")}o(ie,"isDate");var Re=me||ge;function ge(Z){return!!(Z&&_e[T._S](Z)==="[object Array]")}o(ge,"_isArrayPoly");function tt(Z){return!!(Z&&_e[T._S](Z)==="[object Error]")}o(tt,"isError");function Ne(Z){return typeof Z=="string"}o(Ne,"isString");function A(Z){return typeof Z=="number"}o(A,"isNumber");function G(Z){return typeof Z=="boolean"}o(G,"isBoolean");function ue(Z){return typeof Z=="symbol"}o(ue,"isSymbol");function je(Z){var ze=!1;if(Z&&typeof Z=="object"){var ot=Fe?Fe(Z):ve(Z);ot?(ot[z]&&R.CY[T._S](ot,z)&&(ot=ot[z]),ze=typeof ot===R.cb&&Be[T._S](ot)===oe):ze=!0}return ze}o(je,"isPlainObject");function Ye(Z){if(Z)return ne?Z[J]():_t(Z)}o(Ye,"toISOString");function _t(Z){if(Z&&Z.getUTCFullYear){var ze=o(function(ot){var pt=String(ot);return pt[T.R5]===1&&(pt="0"+pt),pt},"pad");return Z.getUTCFullYear()+"-"+ze(Z.getUTCMonth()+1)+"-"+ze(Z.getUTCDate())+"T"+ze(Z.getUTCHours())+":"+ze(Z.getUTCMinutes())+":"+ze(Z.getUTCSeconds())+"."+String((Z.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(_t,"_toISOStringPoly");function qe(Z,ze,ot){var pt=Z[T.R5];try{for(var Ht=0;Ht<pt&&!(Ht in Z&&ze[T._S](ot||Z,Z[Ht],Ht,Z)===-1);Ht++);}catch(Bt){}}o(qe,"arrForEach");function At(Z,ze,ot){if(Z){if(Z[y])return Z[y](ze,ot);var pt=Z[T.R5],Ht=ot||0;try{for(var Bt=Math.max(Ht>=0?Ht:pt-Math.abs(Ht),0);Bt<pt;Bt++)if(Bt in Z&&Z[Bt]===ze)return Bt}catch(Mn){}}return-1}o(At,"arrIndexOf");function wt(Z,ze,ot){var pt;if(Z){if(Z[O])return Z[O](ze,ot);var Ht=Z[T.R5],Bt=ot||Z;pt=new Array(Ht);try{for(var Mn=0;Mn<Ht;Mn++)Mn in Z&&(pt[Mn]=ze[T._S](Bt,Z[Mn],Z))}catch(Ut){}}return pt}o(wt,"arrMap");function dn(Z,ze,ot){var pt;if(Z){if(Z[U])return Z[U](ze,ot);var Ht=Z[T.R5],Bt=0;if(arguments[T.R5]>=3)pt=arguments[2];else{for(;Bt<Ht&&!(Bt in Z);)Bt++;pt=Z[Bt++]}for(;Bt<Ht;)Bt in Z&&(pt=ze(pt,Z[Bt],Bt,Z)),Bt++}return pt}o(dn,"arrReduce");function pn(Z){return Z&&(Z=P&&Z[_]?Z[_]():Z[T.i7]?Z[T.i7](/^\s+|(?=\s)\s+$/g,w.qS):Z),Z}o(pn,"strTrim");var In=!{toString:null}.propertyIsEnumerable("toString"),Un=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function et(Z){var ze=typeof Z;if(ze!==R.cb&&(ze!==R.fK||Z===null)&&(0,p.ZU)("objKeys called on non-object"),!In&&X)return X(Z);var ot=[];for(var pt in Z)Z&&R.CY[T._S](Z,pt)&&ot[T.MW](pt);if(In)for(var Ht=Un[T.R5],Bt=0;Bt<Ht;Bt++)Z&&R.CY[T._S](Z,Un[Bt])&&ot[T.MW](Un[Bt]);return ot}o(et,"objKeys");function Lt(Z,ze,ot,pt){if(Y)try{var Ht={enumerable:!0,configurable:!0};return ot&&(Ht.get=ot),pt&&(Ht.set=pt),Y(Z,ze,Ht),!0}catch(Bt){}return!1}o(Lt,"objDefineAccessors");function Qt(Z){return Z}o(Qt,"_doNothing");function Tt(Z){return Ee&&he(Z,function(ze,ot){(Re(ot)||Ge(ot))&&Ee(ot)}),Xt(Z)}o(Tt,"deepFreeze");var Xt=Ee||Qt,ht=H||Qt;function sn(){var Z=Date;return Z.now?Z.now():new Z().getTime()}o(sn,"dateNow");function Yt(Z){return tt(Z)?Z[T.I]:w.qS}o(Yt,"getExceptionName");function an(Z,ze,ot,pt,Ht){var Bt=ot;return Z&&(Bt=Z[ze],Bt!==ot&&(!Ht||Ht(Bt))&&(!pt||pt(ot))&&(Bt=ot,Z[ze]=Bt)),Bt}o(an,"setValue");function hn(Z,ze,ot){var pt;return Z?(pt=Z[ze],!pt&&re(pt)&&(pt=Ie(ot)?{}:ot,Z[ze]=pt)):pt=Ie(ot)?{}:ot,pt}o(hn,"getSetValue");function Rn(Z,ze){return re(Z)?ze:Z}o(Rn,"getCfgValue");function Tn(Z){return!Z}o(Tn,"isNotTruthy");function xr(Z){return!!Z}o(xr,"isTruthy");function pr(Z){throw new Error(Z)}o(pr,"throwError");function bn(Z,ze){var ot=null,pt=null;return k(Z)?ot=Z:pt=Z,function(){var Ht=arguments;if(ot&&(pt=ot()),pt)return pt[ze][T.ZV](pt,Ht)}}o(bn,"_createProxyFunction");function Kr(Z,ze,ot){if(Z&&ze&&Ge(Z)&&Ge(ze)){var pt=o(function(Bt){if(Ne(Bt)){var Mn=ze[Bt];k(Mn)?(!ot||ot(Bt,!0,ze,Z))&&(Z[Bt]=bn(ze,Bt)):(!ot||ot(Bt,!1,ze,Z))&&(Ze(Z,Bt)&&delete Z[Bt],Lt(Z,Bt,function(){return ze[Bt]},function(Ut){ze[Bt]=Ut})||(Z[Bt]=Mn))}},"_loop_1");for(var Ht in ze)pt(Ht)}return Z}o(Kr,"proxyAssign");function Yr(Z,ze,ot,pt,Ht){Z&&ze&&ot&&(Ht!==!1||Ie(Z[ze]))&&(Z[ze]=bn(ot,pt))}o(Yr,"proxyFunctionAs");function fr(Z,ze,ot,pt){return Z&&ze&&Ge(Z)&&Re(ot)&&qe(ot,function(Ht){Ne(Ht)&&Yr(Z,Ht,ze,Ht,pt)}),Z}o(fr,"proxyFunctions");function ri(Z){return function(){function ze(){var ot=this;Z&&he(Z,function(pt,Ht){ot[pt]=Ht})}return o(ze,"class_1"),ze}()}o(ri,"createClassFromInterface");function qr(Z){return Z&&R.rl&&(Z=(0,R.Pw)((0,R.rl)({},Z))),Z}o(qr,"optimizeObject");function Gr(Z,ze,ot,pt,Ht,Bt){var Mn=arguments,Ut=Mn[0]||{},yt=Mn[T.R5],Dt=!1,xt=1;for(yt>0&&G(Ut)&&(Dt=Ut,Ut=Mn[xt]||{},xt++),Ge(Ut)||(Ut={});xt<yt;xt++){var dt=Mn[xt],ln=Re(dt),zt=Ge(dt);for(var St in dt){var en=ln&&St in dt||zt&&R.CY[T._S](dt,St);if(!!en){var un=dt[St],Sn=void 0;if(Dt&&un&&((Sn=Re(un))||je(un))){var yn=Ut[St];Sn?Re(yn)||(yn=[]):je(yn)||(yn={}),un=Gr(Dt,yn,un)}un!==void 0&&(Ut[St]=un)}}}return Ut}o(Gr,"objExtend")},6041:(Qe,s,b)=>{"use strict";b.d(s,{qS:()=>R,Z:()=>p,oV:()=>T,DN:()=>w,mE:()=>J,Zh:()=>M,js:()=>g,hL:()=>y,yi:()=>O,uC:()=>U,$F:()=>_,f_:()=>W,C$:()=>N,ys:()=>z,cL:()=>Y,kl:()=>Ee});var R="",p="channels",T="core",w="createPerfMgr",J="disabled",M="extensionConfig",g="extensions",y="processTelemetry",O="priority",U="eventsSent",_="eventsDiscarded",W="eventsSendRequest",N="perfEvent",z="errorToConsole",Y="warnToConsole",Ee="getPerfMgr"},1880:(Qe,s,b)=>{"use strict";b.d(s,{f:()=>M});var R=b(1679),p=b(8096),T=b(6708),w=b(6041);function J(g,y,O,U){(0,T.tO)(g,function(_){if(_&&_[y])if(O)setTimeout(function(){return U(_)},0);else try{U(_)}catch(W){}})}o(J,"_runListeners");var M=function(){function g(y){this.listeners=[];var O=!!(y||{}).perfEvtsSendAll;(0,R.Z)(g,this,function(U){U[p.g]=function(_){U.listeners[p.MW](_)},U[p.n7]=function(_){for(var W=(0,T.UA)(U[p.dE],_);W>-1;)U.listeners[p.cb](W,1),W=(0,T.UA)(U[p.dE],_)},U[w.uC]=function(_){J(U[p.dE],w.uC,!0,function(W){W[w.uC](_)})},U[w.$F]=function(_,W){J(U[p.dE],w.$F,!0,function(N){N[w.$F](_,W)})},U[w.f_]=function(_,W){J(U[p.dE],w.f_,W,function(N){N[w.f_](_,W)})},U[w.C$]=function(_){_&&(O||!_[p.PL]())&&J(U[p.dE],w.C$,!1,function(W){_[p.d]?setTimeout(function(){return W[w.C$](_)},0):W[w.C$](_)})}})}return o(g,"NotificationManager"),g.__ieDyn=1,g}()},9288:(Qe,s,b)=>{"use strict";b.d(s,{zn:()=>O,Jk:()=>U,Lm:()=>W,j5:()=>z});var R=b(1679),p=b(8096),T=b(6708),w=b(6041),J="ctx",M="ParentContextKey",g="ChildrenContextKey",y=null,O=function(){function Y(Ee,H,X){var Q=this,P=!1;if(Q.start=(0,T.m6)(),Q[p.I]=Ee,Q[p.d]=X,Q[p.PL]=function(){return!1},(0,T.mf)(H)){var B;P=(0,T.l_)(Q,"payload",function(){return!B&&(0,T.mf)(H)&&(B=H(),H=null),B})}Q[p.T]=function(K){return K?K===Y[M]||K===Y[g]?Q[K]:(Q[J]||{})[K]:null},Q[p.wu]=function(K,q){if(K)if(K===Y[M])Q[K]||(Q[p.PL]=function(){return!0}),Q[K]=q;else if(K===Y[g])Q[K]=q;else{var ne=Q[J]=Q[J]||{};ne[K]=q}},Q[p.Km]=function(){var K=0,q=Q[p.T](Y[g]);if((0,T.kJ)(q))for(var ne=0;ne<q[p.R5];ne++){var me=q[ne];me&&(K+=me[p.Z_])}Q[p.Z_]=(0,T.m6)()-Q.start,Q.exTime=Q[p.Z_]-K,Q[p.Km]=function(){},!P&&(0,T.mf)(H)&&(Q.payload=H())}}return o(Y,"PerfEvent"),Y.ParentContextKey="parent",Y.ChildrenContextKey="childEvts",Y}(),U=function(){function Y(Ee){this.ctx={},(0,R.Z)(Y,this,function(H){H.create=function(X,Q,P){return new O(X,Q,P)},H.fire=function(X){X&&(X[p.Km](),Ee&&(0,T.mf)(Ee[w.C$])&&Ee[w.C$](X))},H[p.wu]=function(X,Q){if(X){var P=H[J]=H[J]||{};P[X]=Q}},H[p.T]=function(X){return(H[J]||{})[X]}})}return o(Y,"PerfManager"),Y.__ieDyn=1,Y}(),_="CoreUtils.doPerf";function W(Y,Ee,H,X,Q){if(Y){var P=Y;if(P[w.kl]&&(P=P[w.kl]()),P){var B=void 0,K=P[p.T](_);try{if(B=P.create(Ee(),X,Q),B){if(K&&B[p.wu]&&(B[p.wu](O[M],K),K[p.T]&&K[p.wu])){var q=K[p.T](O[g]);q||(q=[],K[p.wu](O[g],q)),q[p.MW](B)}return P[p.wu](_,B),H(B)}}catch(ne){B&&B[p.wu]&&B[p.wu]("exception",ne)}finally{B&&P.fire(B),P[p.wu](_,K)}}}return H()}o(W,"doPerf");function N(Y){y=Y}o(N,"setGblPerfMgr");function z(){return y}o(z,"getGblPerfMgr")},1589:(Qe,s,b)=>{"use strict";b.d(s,{CD:()=>z,Bt:()=>Y,xy:()=>Ee,jV:()=>H,Vi:()=>Q});var R=b(8096),p=b(5018),T=b(7630),w=b(6708),J=b(6041),M=b(9288),g=b(3833),y="TelemetryPluginChain",O="_hasRun",U="_getTelCtx",_=0;function W(P,B,K){for(;P;){if(P[R.TO]()===K)return P;P=P[R.W2]()}return H([K],B[R.TC]||{},B)}o(W,"_getNextProxyStart");function N(P,B,K,q){var ne=null,me=[];q!==null&&(ne=q?W(P,K,q):P);var _e={_next:oe,ctx:{core:function(){return K},diagLog:function(){return(0,p.vH)(K,B)},getCfg:function(){return B},getExtCfg:L,getConfig:se,hasNext:function(){return!!ne},getNext:function(){return ne},setNext:function(Fe){ne=Fe},iterate:We,onComplete:Be}};function Be(Fe,ve){for(var F=[],we=2;we<arguments.length;we++)F[we-2]=arguments[we];Fe&&me[R.MW]({func:Fe,self:(0,w.o8)(ve)?_e.ctx:ve,args:F})}o(Be,"_addOnComplete");function oe(){var Fe=ne;if(ne=Fe?Fe[R.W2]():null,!Fe){var ve=me;ve&&ve[R.R5]>0&&((0,w.tO)(ve,function(F){try{F.func[R._S](F.self,F.args)}catch(we){(0,p.kP)(K[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,T.eU)(we))}}),me=[])}return Fe}o(oe,"_moveNext");function L(Fe,ve,F){ve===void 0&&(ve={}),F===void 0&&(F=0);var we;if(B){var Ie=B[J.Zh];Ie&&Fe&&(we=Ie[Fe])}if(!we)we=ve;else if((0,w.Kn)(ve)&&F!==0){var Te=(0,w.mm)(!0,ve,we);B&&F===2&&(0,w.rW)(ve,function(re){if((0,w.le)(Te[re])){var vt=B[re];(0,w.le)(vt)||(Te[re]=vt)}}),we=Te}return we}o(L,"_getExtCfg");function se(Fe,ve,F){F===void 0&&(F=!1);var we,Ie=L(Fe,null);return Ie&&!(0,w.le)(Ie[ve])?we=Ie[ve]:B&&!(0,w.le)(B[ve])&&(we=B[ve]),(0,w.le)(we)?F:we}o(se,"_getConfig");function We(Fe){for(var ve;ve=_e._next();){var F=ve[R.TO]();F&&Fe(F)}}return o(We,"_iterateChain"),_e}o(N,"_createInternalContext");function z(P,B,K,q){var ne=N(P,B,K,q),me=ne.ctx;function _e(oe){var L=ne._next();return L&&L[J.hL](oe,me),!L}o(_e,"_processNext");function Be(oe,L){return oe===void 0&&(oe=null),(0,w.kJ)(oe)&&(oe=H(oe,B,K,L)),z(oe||me[R.W2](),B,K,L)}return o(Be,"_createNew"),me[R.uL]=_e,me[R.zV]=Be,me}o(z,"createProcessTelemetryContext");function Y(P,B,K){var q=B[R.TC]||{},ne=N(P,q,B,K),me=ne.ctx;function _e(oe){var L=ne._next();return L&&L.unload(me,oe),!L}o(_e,"_processNext");function Be(oe,L){return oe===void 0&&(oe=null),(0,w.kJ)(oe)&&(oe=H(oe,q,B,L)),Y(oe||me[R.W2](),B,L)}return o(Be,"_createNew"),me[R.uL]=_e,me[R.zV]=Be,me}o(Y,"createProcessTelemetryUnloadContext");function Ee(P,B,K){var q=B[R.TC]||{},ne=N(P,q,B,K),me=ne.ctx;function _e(oe){return me.iterate(function(L){(0,w.mf)(L[R.Tu])&&L[R.Tu](me,oe)})}o(_e,"_processNext");function Be(oe,L){return oe===void 0&&(oe=null),(0,w.kJ)(oe)&&(oe=H(oe,q,B,L)),Ee(oe||me[R.W2](),B,L)}return o(Be,"_createNew"),me[R.uL]=_e,me[R.zV]=Be,me}o(Ee,"createProcessTelemetryUpdateContext");function H(P,B,K,q){var ne=null,me=!q;if((0,w.kJ)(P)&&P[R.R5]>0){var _e=null;(0,w.tO)(P,function(Be){if(!me&&q===Be&&(me=!0),me&&Be&&(0,w.mf)(Be[J.hL])){var oe=X(Be,B,K);ne||(ne=oe),_e&&_e._setNext(oe),_e=oe}})}return q&&!ne?H([q],B,K):ne}o(H,"createTelemetryProxyChain");function X(P,B,K){var q=null,ne=(0,w.mf)(P[J.hL]),me=(0,w.mf)(P[R.Jd]),_e;P?_e=P[R.pZ]+"-"+P[J.yi]+"-"+_++:_e="Unknown-0-"+_++;var Be={getPlugin:function(){return P},getNext:function(){return q},processTelemetry:se,unload:We,update:Fe,_id:_e,_setNext:function(ve){q=ve}};function oe(){var ve;return P&&(0,w.mf)(P[U])&&(ve=P[U]()),ve||(ve=z(Be,B,K)),ve}o(oe,"_getTelCtx");function L(ve,F,we,Ie,Te){var re=!1,vt=P?P[R.pZ]:y,Ze=ve[O];return Ze||(Ze=ve[O]={}),ve.setNext(q),P&&(0,M.Lm)(ve[J.oV](),function(){return vt+":"+we},function(){Ze[_e]=!0;try{var Ge=q?q._id:J.qS;Ge&&(Ze[Ge]=!1),re=F(ve)}catch(V){var k=q?Ze[q._id]:!0;k&&(re=!0),(!q||!k)&&(0,p.kP)(ve[R.mc](),1,73,"Plugin ["+vt+"] failed during "+we+" - "+(0,T.eU)(V)+", run flags: "+(0,T.eU)(Ze))}},Ie,Te),re}o(L,"_processChain");function se(ve,F){F=F||oe();function we(Ie){if(!P||!ne)return!1;var Te=(0,g.OY)(P);return Te[R.fi]||Te[J.mE]?!1:(me&&P[R.Jd](q),P[J.hL](ve,Ie),!0)}o(we,"_callProcessTelemetry"),L(F,we,"processTelemetry",function(){return{item:ve}},!ve.sync)||F[R.uL](ve)}o(se,"_processTelemetry");function We(ve,F){function we(){var Ie=!1;if(P){var Te=(0,g.OY)(P),re=P[J.oV]||Te[J.oV];P&&(!re||re===ve.core())&&!Te[R.fi]&&(Te[J.oV]=null,Te[R.fi]=!0,Te[R.yl]=!1,P[R.fi]&&P[R.fi](ve,F)===!0&&(Ie=!0))}return Ie}o(we,"_callTeardown"),L(ve,we,"unload",function(){},F[R.d])||ve[R.uL](F)}o(We,"_unloadPlugin");function Fe(ve,F){function we(){var Ie=!1;if(P){var Te=(0,g.OY)(P),re=P[J.oV]||Te[J.oV];P&&(!re||re===ve.core())&&!Te[R.fi]&&P[R.Tu]&&P[R.Tu](ve,F)===!0&&(Ie=!0)}return Ie}o(we,"_callUpdate"),L(ve,we,"update",function(){},!1)||ve[R.uL](F)}return o(Fe,"_updatePlugin"),(0,w.FL)(Be)}o(X,"createTelemetryPluginProxy");var Q=function(){function P(B,K,q,ne){var me=this,_e=z(B,K,q,ne);(0,w.Vb)(me,_e,(0,w.FY)(_e))}return o(P,"ProcessTelemetryContext"),P}()},4878:(Qe,s,b)=>{"use strict";b.d(s,{az:()=>W,_l:()=>N,CN:()=>z,F6:()=>Y,pZ:()=>Ee});var R=b(8096),p=b(7630),T=b(6708),w=b(6041),J=4294967296,M=4294967295,g=!1,y=123456789,O=987654321;function U(H){H<0&&(H>>>=0),y=123456789+H&M,O=987654321-H&M,g=!0}o(U,"_mwcSeed");function _(){try{var H=(0,T.m6)()&2147483647;U((Math.random()*J^H)+H)}catch(X){}}o(_,"_autoSeedMwc");function W(H){return H>0?Math.floor(N()/M*(H+1))>>>0:0}o(W,"randomValue");function N(H){var X=0,Q=(0,p.MX)()||(0,p.gz)();return Q&&Q.getRandomValues&&(X=Q.getRandomValues(new Uint32Array(1))[0]&M),X===0&&(0,p.w1)()&&(g||_(),X=Y()&M),X===0&&(X=Math.floor(J*Math.random()|0)),H||(X>>>=0),X}o(N,"random32");function z(H){H?U(H):_()}o(z,"mwcRandomSeed");function Y(H){O=36969*(O&65535)+(O>>16)&M,y=18e3*(y&65535)+(y>>16)&M;var X=(O<<16)+(y&65535)>>>0&M|0;return H||(X>>>=0),X}o(Y,"mwcRandom32");function Ee(H){H===void 0&&(H=22);for(var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=N()>>>0,P=0,B=w.qS;B[R.R5]<H;)P++,B+=X.charAt(Q&63),Q>>>=6,P===5&&(Q=(N()<<2&4294967295|Q&3)>>>0,P=0);return B}o(Ee,"newId")},3833:(Qe,s,b)=>{"use strict";b.d(s,{OY:()=>g,bP:()=>y,AA:()=>O,Yn:()=>_});var R=b(8096),p=b(5883),T=b(6708),w=b(6041),J=b(4206),M=(0,p.K)("plugin");function g(W){return M.get(W,"state",{},!0)}o(g,"_getPluginState");function y(W,N){for(var z=[],Y=null,Ee=W[R.W2](),H;Ee;){var X=Ee[R.TO]();if(X){Y&&(0,T.mf)(Y[R.Jd])&&(0,T.mf)(X[w.hL])&&Y[R.Jd](X);var Q=!1;(0,T.mf)(X[R.yl])?Q=X[R.yl]():(H=g(X),Q=H[R.yl]),Q||z[R.MW](X),Y=X,Ee=Ee[R.W2]()}}(0,T.tO)(z,function(P){var B=W[w.oV]();P[R.VL](W.getCfg(),B,N,W[R.W2]()),H=g(P),!P[w.oV]&&!H[w.oV]&&(H[w.oV]=B),H[R.yl]=!0,delete H[R.fi]})}o(y,"initializePlugins");function O(W){return W.sort(function(N,z){var Y=0;if(z){var Ee=(0,T.mf)(z[w.hL]);(0,T.mf)(N[w.hL])?Y=Ee?N[w.yi]-z[w.yi]:1:Ee&&(Y=-1)}else Y=N?1:-1;return Y})}o(O,"sortPlugins");function U(W,N,z,Y){var Ee=0;function H(){for(;Ee<W[_DYN_LENGTH];){var X=W[Ee++];if(X){var Q=X._doUnload||X[_DYN__DO_TEARDOWN];if(isFunction(Q)&&Q[_DYN_CALL](X,N,z,H)===!0)return!0}}}return o(H,"_doUnload"),H()}o(U,"unloadComponents");function _(W){var N={};return{getName:function(){return N[R.I]},setName:function(z){W&&W.setName(z),N[R.I]=z},getTraceId:function(){return N[R.nY]},setTraceId:function(z){W&&W.setTraceId(z),(0,J.jN)(z)&&(N[R.nY]=z)},getSpanId:function(){return N[R._d]},setSpanId:function(z){W&&W.setSpanId(z),(0,J.Lc)(z)&&(N[R._d]=z)},getTraceFlags:function(){return N[R.T0]},setTraceFlags:function(z){W&&W.setTraceFlags(z),N[R.T0]=z}}}o(_,"createDistributedTraceContext")},310:(Qe,s,b)=>{"use strict";b.d(s,{Y:()=>J});var R=b(8096),p=b(5018),T=b(7630),w=b(6708);function J(){var M=[];function g(O){O&&M[R.MW](O)}o(g,"_addHandler");function y(O,U){(0,w.tO)(M,function(_){try{_(O,U)}catch(W){(0,p.kP)(O[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,T.eU)(W))}}),M=[]}return o(y,"_runHandlers"),{add:g,run:y}}o(J,"createUnloadHandlerContainer")},4206:(Qe,s,b)=>{"use strict";b.d(s,{SU:()=>z,j_:()=>Y,jN:()=>Ee,Lc:()=>H,J6:()=>X,Pn:()=>Q,aR:()=>P,lq:()=>B});var R=b(8096),p=b(5843),T=b(7630),w=b(6708),J=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,M="00",g="ff",y="00000000000000000000000000000000",O="0000000000000000",U=1;function _(K,q,ne){return K&&K[R.R5]===q&&K!==ne?!!K.match(/^[\da-f]*$/):!1}o(_,"_isValid");function W(K,q,ne){return _(K,q)?K:ne}o(W,"_formatValue");function N(K){(isNaN(K)||K<0||K>255)&&(K=1);for(var q=K.toString(16);q[R.R5]<2;)q="0"+q;return q}o(N,"_formatFlags");function z(K,q,ne,me){var _e;return _e={},_e[R.PA]=_(me,2,g)?me:M,_e[R.nY]=Ee(K)?K:(0,p.DO)(),_e.spanId=H(q)?q:(0,p.DO)()[R.Jn](0,16),_e.traceFlags=ne>=0&&ne<=255?ne:1,_e}o(z,"createTraceParent");function Y(K){var q;if(!K||((0,w.kJ)(K)&&(K=K[0]||""),!K||!(0,w.HD)(K)||K[R.R5]>8192))return null;var ne=J.exec((0,w.nd)(K));return!ne||ne[1]===g||ne[2]===y||ne[3]===O?null:(q={},q[R.PA]=ne[1],q[R.nY]=ne[2],q[R._d]=ne[3],q[R.T0]=parseInt(ne[4],16),q)}o(Y,"parseTraceParent");function Ee(K){return _(K,32,y)}o(Ee,"isValidTraceId");function H(K){return _(K,16,O)}o(H,"isValidSpanId");function X(K){return!(!K||!_(K[R.PA],2,g)||!_(K[R.nY],32,y)||!_(K[R._d],16,O)||!_(N(K[R.T0]),2))}o(X,"isValidTraceParent");function Q(K){return X(K)?(K[R.T0]&U)===U:!1}o(Q,"isSampledFlag");function P(K){if(K){var q=N(K[R.T0]);_(q,2)||(q="01");var ne=K[R.PA]||M;return ne!=="00"&&ne!=="ff"&&(ne=M),"".concat(ne,"-").concat(W(K.traceId,32,y),"-").concat(W(K.spanId,16,O),"-").concat(q)}return""}o(P,"formatTraceParent");function B(){var K="traceparent",q=Y((0,T.ed)(K));return q||(q=Y((0,T.pI)(K))),q}o(B,"findW3cTraceParent")},8096:(Qe,s,b)=>{"use strict";b.d(s,{VL:()=>R,I:()=>p,tb:()=>T,pZ:()=>w,MW:()=>J,yl:()=>M,TC:()=>g,p$:()=>y,eZ:()=>O,R5:()=>U,Z_:()=>_,uL:()=>W,SD:()=>N,g:()=>z,n7:()=>Y,LS:()=>Ee,Fc:()=>H,TO:()=>X,kL:()=>Q,iC:()=>P,cb:()=>B,fi:()=>K,Gc:()=>q,gU:()=>ne,d:()=>me,F3:()=>_e,Tu:()=>Be,W2:()=>oe,mc:()=>L,Jd:()=>se,zV:()=>We,Lk:()=>Fe,ou:()=>ve,zc:()=>F,qV:()=>we,w6:()=>Ie,$h:()=>Te,Jn:()=>re,xv:()=>vt,ZV:()=>Ze,i7:()=>Ge,Fr:()=>k,jk:()=>V,T1:()=>ee,_S:()=>he,P6:()=>Je,Kn:()=>nt,dE:()=>pe,PL:()=>Ae,T:()=>Se,wu:()=>ie,Km:()=>Re,nY:()=>ge,_d:()=>tt,T0:()=>Ne,PA:()=>A});var R="initialize",p="name",T="getNotifyMgr",w="identifier",J="push",M="isInitialized",g="config",y="instrumentationKey",O="logger",U="length",_="time",W="processNext",N="getProcessTelContext",z="addNotificationListener",Y="removeNotificationListener",Ee="stopPollingInternalLogs",H="onComplete",X="getPlugin",Q="flush",P="_extensions",B="splice",K="teardown",q="messageId",ne="message",me="isAsync",_e="_doTeardown",Be="update",oe="getNext",L="diagLog",se="setNextPlugin",We="createNew",Fe="cookieCfg",ve="indexOf",F="substring",we="userAgent",Ie="split",Te="setEnabled",re="substr",vt="nodeType",Ze="apply",Ge="replace",k="enableDebugExceptions",V="logInternalMessage",ee="toLowerCase",he="call",Je="type",nt="handler",pe="listeners",Ae="isChildEvt",Se="getCtx",ie="setCtx",Re="complete",ge="traceId",tt="spanId",Ne="traceFlags",A="version"},4392:(Qe,s,b)=>{"use strict";b.d(s,{cb:()=>R,fK:()=>p,jA:()=>T,hB:()=>w,bO:()=>J,Pw:()=>g,V4:()=>y,rl:()=>O,yu:()=>U,RJ:()=>_,CY:()=>W});var R="function",p="object",T="undefined",w="prototype",J="hasOwnProperty",M="default",g=Object,y=g[w],O=g.assign,U=g.create,_=g.defineProperty,W=y[J]},2091:(Qe,s,b)=>{"use strict";b.d(s,{Rd:()=>T,ZU:()=>w,pu:()=>J});var R=b(4392),p=null;function T(M){M===void 0&&(M=!0);var g=M===!1?null:p;return g||(typeof globalThis!==R.jA&&(g=globalThis),!g&&typeof self!==R.jA&&(g=self),!g&&typeof window!==R.jA&&(g=window),!g&&typeof b.g!==R.jA&&(g=b.g),p=g),g}o(T,"getGlobal");function w(M){throw new TypeError(M)}o(w,"throwTypeError");function J(M){var g=R.yu;if(g)return g(M);if(M==null)return{};var y=typeof M;y!==R.fK&&y!==R.cb&&w("Object prototype may only be an Object:"+M);function O(){}return o(O,"tmpFunc"),O[R.hB]=M,new O}o(J,"objCreateFn")},1088:(Qe,s,b)=>{"use strict";b.d(s,{uc:()=>W,ne:()=>z,$h:()=>ne});var R=b(4392),p=b(2091),T=((0,p.Rd)()||{}).Symbol,w=((0,p.Rd)()||{}).Reflect,J=!!T,M=!!w,g="decorate",y="metadata",O="getOwnPropertySymbols",U="iterator",_=o(function(oe){for(var L,se=1,We=arguments.length;se<We;se++){L=arguments[se];for(var Fe in L)R.V4[R.bO].call(L,Fe)&&(oe[Fe]=L[Fe])}return oe},"__objAssignFnImpl"),W=R.rl||_,N=o(function(oe,L){return N=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,We){se.__proto__=We}||function(se,We){for(var Fe in We)We[R.bO](Fe)&&(se[Fe]=We[Fe])},N(oe,L)},"extendStaticsFn");function z(oe,L){typeof L!==R.cb&&L!==null&&(0,p.ZU)("Class extends value "+String(L)+" is not a constructor or null"),N(oe,L);function se(){this.constructor=oe}o(se,"__"),oe[R.hB]=L===null?(0,p.pu)(L):(se[R.hB]=L[R.hB],new se)}o(z,"__extendsFn");function Y(oe,L){var se={};for(var We in oe)ObjHasOwnProperty.call(oe,We)&&L.indexOf(We)<0&&(se[We]=oe[We]);if(oe!=null&&typeof ObjClass[O]===strShimFunction)for(var Fe=0,ve=ObjClass[O](oe);Fe<ve.length;Fe++)L.indexOf(ve[Fe])<0&&ObjProto.propertyIsEnumerable.call(oe,ve[Fe])&&(se[ve[Fe]]=oe[ve[Fe]]);return se}o(Y,"__restFn");function Ee(oe,L,se,We){var Fe=arguments.length,ve=Fe<3?L:We===null?We=ObjClass.getOwnPropertyDescriptor(L,se):We,F;if(M&&typeof w[g]===strShimFunction)ve=w[g](oe,L,se,We);else for(var we=oe.length-1;we>=0;we--)(F=oe[we])&&(ve=(Fe<3?F(ve):Fe>3?F(L,se,ve):F(L,se))||ve);return Fe>3&&ve&&ObjDefineProperty(L,se,ve),ve}o(Ee,"__decorateFn");function H(oe,L){return function(se,We){L(se,We,oe)}}o(H,"__paramFn");function X(oe,L){if(M&&w[y]===strShimFunction)return w[y](oe,L)}o(X,"__metadataFn");function Q(oe,L){for(var se in oe)se!==strDefault&&!ObjHasOwnProperty.call(L,se)&&P(L,oe,se)}o(Q,"__exportStarFn");function P(oe,L,se,We){We===void 0&&(We=se),ObjCreate?ObjDefineProperty(oe,We,{enumerable:!0,get:function(){return L[se]}}):oe[We]=L[se]}o(P,"__createBindingFn");function B(oe){var L=typeof T===strShimFunction&&T[U],se=L&&oe[L],We=0;if(se)return se.call(oe);if(oe&&typeof oe.length=="number")return{next:function(){return oe&&We>=oe.length&&(oe=void 0),{value:oe&&oe[We++],done:!oe}}};throwTypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}o(B,"__valuesFn");function K(oe,L){var se=typeof T===strShimFunction&&oe[T[U]];if(!se)return oe;var We=se.call(oe),Fe,ve=[],F;try{for(;(L===void 0||L-- >0)&&!(Fe=We.next()).done;)ve.push(Fe.value)}catch(we){F={error:we}}finally{try{Fe&&!Fe.done&&(se=We.return)&&se.call(We)}finally{if(F)throw F.error}}return ve}o(K,"__readFn");function q(){for(var oe=arguments,L=0,se=0,We=oe.length;se<We;se++)L+=oe[se].length;for(var Fe=Array(L),ve=0,se=0;se<We;se++)for(var F=oe[se],we=0,Ie=F.length;we<Ie;we++,ve++)Fe[ve]=F[we];return Fe}o(q,"__spreadArraysFn");function ne(oe,L){for(var se=0,We=L.length,Fe=oe.length;se<We;se++,Fe++)oe[Fe]=L[se];return oe}o(ne,"__spreadArrayFn");function me(oe,L){return ObjDefineProperty?ObjDefineProperty(oe,"raw",{value:L}):oe.raw=L,oe}o(me,"__makeTemplateObjectFn");function _e(oe){if(oe&&oe.__esModule)return oe;var L={};if(oe!=null)for(var se in oe)se!==strDefault&&Object.prototype.hasOwnProperty.call(oe,se)&&P(L,oe,se);return ObjCreate?ObjDefineProperty(L,strDefault,{enumerable:!0,value:oe}):L[strDefault]=oe,L}o(_e,"__importStarFn");function Be(oe){return oe&&oe.__esModule?oe:{strDefault:oe}}o(Be,"__importDefaultFn")},5783:(Qe,s,b)=>{"use strict";b.r(s),b.d(s,{AppInsightsCore:()=>Xa.F,ApplicationInsights:()=>Zr,CoreUtils:()=>en.Tr,Sender:()=>Da,SeverityLevel:()=>Za,_InternalMessageId:()=>Ra.v,arrForEach:()=>A.tO,isNullOrUndefined:()=>A.le,proxyFunctions:()=>A.Vb,throwError:()=>A._y});var R=b(1679),p=b(1088),T="AppInsightsPropertiesPlugin",w="AppInsightsChannelPlugin",J="ApplicationInsightsAnalytics",M="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",g="sampleRate",y="ProcessLegacy",O="http.method",U="https://dc.services.visualstudio.com",_="/v2/track",W="not_specified",N="iKey",z="split",Y="length",Ee="toLowerCase",H="ingestionendpoint",X="toString",Q="removeItem",P="name",B="message",K="count",q="preTriggerDate",ne="disabled",me="date",_e="getUTCDate",Be="maxTimesPerMonth",oe="stringify",L="pathname",se="correlationHeaderExcludePatterns",We="indexOf",Fe="extensionConfig",ve="exceptions",F="parsedStack",we="properties",Ie="measurements",Te="sizeInBytes",re="typeName",vt="severityLevel",Ze="problemGroup",Ge="isManual",k="CreateFromInterface",V="hasFullStack",ee="level",he="method",Je="assembly",nt="fileName",pe="line",Ae="duration",Se="receivedResponse",ie="substring",Re="sanitizeKeyAndAddUniqueness",ge="sanitizeException",tt="sanitizeProperties",Ne="sanitizeMeasurements",A=b(6708),G=b(5018),ue=b(7630),je;function Ye(C,v,E){var I=v[Y],le=_t(C,v);if(le[Y]!==I){for(var be=0,xe=le;E[xe]!==void 0;)be++,xe=le[ie](0,150-3)+Lt(be);le=xe}return le}o(Ye,"dataSanitizeKeyAndAddUniqueness");function _t(C,v){var E;return v&&(v=(0,A.nd)(v[X]()),v[Y]>150&&(E=v[ie](0,150),(0,G.kP)(C,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:v},!0))),E||v}o(_t,"dataSanitizeKey");function qe(C,v,E){E===void 0&&(E=1024);var I;return v&&(E=E||1024,v=(0,A.nd)(v),v.toString()[Y]>E&&(I=v[X]()[ie](0,E),(0,G.kP)(C,2,61,"string value is too long. It has been truncated to "+E+" characters.",{value:v},!0))),I||v}o(qe,"dataSanitizeString");function At(C,v){return et(C,v,2048,66)}o(At,"dataSanitizeUrl");function wt(C,v){var E;return v&&v[Y]>32768&&(E=v[ie](0,32768),(0,G.kP)(C,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:v},!0)),E||v}o(wt,"dataSanitizeMessage");function dn(C,v){var E;if(v){var I=""+v;I[Y]>32768&&(E=I[ie](0,32768),(0,G.kP)(C,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:v},!0))}return E||v}o(dn,"dataSanitizeException");function pn(C,v){if(v){var E={};(0,A.rW)(v,function(I,le){if((0,A.Kn)(le)&&(0,ue.nS)())try{le=(0,ue.xA)()[oe](le)}catch(be){(0,G.kP)(C,2,49,"custom property is not valid",{exception:be},!0)}le=qe(C,le,8192),I=Ye(C,I,E),E[I]=le}),v=E}return v}o(pn,"dataSanitizeProperties");function In(C,v){if(v){var E={};(0,A.rW)(v,function(I,le){I=Ye(C,I,E),E[I]=le}),v=E}return v}o(In,"dataSanitizeMeasurements");function Un(C,v){return v&&et(C,v,128,69)[X]()}o(Un,"dataSanitizeId");function et(C,v,E,I){var le;return v&&(v=(0,A.nd)(v),v[Y]>E&&(le=v[ie](0,E),(0,G.kP)(C,2,I,"input is too long, it has been truncated to "+E+" characters.",{data:v},!0))),le||v}o(et,"dataSanitizeInput");function Lt(C){var v="00"+C;return v.substr(v[Y]-3)}o(Lt,"dsPadNumber");var Qt=(je={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},je[Re]=Ye,je.sanitizeKey=_t,je.sanitizeString=qe,je.sanitizeUrl=At,je.sanitizeMessage=wt,je[ge]=dn,je[tt]=pn,je[Ne]=In,je.sanitizeId=Un,je.sanitizeInput=et,je.padNumber=Lt,je.trim=A.nd,je),Tt=function(){function C(v,E,I,le){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var be=this;be.ver=2,be[P]=qe(v,E)||W,be[we]=pn(v,I),be[Ie]=In(v,le)}return o(C,"Event"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Event",C.dataType="EventData",C}(),Xt=function(){function C(v,E,I,le,be){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var xe=this;xe.ver=2,E=E||W,xe[B]=wt(v,E),xe[we]=pn(v,le),xe[Ie]=In(v,be),I&&(xe[vt]=I)}return o(C,"Trace"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Message",C.dataType="MessageData",C}(),ht="";function sn(C,v){return v===void 0&&(v=!1),C==null?v:C.toString()[Ee]()==="true"}o(sn,"stringToBoolOrDefault");function Yt(C){(isNaN(C)||C<0)&&(C=0),C=Math.round(C);var v=ht+C%1e3,E=ht+Math.floor(C/1e3)%60,I=ht+Math.floor(C/(1e3*60))%60,le=ht+Math.floor(C/(1e3*60*60))%24,be=Math.floor(C/(1e3*60*60*24));return v=v[Y]===1?"00"+v:v[Y]===2?"0"+v:v,E=E[Y]<2?"0"+E:E,I=I[Y]<2?"0"+I:I,le=le[Y]<2?"0"+le:le,(be>0?be+".":ht)+le+":"+I+":"+E+"."+v}o(Yt,"msToTimeSpan");function an(C,v){var E=null;return(0,A.tO)(C,function(I){if(I.identifier===v)return E=I,-1}),E}o(an,"getExtensionByName");function hn(C,v,E,I,le){return!le&&(0,A.HD)(C)&&(C==="Script error."||C==="Script error")}o(hn,"isCrossOriginError");var Rn=function(){function C(v,E,I,le,be,xe,Ue){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ut=this;ut.ver=2,ut.id=Un(v,Ue),ut.url=At(v,I),ut[P]=qe(v,E)||W,isNaN(le)||(ut[Ae]=Yt(le)),ut[we]=pn(v,be),ut[Ie]=In(v,xe)}return o(C,"PageView"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",C.dataType="PageviewData",C}(),Tn=function(){function C(v,E,I,le,be,xe,Ue){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ut=this;ut.ver=2,ut.url=At(v,I),ut[P]=qe(v,E)||W,ut[we]=pn(v,be),ut[Ie]=In(v,xe),Ue&&(ut.domProcessing=Ue.domProcessing,ut[Ae]=Ue[Ae],ut.networkConnect=Ue.networkConnect,ut.perfTotal=Ue.perfTotal,ut[Se]=Ue[Se],ut.sentRequest=Ue.sentRequest)}return o(C,"PageViewPerformance"),C.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",C.dataType="PageviewPerformanceData",C}(),xr="<no_method>",pr="error",bn="stack",Kr="stackDetails",Yr="errorSrc",fr="message",ri="description";function qr(C,v){var E=C;return E&&!(0,A.HD)(E)&&(JSON&&JSON[oe]?(E=JSON[oe](C),v&&(!E||E==="{}")&&((0,A.mf)(C[X])?E=C[X]():E=""+C)):E=""+C+" - (Missing JSON.stringify)"),E||""}o(qr,"_stringify");function Gr(C,v){var E=C;return C&&(E&&!(0,A.HD)(E)&&(E=C[fr]||C[ri]||E),E&&!(0,A.HD)(E)&&(E=qr(E,!0)),C.filename&&(E=E+" @"+(C.filename||"")+":"+(C.lineno||"?")+":"+(C.colno||"?"))),v&&v!=="String"&&v!=="Object"&&v!=="Error"&&(E||"")[We](v)===-1&&(E=v+": "+E),E||""}o(Gr,"_formatMessage");function Z(C){try{if((0,A.Kn)(C))return"hasFullStack"in C&&"typeName"in C}catch(v){}return!1}o(Z,"_isExceptionDetailsInternal");function ze(C){try{if((0,A.Kn)(C))return"ver"in C&&"exceptions"in C&&"properties"in C}catch(v){}return!1}o(ze,"_isExceptionInternal");function ot(C){return C&&C.src&&(0,A.HD)(C.src)&&C.obj&&(0,A.kJ)(C.obj)}o(ot,"_isStackDetails");function pt(C){var v=C||"";(0,A.HD)(v)||((0,A.HD)(v[bn])?v=v[bn]:v=""+v);var E=v[z](`
`);return{src:v,obj:E}}o(pt,"_convertStackObj");function Ht(C){for(var v=[],E=C[z](`
`),I=0;I<E[Y];I++){var le=E[I];E[I+1]&&(le+="@"+E[I+1],I++),v.push(le)}return{src:C,obj:v}}o(Ht,"_getOperaStack");function Bt(C){var v=null;if(C)try{if(C[bn])v=pt(C[bn]);else if(C[pr]&&C[pr][bn])v=pt(C[pr][bn]);else if(C.exception&&C.exception[bn])v=pt(C.exception[bn]);else if(ot(C))v=C;else if(ot(C[Kr]))v=C[Kr];else if(window&&window.opera&&C[fr])v=Ht(C[B]);else if(C.reason&&C.reason[bn])v=pt(C.reason[bn]);else if((0,A.HD)(C))v=pt(C);else{var E=C[fr]||C[ri]||"";(0,A.HD)(C[Yr])&&(E&&(E+=`
`),E+=" from "+C[Yr]),E&&(v=pt(E))}}catch(I){v=pt(I)}return v||{src:"",obj:null}}o(Bt,"_getStackFromErrorObj");function Mn(C){var v="";return C&&(C.obj?(0,A.tO)(C.obj,function(E){v+=E+`
`}):v=C.src||""),v}o(Mn,"_formatStackTrace");function Ut(C){var v,E=C.obj;if(E&&E[Y]>0){v=[];var I=0,le=0;(0,A.tO)(E,function(vn){var rn=vn[X]();if(ln.regex.test(rn)){var ke=new ln(rn,I++);le+=ke[Te],v.push(ke)}});var be=32*1024;if(le>be)for(var xe=0,Ue=v[Y]-1,ut=0,lt=xe,Rt=Ue;xe<Ue;){var $t=v[xe][Te],cn=v[Ue][Te];if(ut+=$t+cn,ut>be){var Jt=Rt-lt+1;v.splice(lt,Jt);break}lt=xe,Rt=Ue,xe++,Ue--}}return v}o(Ut,"_parseStack");function yt(C){var v="";if(C&&(v=C.typeName||C[P]||"",!v))try{var E=/function (.{1,200})\(/,I=E.exec(C.constructor[X]());v=I&&I[Y]>1?I[1]:""}catch(le){}return v}o(yt,"_getErrorType");function Dt(C){if(C)try{if(!(0,A.HD)(C)){var v=yt(C),E=qr(C,!1);return(!E||E==="{}")&&(C[pr]&&(C=C[pr],v=yt(C)),E=qr(C,!0)),E[We](v)!==0&&v!=="String"?v+":"+E:E}}catch(I){}return""+(C||"")}o(Dt,"_formatErrorCode");var xt=function(){function C(v,E,I,le,be,xe){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Ue=this;Ue.ver=2,ze(E)?(Ue[ve]=E[ve]||[],Ue[we]=E[we],Ue[Ie]=E[Ie],E[vt]&&(Ue[vt]=E[vt]),E.id&&(Ue.id=E.id),E[Ze]&&(Ue[Ze]=E[Ze]),(0,A.le)(E[Ge])||(Ue[Ge]=E[Ge])):(I||(I={}),Ue[ve]=[new dt(v,E,I)],Ue[we]=pn(v,I),Ue[Ie]=In(v,le),be&&(Ue[vt]=be),xe&&(Ue.id=xe))}return o(C,"Exception"),C.CreateAutoException=function(v,E,I,le,be,xe,Ue,ut){var lt,Rt=yt(be||xe||v);return lt={},lt[B]=Gr(v,Rt),lt.url=E,lt.lineNumber=I,lt.columnNumber=le,lt.error=Dt(be||xe||v),lt.evt=Dt(xe||v),lt[re]=Rt,lt.stackDetails=Bt(Ue||be||xe),lt.errorSrc=ut,lt},C.CreateFromInterface=function(v,E,I,le){var be=E[ve]&&(0,A.Mr)(E[ve],function(Ue){return dt[k](v,Ue)}),xe=new C(v,(0,p.uc)((0,p.uc)({},E),{exceptions:be}),I,le);return xe},C.prototype.toInterface=function(){var v,E=this,I=E.exceptions,le=E.properties,be=E.measurements,xe=E.severityLevel,Ue=E.problemGroup,ut=E.id,lt=E.isManual,Rt=I instanceof Array&&(0,A.Mr)(I,function($t){return $t.toInterface()})||void 0;return v={ver:"4.0"},v[ve]=Rt,v.severityLevel=xe,v.properties=le,v.measurements=be,v.problemGroup=Ue,v.id=ut,v.isManual=lt,v},C.CreateSimpleException=function(v,E,I,le,be,xe){var Ue;return{exceptions:[(Ue={},Ue[V]=!0,Ue.message=v,Ue.stack=be,Ue.typeName=E,Ue)]}},C.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",C.dataType="ExceptionData",C.formatError=Dt,C}(),dt=function(){function C(v,E,I){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var le=this;if(Z(E))le[re]=E[re],le[B]=E[B],le[bn]=E[bn],le[F]=E[F]||[],le[V]=E[V];else{var be=E,xe=be&&be.evt;(0,A.VZ)(be)||(be=be[pr]||xe||be),le[re]=qe(v,yt(be))||W,le[B]=wt(v,Gr(E||be,le[re]))||W;var Ue=E[Kr]||Bt(E);le[F]=Ut(Ue),le[bn]=dn(v,Mn(Ue)),le.hasFullStack=(0,A.kJ)(le.parsedStack)&&le.parsedStack[Y]>0,I&&(I[re]=I[re]||le[re])}}return o(C,"_ExceptionDetails"),C.prototype.toInterface=function(){var v,E=this,I=E[F]instanceof Array&&(0,A.Mr)(E[F],function(be){return be.toInterface()}),le=(v={id:E.id,outerId:E.outerId,typeName:E[re],message:E[B],hasFullStack:E[V],stack:E[bn]},v[F]=I||void 0,v);return le},C.CreateFromInterface=function(v,E){var I=E[F]instanceof Array&&(0,A.Mr)(E[F],function(be){return ln[k](be)})||E[F],le=new C(v,(0,p.uc)((0,p.uc)({},E),{parsedStack:I}));return le},C}(),ln=function(){function C(v,E){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var I=this;if(I[Te]=0,typeof v=="string"){var le=v;I[ee]=E,I[he]=xr,I[Je]=(0,A.nd)(le),I[nt]="",I[pe]=0;var be=le.match(C.regex);be&&be[Y]>=5&&(I[he]=(0,A.nd)(be[2])||I[he],I[nt]=(0,A.nd)(be[4]),I[pe]=parseInt(be[5])||0)}else I[ee]=v[ee],I[he]=v[he],I[Je]=v[Je],I[nt]=v[nt],I[pe]=v[pe],I[Te]=0;I.sizeInBytes+=I.method[Y],I.sizeInBytes+=I.fileName[Y],I.sizeInBytes+=I.assembly[Y],I[Te]+=C.baseSize,I.sizeInBytes+=I.level.toString()[Y],I.sizeInBytes+=I.line.toString()[Y]}return o(C,"_StackFrame"),C.CreateFromInterface=function(v){return new C(v,null)},C.prototype.toInterface=function(){var v=this;return{level:v[ee],method:v[he],assembly:v[Je],fileName:v[nt],line:v[pe]}},C.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,C.baseSize=58,C}(),zt=function(){function C(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(C,"DataPoint"),C}(),St=function(){function C(v,E,I,le,be,xe,Ue,ut,lt){this.aiDataContract={ver:1,metrics:1,properties:0};var Rt=this;Rt.ver=2;var $t=new zt;$t[K]=le>0?le:void 0,$t.max=isNaN(xe)||xe===null?void 0:xe,$t.min=isNaN(be)||be===null?void 0:be,$t[P]=qe(v,E)||W,$t.value=I,$t.stdDev=isNaN(Ue)||Ue===null?void 0:Ue,Rt.metrics=[$t],Rt[we]=pn(v,ut),Rt[Ie]=In(v,lt)}return o(C,"Metric"),C.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",C.dataType="MetricData",C}(),en=b(5843),un=b(3242),Sn=b(4878),yn=b(4869);function Wn(C){var v=null;if((0,A.mf)(Event))v=new Event(C);else{var E=(0,ue.Me)();E&&E.createEvent&&(v=E.createEvent("Event"),v.initEvent(C,!0,!0))}return v}o(Wn,"createDomEvent");var Ln=b(4873),Hn=(0,Ln.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),wn=b(2091),Pt=(0,Ln.By)({LocalStorage:0,SessionStorage:1}),on=(0,Ln.By)({AI:0,AI_AND_W3C:1,W3C:2}),kt=void 0,Dn=void 0;function Nt(){return xn()?gn(Pt.LocalStorage):null}o(Nt,"_getLocalStorageObject");function gn(C){try{if((0,A.le)((0,wn.Rd)()))return null;var v=new Date()[X](),E=(0,ue.a8)(C===Pt.LocalStorage?"localStorage":"sessionStorage");E.setItem(v,v);var I=E.getItem(v)!==v;if(E[Q](v),!I)return E}catch(le){}return null}o(gn,"_getVerifiedStorageObject");function _n(){return Bn()?gn(Pt.SessionStorage):null}o(_n,"_getSessionStorageObject");function Nn(){kt=!1,Dn=!1}o(Nn,"utlDisableStorage");function tn(){kt=xn(!0),Dn=Bn(!0)}o(tn,"utlEnableStorage");function xn(C){return(C||kt===void 0)&&(kt=!!gn(Pt.LocalStorage)),kt}o(xn,"utlCanUseLocalStorage");function Yn(C,v){var E=Nt();if(E!==null)try{return E.getItem(v)}catch(I){kt=!1,(0,G.kP)(C,2,1,"Browser failed read of local storage. "+(0,A.jj)(I),{exception:(0,ue.eU)(I)})}return null}o(Yn,"utlGetLocalStorage");function Fn(C,v,E){var I=Nt();if(I!==null)try{return I.setItem(v,E),!0}catch(le){kt=!1,(0,G.kP)(C,2,3,"Browser failed write to local storage. "+(0,A.jj)(le),{exception:(0,ue.eU)(le)})}return!1}o(Fn,"utlSetLocalStorage");function qn(C,v){var E=Nt();if(E!==null)try{return E[Q](v),!0}catch(I){kt=!1,(0,G.kP)(C,2,5,"Browser failed removal of local storage item. "+(0,A.jj)(I),{exception:(0,ue.eU)(I)})}return!1}o(qn,"utlRemoveStorage");function Bn(C){return(C||Dn===void 0)&&(Dn=!!gn(Pt.SessionStorage)),Dn}o(Bn,"utlCanUseSessionStorage");function Gn(){var C=[];return Bn()&&(0,A.rW)((0,ue.a8)("sessionStorage"),function(v){C.push(v)}),C}o(Gn,"utlGetSessionStorageKeys");function Vt(C,v){var E=_n();if(E!==null)try{return E.getItem(v)}catch(I){Dn=!1,(0,G.kP)(C,2,2,"Browser failed read of session storage. "+(0,A.jj)(I),{exception:(0,ue.eU)(I)})}return null}o(Vt,"utlGetSessionStorage");function Ft(C,v,E){var I=_n();if(I!==null)try{return I.setItem(v,E),!0}catch(le){Dn=!1,(0,G.kP)(C,2,4,"Browser failed write to session storage. "+(0,A.jj)(le),{exception:(0,ue.eU)(le)})}return!1}o(Ft,"utlSetSessionStorage");function ar(C,v){var E=_n();if(E!==null)try{return E[Q](v),!0}catch(I){Dn=!1,(0,G.kP)(C,2,6,"Browser failed removal of session storage item. "+(0,A.jj)(I),{exception:(0,ue.eU)(I)})}return!1}o(ar,"utlRemoveSessionStorage");var Or=(0,ue.Me)()||{},tr=0,hr=[null,null,null,null,null];function Qn(C){var v=tr,E=hr,I=E[v];return Or.createElement?E[v]||(I=E[v]=Or.createElement("a")):I={host:zr(C,!0)},I.href=C,v++,v>=E[Y]&&(v=0),tr=v,I}o(Qn,"urlParseUrl");function Pr(C){var v,E=Qn(C);return E&&(v=E.href),v}o(Pr,"urlGetAbsoluteUrl");function nr(C){var v,E=Qn(C);return E&&(v=E[L]),v}o(nr,"urlGetPathName");function Xn(C,v){return C?C.toUpperCase()+" "+v:v}o(Xn,"urlGetCompleteUrl");function zr(C,v){var E=gr(C,v)||"";if(E){var I=E.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[Y]>3&&(0,A.HD)(I[2])&&I[2][Y]>0)return I[2]+(I[3]||"")}return E}o(zr,"urlParseHost");function gr(C,v){var E=null;if(C){var I=C.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(I!=null&&I[Y]>2&&(0,A.HD)(I[2])&&I[2][Y]>0&&(E=I[2]||"",v&&I[Y]>2)){var le=(I[1]||"")[Ee](),be=I[3]||"";(le==="http"&&be===":80"||le==="https"&&be===":443")&&(be=""),E+=be}}return E}o(gr,"urlParseFullHost");var yr=[U+_,"https://breeze.aimon.applicationinsights.io"+_,"https://dc-int.services.visualstudio.com"+_];function or(C){return(0,A.UA)(yr,C[Ee]())!==-1}o(or,"isInternalApplicationInsightsEndpoint");var wr={NotSpecified:W,createDomEvent:Wn,disableStorage:Nn,isInternalApplicationInsightsEndpoint:or,canUseLocalStorage:xn,getStorage:Yn,setStorage:Fn,removeStorage:qn,canUseSessionStorage:Bn,getSessionStorageKeys:Gn,getSessionStorage:Vt,setSessionStorage:Ft,removeSessionStorage:ar,disableCookies:en.oF,canUseCookies:en.vn,disallowsSameSiteNone:un.UY,setCookie:en.d8,stringToBoolOrDefault:sn,getCookie:en.ej,deleteCookie:en.kT,trim:A.nd,newId:Sn.pZ,random32:function(){return(0,Sn._l)(!0)},generateW3CId:en.DO,isArray:A.kJ,isError:A.VZ,isDate:A.J_,toISOStringForIE8:A.Y6,getIEVersion:ue.sA,msToTimeSpan:Yt,isCrossOriginError:hn,dump:ue.eU,getExceptionName:A.jj,addEventHandler:yn.pZ,IsBeaconApiSupported:ue.MF,getExtension:an},ii={parseUrl:Qn,getAbsoluteUrl:Pr,getPathName:nr,getCompleteUrl:Xn,parseHost:zr,parseFullHost:gr},Hr={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(C,v,E){if(!v||C&&C.disableCorrelationHeaders)return!1;if(C&&C[se]){for(var I=0;I<C.correlationHeaderExcludePatterns[Y];I++)if(C[se][I].test(v))return!1}var le=Qn(v).host[Ee]();if(le&&(le[We](":443")!==-1||le[We](":80")!==-1)&&(le=(gr(v,!0)||"")[Ee]()),(!C||!C.enableCorsCorrelation)&&le&&le!==E)return!1;var be=C&&C.correlationHeaderDomains;if(be){var xe;if((0,A.tO)(be,function(lt){var Rt=new RegExp(lt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));xe=xe||Rt.test(le)}),!xe)return!1}var Ue=C&&C.correlationHeaderExcludedDomains;if(!Ue||Ue[Y]===0)return!0;for(var I=0;I<Ue[Y];I++){var ut=new RegExp(Ue[I].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ut.test(le))return!1}return le&&le[Y]>0},getCorrelationContext:function(C){if(C){var v=Hr.getCorrelationContextValue(C,Hn[1]);if(v&&v!==Hr.correlationIdPrefix)return v}},getCorrelationContextValue:function(C,v){if(C)for(var E=C[z](","),I=0;I<E[Y];++I){var le=E[I][z]("=");if(le[Y]===2&&le[0]===v)return le[1]}}};function kr(C,v,E,I){var le,be=I,xe=I;if(v&&v[Y]>0){var Ue=Qn(v);if(le=Ue.host,!be)if(Ue[L]!=null){var ut=Ue.pathname[Y]===0?"/":Ue[L];ut.charAt(0)!=="/"&&(ut="/"+ut),xe=Ue[L],be=qe(C,E?E+" "+ut:ut)}else be=qe(C,v)}else le=I,be=I;return{target:le,name:be,data:xe}}o(kr,"AjaxHelperParseDependencyPath");function ai(){var C=(0,ue.r)();if(C&&C.now&&C.timing){var v=C.now()+C.timing.navigationStart;if(v>0)return v}return(0,A.m6)()}o(ai,"dateTimeUtilsNow");function $n(C,v){var E=null;return C!==0&&v!==0&&!(0,A.le)(C)&&!(0,A.le)(v)&&(E=v-C),E}o($n,"dateTimeUtilsDuration");var oi={Now:ai,GetDuration:$n};function sr(C,v){var E=C||{};return{getName:function(){return E[_DYN_NAME]},setName:function(I){v&&v.setName(I),E[_DYN_NAME]=I},getTraceId:function(){return E.traceID},setTraceId:function(I){v&&v.setTraceId(I),isValidTraceId(I)&&(E.traceID=I)},getSpanId:function(){return E.parentID},setSpanId:function(I){v&&v.setSpanId(I),isValidSpanId(I)&&(E.parentID=I)},getTraceFlags:function(){return E.traceFlags},setTraceFlags:function(I){v&&v.setTraceFlags(I),E.traceFlags=I}}}o(sr,"createDistributedTraceContextFromTrace");var nn=function(){function C(v,E,I,le,be,xe,Ue,ut,lt,Rt,$t,cn){lt===void 0&&(lt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Jt=this;Jt.ver=2,Jt.id=E,Jt[Ae]=Yt(be),Jt.success=xe,Jt.resultCode=Ue+"",Jt.type=qe(v,lt);var vn=kr(v,I,ut,le);Jt.data=At(v,le)||vn.data,Jt.target=qe(v,vn.target),Rt&&(Jt.target="".concat(Jt.target," | ").concat(Rt)),Jt[P]=qe(v,vn[P]),Jt[we]=pn(v,$t),Jt[Ie]=In(v,cn)}return o(C,"RemoteDependencyData"),C.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",C.dataType="RemoteDependencyData",C}(),Jr=b(5883),Kn=b(4063);function zn(C){var v="ai."+C+".";return function(E){return v+E}}o(zn,"_aiNameFunc");var rr=zn("application"),On=zn("device"),ye=zn("location"),S=zn("operation"),$=zn("session"),de=zn("user"),Oe=zn("cloud"),mt=zn("internal"),it=function(C){(0,p.ne)(v,C);function v(){return C.call(this)||this}return o(v,"ContextTagKeys"),v}((0,A.hl)({applicationVersion:rr("ver"),applicationBuild:rr("build"),applicationTypeId:rr("typeId"),applicationId:rr("applicationId"),applicationLayer:rr("layer"),deviceId:On("id"),deviceIp:On("ip"),deviceLanguage:On("language"),deviceLocale:On("locale"),deviceModel:On("model"),deviceFriendlyName:On("friendlyName"),deviceNetwork:On("network"),deviceNetworkName:On("networkName"),deviceOEMName:On("oemName"),deviceOS:On("os"),deviceOSVersion:On("osVersion"),deviceRoleInstance:On("roleInstance"),deviceRoleName:On("roleName"),deviceScreenResolution:On("screenResolution"),deviceType:On("type"),deviceMachineName:On("machineName"),deviceVMName:On("vmName"),deviceBrowser:On("browser"),deviceBrowserVersion:On("browserVersion"),locationIp:ye("ip"),locationCountry:ye("country"),locationProvince:ye("province"),locationCity:ye("city"),operationId:S("id"),operationName:S("name"),operationParentId:S("parentId"),operationRootId:S("rootId"),operationSyntheticSource:S("syntheticSource"),operationCorrelationVector:S("correlationVector"),sessionId:$("id"),sessionIsFirst:$("isFirst"),sessionIsNew:$("isNew"),userAccountAcquisitionDate:de("accountAcquisitionDate"),userAccountId:de("accountId"),userAgent:de("userAgent"),userId:de("id"),userStoreRegion:de("storeRegion"),userAuthUserId:de("authUserId"),userAnonymousUserAcquisitionDate:de("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:de("authUserAcquisitionDate"),cloudName:Oe("name"),cloudRole:Oe("role"),cloudRoleVer:Oe("roleVer"),cloudRoleInstance:Oe("roleInstance"),cloudEnvironment:Oe("environment"),cloudLocation:Oe("location"),cloudDeploymentUnit:Oe("deploymentUnit"),internalNodeName:mt("nodeName"),internalSdkVersion:mt("sdkVersion"),internalAgentVersion:mt("agentVersion"),internalSnippet:mt("snippet"),internalSdkSrc:mt("sdkSrc")})),fe={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Ce=new it,Le=function(){function C(v,E,I){var le=this,be=this;be.ver=1,be.sampleRate=100,be.tags={},be[P]=qe(v,I)||W,be.data=E,be.time=(0,A.Y6)(new Date),be.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return le.sampleRate===100?4:1},tags:1,data:1}}return o(C,"Envelope"),C}(),Ve=function(){function C(v,E){this.aiDataContract={baseType:1,baseData:1},this.baseType=v,this.baseData=E}return o(C,"Data"),C}(),ct="duration",gt="tags",Mt="deviceType",Et="data",qt="name",Pn="traceID",Gt="length",Zn="stringify",er="measurements",lr="dataType",Ar="envelopeType",_i="toString",ta="onLine",zi="enqueue",Ir="count",Ei="push",na="emitLineDelimitedJson",Hi="clear",Ai="batchPayloads",Br="markAsSent",Vr="clearSent",Bi="BUFFER_KEY",si="SENT_BUFFER_KEY",Ur="MAX_BUFFER_SIZE",li="namePrefix",ra="maxBatchSizeInBytes",Di="triggerSend",Sr="diagLog",pa="onunloadDisableBeacon",pi="isBeaconApiDisabled",Ui="_sender",kn="_senderConfig",Dr="_buffer",vr="enableSessionStorageBuffer",ia="samplingPercentage",Ri="instrumentationKey",ci="endpointUrl",ma="customHeaders",Wi="disableXhr",$i="onunloadDisableFetch",aa="disableTelemetry",Ji="baseType",ui="sampleRate",Vi="convertUndefined",ya="_xhrReadyStateChange",Lr="_onError",Ti="_onPartialSuccess",jr="_onSuccess",di="itemsAccepted",Cr="itemsReceived",Wr="isRetryDisabled",Mi="setRequestHeader",Pi="maxBatchInterval",Ii="eventsSendRequest",Li="disableInstrumentationKeyValidation",oa="getSamplingScore",sa="getHashCodeScore",la="baseType",Jn="baseData",cr="properties",wa="true";function Vn(C,v,E){return(0,A.sO)(C,v,E,A.fQ)}o(Vn,"_setValueIf");function Ua(C,v,E){var I=E[gt]=E[gt]||{},le=v.ext=v.ext||{},be=v[gt]=v[gt]||[],xe=le.user;xe&&(Vn(I,Ce.userAuthUserId,xe.authId),Vn(I,Ce.userId,xe.id||xe.localId));var Ue=le.app;Ue&&Vn(I,Ce.sessionId,Ue.sesId);var ut=le.device;ut&&(Vn(I,Ce.deviceId,ut.id||ut.localId),Vn(I,Ce[Mt],ut.deviceClass),Vn(I,Ce.deviceIp,ut.ip),Vn(I,Ce.deviceModel,ut.model),Vn(I,Ce[Mt],ut[Mt]));var lt=v.ext.web;if(lt){Vn(I,Ce.deviceLanguage,lt.browserLang),Vn(I,Ce.deviceBrowserVersion,lt.browserVer),Vn(I,Ce.deviceBrowser,lt.browser);var Rt=E[Et]=E[Et]||{},$t=Rt[Jn]=Rt[Jn]||{},cn=$t[cr]=$t[cr]||{};Vn(cn,"domain",lt.domain),Vn(cn,"isManual",lt.isManual?wa:null),Vn(cn,"screenRes",lt.screenRes),Vn(cn,"userConsent",lt.userConsent?wa:null)}var Jt=le.os;Jt&&Vn(I,Ce.deviceOS,Jt[qt]);var vn=le.trace;vn&&(Vn(I,Ce.operationParentId,vn.parentID),Vn(I,Ce.operationName,qe(C,vn[qt])),Vn(I,Ce.operationId,vn[Pn]));for(var rn={},ke=be[Gt]-1;ke>=0;ke--){var En=be[ke];(0,A.rW)(En,function(xi,hi){rn[xi]=hi}),be.splice(ke,1)}(0,A.rW)(be,function(xi,hi){rn[xi]=hi});var Nr=(0,p.uc)((0,p.uc)({},I),rn);Nr[Ce.internalSdkVersion]||(Nr[Ce.internalSdkVersion]="javascript:".concat(Wa.Version)),E[gt]=(0,A.Ax)(Nr)}o(Ua,"_extractPartAExtensions");function br(C,v,E){(0,A.le)(C)||(0,A.rW)(C,function(I,le){(0,A.hj)(le)?E[I]=le:(0,A.HD)(le)?v[I]=le:(0,ue.nS)()&&(v[I]=(0,ue.xA)()[Zn](le))})}o(br,"_extractPropsAndMeasurements");function fi(C,v){(0,A.le)(C)||(0,A.rW)(C,function(E,I){C[E]=I||v})}o(fi,"_convertPropsUndefinedToCustomDefinedValue");function mi(C,v,E,I){var le=new Le(C,I,v);Vn(le,"sampleRate",E[g]),(E[Jn]||{}).startTime&&(le.time=(0,A.Y6)(E[Jn].startTime)),le.iKey=E.iKey;var be=E.iKey.replace(/-/g,"");return le[qt]=le[qt].replace("{0}",be),Ua(C,E,le),E[gt]=E[gt]||[],(0,A.Ax)(le)}o(mi,"_createEnvelope");function yi(C,v){(0,A.le)(v[Jn])&&(0,G.kP)(C,1,46,"telemetryItem.baseData cannot be null.")}o(yi,"EnvelopeCreatorInit");var Wa={Version:"2.8.9"};function $a(C,v,E){yi(C,v);var I=v[Jn][er]||{},le=v[Jn][cr]||{};br(v[Et],le,I),(0,A.le)(E)||fi(le,E);var be=v[Jn];if((0,A.le)(be))return(0,G.jV)(C,"Invalid input for dependency data"),null;var xe=be[cr]&&be[cr][O]?be[cr][O]:"GET",Ue=new nn(C,be.id,be.target,be[qt],be[ct],be.success,be.responseCode,xe,be.type,be.correlationContext,le,I),ut=new Ve(nn[lr],Ue);return mi(C,nn[Ar],v,ut)}o($a,"DependencyEnvelopeCreator");function Sa(C,v,E){yi(C,v);var I={},le={};v[la]!==Tt[lr]&&(I.baseTypeSource=v[la]),v[la]===Tt[lr]?(I=v[Jn][cr]||{},le=v[Jn][er]||{}):v[Jn]&&br(v[Jn],I,le),br(v[Et],I,le),(0,A.le)(E)||fi(I,E);var be=v[Jn][qt],xe=new Tt(C,be,I,le),Ue=new Ve(Tt[lr],xe);return mi(C,Tt[Ar],v,Ue)}o(Sa,"EventEnvelopeCreator");function Ka(C,v,E){yi(C,v);var I=v[Jn][er]||{},le=v[Jn][cr]||{};br(v[Et],le,I),(0,A.le)(E)||fi(le,E);var be=v[Jn],xe=xt.CreateFromInterface(C,be,le,I),Ue=new Ve(xt[lr],xe);return mi(C,xt[Ar],v,Ue)}o(Ka,"ExceptionEnvelopeCreator");function Ga(C,v,E){yi(C,v);var I=v[Jn],le=I[cr]||{},be=I[er]||{};br(v[Et],le,be),(0,A.le)(E)||fi(le,E);var xe=new St(C,I[qt],I.average,I.sampleCount,I.min,I.max,I.stdDev,le,be),Ue=new Ve(St[lr],xe);return mi(C,St[Ar],v,Ue)}o(Ga,"MetricEnvelopeCreator");function ca(C,v,E){yi(C,v);var I,le=v[Jn];!(0,A.le)(le)&&!(0,A.le)(le[cr])&&!(0,A.le)(le[cr][ct])?(I=le[cr][ct],delete le[cr][ct]):!(0,A.le)(v[Et])&&!(0,A.le)(v[Et][ct])&&(I=v[Et][ct],delete v[Et][ct]);var be=v[Jn],xe;((v.ext||{}).trace||{})[Pn]&&(xe=v.ext.trace[Pn]);var Ue=be.id||xe,ut=be[qt],lt=be.uri,Rt=be[cr]||{},$t=be[er]||{};if((0,A.le)(be.refUri)||(Rt.refUri=be.refUri),(0,A.le)(be.pageType)||(Rt.pageType=be.pageType),(0,A.le)(be.isLoggedIn)||(Rt.isLoggedIn=be.isLoggedIn[_i]()),!(0,A.le)(be[cr])){var cn=be[cr];(0,A.rW)(cn,function(rn,ke){Rt[rn]=ke})}br(v[Et],Rt,$t),(0,A.le)(E)||fi(Rt,E);var Jt=new Rn(C,ut,lt,I,Rt,$t,Ue),vn=new Ve(Rn[lr],Jt);return mi(C,Rn[Ar],v,vn)}o(ca,"PageViewEnvelopeCreator");function za(C,v,E){yi(C,v);var I=v[Jn],le=I[qt],be=I.uri||I.url,xe=I[cr]||{},Ue=I[er]||{};br(v[Et],xe,Ue),(0,A.le)(E)||fi(xe,E);var ut=new Tn(C,le,be,void 0,xe,Ue,I),lt=new Ve(Tn[lr],ut);return mi(C,Tn[Ar],v,lt)}o(za,"PageViewPerformanceEnvelopeCreator");function Ja(C,v,E){yi(C,v);var I=v[Jn].message,le=v[Jn].severityLevel,be=v[Jn][cr]||{},xe=v[Jn][er]||{};br(v[Et],be,xe),(0,A.le)(E)||fi(be,E);var Ue=new Xt(C,I,le,be,xe),ut=new Ve(Xt[lr],Ue);return mi(C,Xt[Ar],v,ut)}o(Ja,"TraceEnvelopeCreator");function Ca(C,v){(0,yn.QY)(C,null,null,v)}o(Ca,"_disableEvents");function ji(C){var v=(0,ue.Me)(),E=(0,ue.jW)(),I=!1,le=!0,be=(0,yn.jU)((0,Jr.J)("OfflineListener"),C);try{if(Ue((0,ue.Jj)())&&(I=!0),v){var xe=v.body||v;xe.ononline&&Ue(xe)&&(I=!0)}I&&E&&!(0,A.le)(E[ta])&&(le=E[ta])}catch(cn){I=!1}function Ue(cn){var Jt=!1;return cn&&(Jt=(0,yn.XO)(cn,"online",ut,be),Jt&&(0,yn.XO)(cn,"offline",lt,be)),Jt}o(Ue,"_enableEvents");function ut(){le=!0}o(ut,"_setOnline");function lt(){le=!1}o(lt,"_setOffline");function Rt(){var cn=!0;return I?cn=le:E&&!(0,A.le)(E[ta])&&(cn=E[ta]),cn}o(Rt,"_isOnline");function $t(){var cn=(0,ue.Jj)();if(cn&&I){if(Ca(cn,be),v){var Jt=v.body||v;(0,A.o8)(Jt.ononline)||Ca(Jt,be)}I=!1}}return o($t,"_unload"),{isOnline:Rt,isListening:function(){return I},unload:$t}}o(ji,"createOfflineListener");var ba=function(){function C(v,E){var I=[],le=!1;this._get=function(){return I},this._set=function(be){return I=be,I},(0,R.Z)(C,this,function(be){be[zi]=function(xe){if(be[Ir]()>=E.eventsLimitInMem()){le||((0,G.kP)(v,2,105,"Maximum in-memory buffer size reached: "+be[Ir](),!0),le=!0);return}I[Ei](xe)},be[Ir]=function(){return I[Gt]},be.size=function(){for(var xe=I[Gt],Ue=0;Ue<I[Gt];Ue++)xe+=I[Ue][Gt];return E[na]()||(xe+=2),xe},be[Hi]=function(){I=[],le=!1},be.getItems=function(){return I.slice(0)},be[Ai]=function(xe){if(xe&&xe[Gt]>0){var Ue=E[na]()?xe.join(`
`):"["+xe.join(",")+"]";return Ue}return null}})}return o(C,"BaseSendBuffer"),C.__ieDyn=1,C}(),_a=function(C){(0,p.ne)(v,C);function v(E,I){var le=C.call(this,E,I)||this;return(0,R.Z)(v,le,function(be,xe){be[Br]=function(Ue){xe[Hi]()},be[Vr]=function(Ue){}}),le}return o(v,"ArraySendBuffer"),v.__ieDyn=1,v}(ba),Ea=function(C){(0,p.ne)(v,C);function v(E,I){var le=C.call(this,E,I)||this,be=!1;return(0,R.Z)(v,le,function(xe,Ue){var ut=cn(v[Bi]),lt=cn(v[si]),Rt=xe._set(ut.concat(lt));Rt[Gt]>v[Ur]&&(Rt[Gt]=v[Ur]),Jt(v[si],[]),Jt(v[Bi],Rt),xe[zi]=function(vn){if(xe[Ir]()>=v[Ur]){be||((0,G.kP)(E,2,67,"Maximum buffer size reached: "+xe[Ir](),!0),be=!0);return}Ue[zi](vn),Jt(v[Bi],xe._get())},xe[Hi]=function(){Ue[Hi](),Jt(v[Bi],xe._get()),Jt(v[si],[]),be=!1},xe[Br]=function(vn){Jt(v[Bi],xe._set($t(vn,xe._get())));var rn=cn(v[si]);rn instanceof Array&&vn instanceof Array&&(rn=rn.concat(vn),rn[Gt]>v[Ur]&&((0,G.kP)(E,1,67,"Sent buffer reached its maximum size: "+rn[Gt],!0),rn[Gt]=v[Ur]),Jt(v[si],rn))},xe[Vr]=function(vn){var rn=cn(v[si]);rn=$t(vn,rn),Jt(v[si],rn)};function $t(vn,rn){var ke=[];return(0,A.tO)(rn,function(En){!(0,A.mf)(En)&&(0,A.UA)(vn,En)===-1&&ke[Ei](En)}),ke}o($t,"_removePayloadsFromBuffer");function cn(vn){var rn=vn;try{rn=I[li]&&I[li]()?I[li]()+"_"+rn:rn;var ke=Vt(E,rn);if(ke){var En=(0,ue.xA)().parse(ke);if((0,A.HD)(En)&&(En=(0,ue.xA)().parse(En)),En&&(0,A.kJ)(En))return En}}catch(Nr){(0,G.kP)(E,1,42," storage key: "+rn+", "+(0,A.jj)(Nr),{exception:(0,ue.eU)(Nr)})}return[]}o(cn,"_getBuffer");function Jt(vn,rn){var ke=vn;try{ke=I[li]&&I[li]()?I[li]()+"_"+ke:ke;var En=JSON[Zn](rn);Ft(E,ke,En)}catch(Nr){Ft(E,ke,JSON[Zn]([])),(0,G.kP)(E,2,41," storage key: "+ke+", "+(0,A.jj)(Nr)+". Buffer cleared",{exception:(0,ue.eU)(Nr)})}}o(Jt,"_setBuffer")}),le}return o(v,"SessionStorageSendBuffer"),v.BUFFER_KEY="AI_buffer",v.SENT_BUFFER_KEY="AI_sentBuffer",v.MAX_BUFFER_SIZE=2e3,v}(ba),Va=function(){function C(v){(0,R.Z)(C,this,function(E){E.serialize=function(xe){var Ue=I(xe,"root");try{return(0,ue.xA)()[Zn](Ue)}catch(ut){(0,G.kP)(v,1,48,ut&&(0,A.mf)(ut[_i])?ut[_i]():"Error serializing object",null,!0)}};function I(xe,Ue){var ut="__aiCircularRefCheck",lt={};if(!xe)return(0,G.kP)(v,1,48,"cannot serialize object because it is null or undefined",{name:Ue},!0),lt;if(xe[ut])return(0,G.kP)(v,2,50,"Circular reference detected while serializing object",{name:Ue},!0),lt;if(!xe.aiDataContract){if(Ue==="measurements")lt=be(xe,"number",Ue);else if(Ue==="properties")lt=be(xe,"string",Ue);else if(Ue==="tags")lt=be(xe,"string",Ue);else if((0,A.kJ)(xe))lt=le(xe,Ue);else{(0,G.kP)(v,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Ue},!0);try{(0,ue.xA)()[Zn](xe),lt=xe}catch(Rt){(0,G.kP)(v,1,48,Rt&&(0,A.mf)(Rt[_i])?Rt[_i]():"Error serializing object",null,!0)}}return lt}return xe[ut]=!0,(0,A.rW)(xe.aiDataContract,function(Rt,$t){var cn=(0,A.mf)($t)?$t()&1:$t&1,Jt=(0,A.mf)($t)?$t()&4:$t&4,vn=$t&2,rn=xe[Rt]!==void 0,ke=(0,A.Kn)(xe[Rt])&&xe[Rt]!==null;if(cn&&!rn&&!vn)(0,G.kP)(v,1,24,"Missing required field specification. The field is required but not present on source",{field:Rt,name:Ue});else if(!Jt){var En=void 0;ke?vn?En=le(xe[Rt],Rt):En=I(xe[Rt],Rt):En=xe[Rt],En!==void 0&&(lt[Rt]=En)}}),delete xe[ut],lt}o(I,"_serializeObject");function le(xe,Ue){var ut;if(xe)if(!(0,A.kJ)(xe))(0,G.kP)(v,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Ue},!0);else{ut=[];for(var lt=0;lt<xe[Gt];lt++){var Rt=xe[lt],$t=I(Rt,Ue+"["+lt+"]");ut[Ei]($t)}}return ut}o(le,"_serializeArray");function be(xe,Ue,ut){var lt;return xe&&(lt={},(0,A.rW)(xe,function(Rt,$t){if(Ue==="string")$t===void 0?lt[Rt]="undefined":$t===null?lt[Rt]="null":$t[_i]?lt[Rt]=$t[_i]():lt[Rt]="invalid field: toString() is not defined.";else if(Ue==="number")if($t===void 0)lt[Rt]="undefined";else if($t===null)lt[Rt]="null";else{var cn=parseFloat($t);isNaN(cn)?lt[Rt]="NaN":lt[Rt]=cn}else lt[Rt]="invalid field: "+ut+" is of unknown type.",(0,G.kP)(v,1,lt[Rt],null,!0)})),lt}o(be,"_serializeStringMap")})}return o(C,"Serializer"),C.__ieDyn=1,C}(),ja=8,Qr=function(){function C(){}return o(C,"HashCodeScoreGenerator"),C.prototype.getHashCodeScore=function(v){var E=this.getHashCode(v)/C.INT_MAX_VALUE;return E*100},C.prototype.getHashCode=function(v){if(v==="")return 0;for(;v[Gt]<ja;)v=v.concat(v);for(var E=5381,I=0;I<v[Gt];++I)E=(E<<5)+E+v.charCodeAt(I),E=E&E;return Math.abs(E)},C.INT_MAX_VALUE=2147483647,C}(),Ya=function(){function C(){var v=this,E=new Qr,I=new it;v[oa]=function(le){var be=0;return le[gt]&&le[gt][I.userId]?be=E.getHashCodeScore(le[gt][I.userId]):le.ext&&le.ext.user&&le.ext.user.id?be=E[sa](le.ext.user.id):le[gt]&&le[gt][I.operationId]?be=E.getHashCodeScore(le[gt][I.operationId]):le.ext&&le.ext.telemetryTrace&&le.ext.telemetryTrace[Pn]?be=E.getHashCodeScore(le.ext.telemetryTrace[Pn]):be=Math.random()*100,be}}return o(C,"SamplingScoreGenerator"),C}(),qa=function(){function C(v,E){this.INT_MAX_VALUE=2147483647;var I=E||(0,G.vH)(null);(v>100||v<0)&&(I.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:v},!0),v=100),this[ui]=v,this.samplingScoreGenerator=new Ya}return o(C,"Sample"),C.prototype.isSampledIn=function(v){var E=this[ui],I=!1;return E==null||E>=100||v.baseType===St[lr]?!0:(I=this.samplingScoreGenerator[oa](v)<E,I)},C}(),Xr,Qa=65e3;function Yi(C){try{return C.responseText}catch(v){}return null}o(Yi,"_getResponseText");function Aa(){var C,v,E;return C={endpointUrl:function(){return U+_}},C[na]=function(){return!1},C[Pi]=function(){return 15e3},C[ra]=function(){return 102400},C[aa]=function(){return!1},C[vr]=function(){return!0},C[Wr]=function(){return!1},C[pi]=function(){return!0},C[Wi]=function(){return!1},C[$i]=function(){return!1},C[pa]=function(){return!1},C[Ri]=function(){return v},C[li]=function(){return v},C[ia]=function(){return 100},C[ma]=function(){return E},C[Vi]=function(){return v},C.eventsLimitInMem=function(){return 1e4},C}o(Aa,"_getDefaultAppInsightsChannelConfig");var jo=(Xr={},Xr[Tt.dataType]=Sa,Xr[Xt.dataType]=Ja,Xr[Rn.dataType]=ca,Xr[Tn.dataType]=za,Xr[xt.dataType]=Ka,Xr[St.dataType]=Ga,Xr[nn.dataType]=$a,Xr),Da=function(C){(0,p.ne)(v,C);function v(){var E=C.call(this)||this;E.priority=1001,E.identifier=w,E._senderConfig=Aa();var I,le,be,xe,Ue,ut,lt,Rt,$t=0,cn,Jt,vn,rn;return(0,R.Z)(v,E,function(ke,En){oo(),ke.pause=function(){Pa(),xe=!0},ke.resume=function(){xe&&(xe=!1,le=null,ke._buffer.size()>ke._senderConfig[ra]()&&ke[Di](!0,null,10),ua())},ke.flush=function(Me,ft,bt){if(Me===void 0&&(Me=!0),!xe){Pa();try{ke[Di](Me,null,bt||1)}catch(Wt){(0,G.kP)(ke[Sr](),1,22,"flush failed, telemetry will not be collected: "+(0,A.jj)(Wt),{exception:(0,ue.eU)(Wt)})}}},ke.onunloadFlush=function(){if(!xe)if((ke._senderConfig[pa]()===!1||ke[kn][pi]()===!1)&&(0,ue.MF)())try{ke[Di](!0,_o,2)}catch(Me){(0,G.kP)(ke[Sr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,A.jj)(Me),{exception:(0,ue.eU)(Me)})}else ke.flush()},ke.addHeader=function(Me,ft){Rt[Me]=ft},ke.initialize=function(Me,ft,bt,Wt){ke.isInitialized()&&(0,G.kP)(ke[Sr](),1,28,"Sender is already initialized"),En.initialize(Me,ft,bt,Wt);var mn=ke._getTelCtx(),An=ke.identifier;ut=new Va(ft.logger),I=0,le=null,be=0,ke[Ui]=null,lt=0;var Cn=ke[Sr]();rn=(0,yn.jU)((0,Jr.J)("Sender"),ft.evtNamespace&&ft.evtNamespace()),vn=ji(rn);var _r=Aa();(0,A.rW)(_r,function(Tr,ki){ke[kn][Tr]=function(){var ur=mn.getConfig(An,Tr,ki());return!ur&&Tr==="endpointUrl"&&(ur=ki()),ur}}),ke._buffer=ke[kn][vr]()&&Bn()?new Ea(Cn,ke[kn]):new _a(Cn,ke[kn]),ke._sample=new qa(ke[kn][ia](),Cn),gi(Me)||(0,G.kP)(Cn,1,100,"Invalid Instrumentation key "+Me[Ri]),!or(ke._senderConfig.endpointUrl())&&ke._senderConfig.customHeaders()&&ke._senderConfig.customHeaders()[Gt]>0&&(0,A.tO)(ke[kn][ma](),function(Tr){E.addHeader(Tr.header,Tr.value)});var Er=ke[kn],ir=null;!Er[Wi]()&&(0,ue.cp)()?ir=da:!Er[Wi]()&&(0,ue.Z3)()&&(ir=qi),!ir&&(0,ue.JO)()&&(ir=no),cn=ir||qi,!Er[pi]()&&(0,ue.MF)()&&(ir=ei),ke[Ui]=ir||qi,!Er[$i]()&&(0,ue.JO)(!0)?Jt=to:(0,ue.MF)()?Jt=ei:!Er[Wi]()&&(0,ue.cp)()?Jt=da:!Er[Wi]()&&(0,ue.Z3)()?Jt=qi:Jt=cn},ke.processTelemetry=function(Me,ft){ft=ke._getTelCtx(ft);var bt=ft[Sr]();try{if(ke[kn][aa]())return;if(!Me){(0,G.kP)(bt,1,7,"Cannot send empty telemetry");return}if(Me.baseData&&!Me[Ji]){(0,G.kP)(bt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Me[Ji]||(Me[Ji]="EventData"),!ke[Ui]){(0,G.kP)(bt,1,28,"Sender was not initialized");return}if(Nr(Me))Me[g]=ke._sample[ui];else{(0,G.kP)(bt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ke._sample[ui]});return}var Wt=ke[kn][Vi]()||void 0,mn=Me.iKey||ke[kn][Ri](),An=v.constructEnvelope(Me,mn,bt,Wt);if(!An){(0,G.kP)(bt,1,47,"Unable to create an AppInsights envelope");return}var Cn=!1;if(Me[gt]&&Me[gt][y]&&((0,A.tO)(Me[gt][y],function(Tr){try{Tr&&Tr(An)===!1&&(Cn=!0,(0,G.jV)(bt,"Telemetry processor check returns false"))}catch(ki){(0,G.kP)(bt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,A.jj)(ki),{exception:(0,ue.eU)(ki)},!0)}}),delete Me[gt][y]),Cn)return;var _r=ut.serialize(An),Er=ke[Dr],ir=Er.size();ir+_r[Gt]>ke[kn][ra]()&&ke[Di](!0,null,10),Er[zi](_r),ua()}catch(Tr){(0,G.kP)(bt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,A.jj)(Tr),{exception:(0,ue.eU)(Tr)})}ke.processNext(Me,ft)},ke[ya]=function(Me,ft,bt){Me.readyState===4&&xi(Me.status,ft,Me.responseURL,bt,Qi(Me),Yi(Me)||Me.response)},ke[Di]=function(Me,ft,bt){if(Me===void 0&&(Me=!0),!xe)try{var Wt=ke[Dr];if(ke[kn][aa]())Wt[Hi]();else{if(Wt[Ir]()>0){var mn=Wt.getItems();ao(bt||0,Me),ft?ft.call(E,mn,Me):ke[Ui](mn,Me)}be=+new Date}Pa()}catch(Cn){var An=(0,ue.sA)();(!An||An>9)&&(0,G.kP)(ke[Sr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,A.jj)(Cn),{exception:(0,ue.eU)(Cn)})}},ke._doTeardown=function(Me,ft){ke.onunloadFlush(),vn.unload(),oo()},ke[Lr]=function(Me,ft,bt){(0,G.kP)(ke[Sr](),2,26,"Failed to send telemetry.",{message:ft}),ke._buffer[Vr](Me)},ke[Ti]=function(Me,ft){for(var bt=[],Wt=[],mn=ft.errors.reverse(),An=0,Cn=mn;An<Cn.length;An++){var _r=Cn[An],Er=Me.splice(_r.index,1)[0];ro(_r.statusCode)?Wt[Ei](Er):bt[Ei](Er)}Me[Gt]>0&&ke[jr](Me,ft[di]),bt[Gt]>0&&ke[Lr](bt,Qi(null,["partial success",ft[di],"of",ft.itemsReceived].join(" "))),Wt[Gt]>0&&(Ma(Wt),(0,G.kP)(ke[Sr](),2,40,"Partial success. Delivered: "+Me[Gt]+", Failed: "+bt[Gt]+". Will retry to send "+Wt[Gt]+" our of "+ft[Cr]+" items"))},ke[jr]=function(Me,ft){ke._buffer[Vr](Me)},ke._xdrOnLoad=function(Me,ft){var bt=Yi(Me);if(Me&&(bt+""=="200"||bt===""))I=0,ke[jr](ft,0);else{var Wt=Ta(bt);Wt&&Wt.itemsReceived&&Wt.itemsReceived>Wt[di]&&!ke[kn][Wr]()?ke[Ti](ft,Wt):ke[Lr](ft,Ki(Me))}};function Nr(Me){return ke._sample.isSampledIn(Me)}o(Nr,"_isSampledIn");function xi(Me,ft,bt,Wt,mn,An){var Cn=null;if(ke._appId||(Cn=Ta(An),Cn&&Cn.appId&&(ke._appId=Cn.appId)),(Me<200||Me>=300)&&Me!==0){if((Me===301||Me===307||Me===308)&&!hi(bt)){ke[Lr](ft,mn);return}!ke[kn][Wr]()&&ro(Me)?(Ma(ft),(0,G.kP)(ke[Sr](),2,40,". Response code "+Me+". Will retry to send "+ft[Gt]+" items.")):ke[Lr](ft,mn)}else if(vn&&!vn.isOnline()){if(!ke[kn][Wr]()){var _r=10;Ma(ft,_r),(0,G.kP)(ke[Sr](),2,40,". Offline - Response Code: ".concat(Me,". Offline status: ").concat(!vn.isOnline(),". Will retry to send ").concat(ft.length," items."))}}else hi(bt),Me===206?(Cn||(Cn=Ta(An)),Cn&&!ke[kn][Wr]()?ke[Ti](ft,Cn):ke[Lr](ft,mn)):(I=0,ke[jr](ft,Wt))}o(xi,"_checkResponsStatus");function hi(Me){return lt>=10?!1:!(0,A.le)(Me)&&Me!==""&&Me!==ke[kn][ci]()?(ke[kn][ci]=function(){return Me},++lt,!0):!1}o(hi,"_checkAndUpdateEndPointUrl");function _o(Me,ft){Jt?Jt(Me,!1):ei(Me,ft)}o(_o,"_doUnloadSend");function eo(Me){var ft=(0,ue.jW)(),bt=ke[Dr],Wt=ke[kn][ci](),mn=ke._buffer[Ai](Me),An=new Blob([mn],{type:"text/plain;charset=UTF-8"}),Cn=ft.sendBeacon(Wt,An);return Cn&&(bt[Br](Me),ke._onSuccess(Me,Me[Gt])),Cn}o(eo,"_doBeaconSend");function ei(Me,ft){if((0,A.kJ)(Me)&&Me[Gt]>0&&!eo(Me)){for(var bt=[],Wt=0;Wt<Me[Gt];Wt++){var mn=Me[Wt];eo([mn])||bt[Ei](mn)}bt[Gt]>0&&(cn&&cn(bt,!0),(0,G.kP)(ke[Sr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(ei,"_beaconSender");function qi(Me,ft){var bt=new XMLHttpRequest,Wt=ke[kn][ci]();try{bt[M]=!0}catch(An){}bt.open("POST",Wt,ft),bt[Mi]("Content-type","application/json"),or(Wt)&&bt[Mi](Hn[6],Hn[7]),(0,A.tO)((0,A.FY)(Rt),function(An){bt[Mi](An,Rt[An])}),bt.onreadystatechange=function(){return ke._xhrReadyStateChange(bt,Me,Me[Gt])},bt.onerror=function(An){return ke[Lr](Me,Qi(bt),An)};var mn=ke._buffer[Ai](Me);bt.send(mn),ke._buffer[Br](Me)}o(qi,"_xhrSender");function to(Me,ft){if((0,A.kJ)(Me)){for(var bt=Me[Gt],Wt=0;Wt<Me[Gt];Wt++)bt+=Me[Wt][Gt];$t+bt<=Qa?Fr(Me,!1):(0,ue.MF)()?ei(Me,ft):(cn&&cn(Me,!0),(0,G.kP)(ke[Sr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(to,"_fetchKeepAliveSender");function no(Me,ft){Fr(Me,!0)}o(no,"_fetchSender");function Fr(Me,ft){var bt,Wt=ke[kn][ci](),mn=ke._buffer[Ai](Me),An=new Blob([mn],{type:"application/json"}),Cn=new Headers,_r=mn[Gt],Er=!1,ir=!1;or(Wt)&&Cn.append(Hn[6],Hn[7]),(0,A.tO)((0,A.FY)(Rt),function(ur){Cn.append(ur,Rt[ur])});var Tr=(bt={method:"POST",headers:Cn,body:An},bt[M]=!0,bt);ft||(Tr.keepalive=!0,Er=!0,$t+=_r);var ki=new Request(Wt,Tr);try{ki[M]=!0}catch(ur){}ke._buffer[Br](Me);try{fetch(ki).then(function(ur){ft||($t-=_r,_r=0),ir||(ir=!0,ur.ok?ur.text().then(function(Yo){xi(ur.status,Me,ur.url,Me[Gt],ur.statusText,Yo)}):ke[Lr](Me,ur.statusText))}).catch(function(ur){ft||($t-=_r,_r=0),ir||(ir=!0,ke[Lr](Me,ur.message))})}catch(ur){ir||ke[Lr](Me,(0,ue.eU)(ur))}Er&&!ir&&(ir=!0,ke._onSuccess(Me,Me[Gt]))}o(Fr,"_doFetchSender");function Ta(Me){try{if(Me&&Me!==""){var ft=(0,ue.xA)().parse(Me);if(ft&&ft.itemsReceived&&ft.itemsReceived>=ft[di]&&ft.itemsReceived-ft.itemsAccepted===ft.errors[Gt])return ft}}catch(bt){(0,G.kP)(ke[Sr](),1,43,"Cannot parse the response. "+(0,A.jj)(bt),{response:Me})}return null}o(Ta,"_parseResponse");function Ma(Me,ft){if(ft===void 0&&(ft=1),!(!Me||Me[Gt]===0)){var bt=ke[Dr];bt[Vr](Me),I++;for(var Wt=0,mn=Me;Wt<mn.length;Wt++){var An=mn[Wt];bt[zi](An)}Rr(ft),ua()}}o(Ma,"_resendPayload");function Rr(Me){var ft=10,bt;if(I<=1)bt=ft;else{var Wt=(Math.pow(2,I)-1)/2,mn=Math.floor(Math.random()*Wt*ft)+1;mn=Me*mn,bt=Math.max(Math.min(mn,3600),ft)}var An=(0,A.m6)()+bt*1e3;le=An}o(Rr,"_setRetryTime");function ua(){if(!Ue&&!xe){var Me=le?Math.max(0,le-(0,A.m6)()):0,ft=Math.max(ke[kn][Pi](),Me);Ue=setTimeout(function(){Ue=null,ke[Di](!0,null,1)},ft)}}o(ua,"_setupTimer");function Pa(){clearTimeout(Ue),Ue=null,le=null}o(Pa,"_clearScheduledTimer");function ro(Me){return Me===401||Me===403||Me===408||Me===429||Me===500||Me===502||Me===503||Me===504}o(ro,"_isRetriable");function Qi(Me,ft){return Me?"XMLHttpRequest,Status:"+Me.status+",Response:"+Yi(Me)||0||0:ft}o(Qi,"_formatErrorMessageXhr");function da(Me,ft){var bt=ke[Dr],Wt=(0,ue.Jj)(),mn=new XDomainRequest;mn.onload=function(){return ke._xdrOnLoad(mn,Me)},mn.onerror=function(Er){return ke[Lr](Me,Ki(mn),Er)};var An=Wt&&Wt.location&&Wt.location.protocol||"";if(ke[kn][ci]().lastIndexOf(An,0)!==0){(0,G.kP)(ke[Sr](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),bt[Hi]();return}var Cn=ke[kn][ci]().replace(/^(https?:)/,"");mn.open("POST",Cn);var _r=bt[Ai](Me);mn.send(_r),bt[Br](Me)}o(da,"_xdrSender");function Ki(Me,ft){return Me?"XDomainRequest,Response:"+Yi(Me)||0:ft}o(Ki,"_formatErrorMessageXdr");function io(){var Me="getNotifyMgr";return ke.core[Me]?ke.core[Me]():ke.core._notificationManager}o(io,"_getNotifyMgr");function ao(Me,ft){var bt=io();if(bt&&bt[Ii])try{bt[Ii](Me,ft)}catch(Wt){(0,G.kP)(ke[Sr](),1,74,"send request notification failed: "+(0,A.jj)(Wt),{exception:(0,ue.eU)(Wt)})}}o(ao,"_notifySendRequest");function gi(Me){var ft=(0,A.le)(Me[Li])?!1:Me[Li];if(ft)return!0;var bt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Wt=new RegExp(bt);return Wt.test(Me[Ri])}o(gi,"_validateInstrumentationKey");function oo(){ke[Ui]=null,ke[Dr]=null,ke._appId=null,ke._sample=null,Rt={},vn=null,I=0,le=null,be=null,xe=!1,Ue=null,ut=null,lt=0,$t=0,cn=null,Jt=null,rn=null}o(oo,"_initDefaults")}),E}return o(v,"Sender"),v.constructEnvelope=function(E,I,le,be){var xe;I!==E.iKey&&!(0,A.le)(I)?xe=(0,p.uc)((0,p.uc)({},E),{iKey:I}):xe=E;var Ue=jo[xe.baseType]||Sa;return Ue(le,xe,be)},v}(Kn.i),Xa=b(5121),Ke="initialize",wi="diagnosticLogInterval",Ra=b(7310),Za=(0,Ln.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Zr=function(){function C(v){var E=new Xa.F;((0,A.le)(v)||(0,A.le)(v.instrumentationKey))&&(0,A._y)("Invalid input configuration"),(0,R.Z)(C,this,function(I){I.config=v,le(),I[Ke]=le,I.getSKUDefaults=function(){I.config[wi]=I.config[wi]&&I.config[wi]>0?I.config[wi]:1e4},I.getSKUDefaults(),(0,A.Vb)(I,E,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function le(){var be=[],xe=new Da;be.push(xe),E[Ke](I.config,be),xe[Ke](I.config,E,be),E.pollInternalLogs()}o(le,"_initialize")})}return o(C,"ApplicationInsights"),C.__ieDyn=1,C}()},1679:(Qe,s,b)=>{"use strict";b.d(s,{Z:()=>Ge});/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,p="undefined",T="constructor",w="prototype",J="function",M="_dynInstFuncs",g="_isDynProxy",y="_dynClass",O="_dynCls$",U="_dynInstChk",_=U,W="_dfOpts",N="_unknown_",z="__proto__",Y="_dyn"+z,Ee="__dynProto$Gbl",H="_dynInstProto",X="useBaseInst",Q="setInstFuncs",P=Object,B=P.getPrototypeOf,K=P.getOwnPropertyNames;function q(){var k;return typeof globalThis!==p&&(k=globalThis),!k&&typeof self!==p&&(k=self),!k&&typeof window!==p&&(k=window),!k&&typeof b.g!==p&&(k=b.g),k||{}}o(q,"_getGlobal");var ne=q(),me=ne[Ee]||(ne[Ee]={o:(R={},R[Q]=!0,R[X]=!0,R),n:1e3});function _e(k,V){return k&&P[w].hasOwnProperty.call(k,V)}o(_e,"_hasOwnProperty");function Be(k){return k&&(k===P[w]||k===Array[w])}o(Be,"_isObjectOrArrayPrototype");function oe(k){return Be(k)||k===Function[w]}o(oe,"_isObjectArrayOrFunctionPrototype");function L(k){var V;if(k){if(B)return B(k);var ee=k[z]||k[w]||(k[T]?k[T][w]:null);V=k[Y]||ee,_e(k,Y)||(delete k[H],V=k[Y]=k[H]||k[Y],k[H]=ee)}return V}o(L,"_getObjProto");function se(k,V){var ee=[];if(K)ee=K(k);else for(var he in k)typeof he=="string"&&_e(k,he)&&ee.push(he);if(ee&&ee.length>0)for(var Je=0;Je<ee.length;Je++)V(ee[Je])}o(se,"_forEachProp");function We(k,V,ee){return V!==T&&typeof k[V]===J&&(ee||_e(k,V))}o(We,"_isDynamicCandidate");function Fe(k){throw new TypeError("DynamicProto: "+k)}o(Fe,"_throwTypeError");function ve(k){var V={};return se(k,function(ee){!V[ee]&&We(k,ee,!1)&&(V[ee]=k[ee])}),V}o(ve,"_getInstanceFuncs");function F(k,V){for(var ee=k.length-1;ee>=0;ee--)if(k[ee]===V)return!0;return!1}o(F,"_hasVisited");function we(k,V,ee,he){function Je(Se,ie,Re){var ge=ie[Re];if(ge[g]&&he){var tt=Se[M]||{};tt[_]!==!1&&(ge=(tt[ie[y]]||{})[Re]||ge)}return function(){return ge.apply(Se,arguments)}}o(Je,"_instFuncProxy");var nt={};se(ee,function(Se){nt[Se]=Je(V,ee,Se)});for(var pe=L(k),Ae=[];pe&&!oe(pe)&&!F(Ae,pe);)se(pe,function(Se){!nt[Se]&&We(pe,Se,!B)&&(nt[Se]=Je(V,pe,Se))}),Ae.push(pe),pe=L(pe);return nt}o(we,"_getBaseFuncs");function Ie(k,V,ee,he){var Je=null;if(k&&_e(ee,y)){var nt=k[M]||{};if(Je=(nt[ee[y]]||{})[V],Je||Fe("Missing ["+V+"] "+J),!Je[U]&&nt[_]!==!1){for(var pe=!_e(k,V),Ae=L(k),Se=[];pe&&Ae&&!oe(Ae)&&!F(Se,Ae);){var ie=Ae[V];if(ie){pe=ie===he;break}Se.push(Ae),Ae=L(Ae)}try{pe&&(k[V]=Je),Je[U]=1}catch(Re){nt[_]=!1}}}return Je}o(Ie,"_getInstFunc");function Te(k,V,ee){var he=V[k];return he===ee&&(he=L(V)[k]),typeof he!==J&&Fe("["+k+"] is not a "+J),he}o(Te,"_getProtoFunc");function re(k,V,ee,he,Je){function nt(Se,ie){var Re=o(function(){var ge=Ie(this,ie,Se,Re)||Te(ie,Se,Re);return ge.apply(this,arguments)},"dynProtoProxy");return Re[g]=1,Re}if(o(nt,"_createDynamicPrototype"),!Be(k)){var pe=ee[M]=ee[M]||{},Ae=pe[V]=pe[V]||{};pe[_]!==!1&&(pe[_]=!!Je),se(ee,function(Se){We(ee,Se,!1)&&ee[Se]!==he[Se]&&(Ae[Se]=ee[Se],delete ee[Se],(!_e(k,Se)||k[Se]&&!k[Se][g])&&(k[Se]=nt(k,Se)))})}}o(re,"_populatePrototype");function vt(k,V){if(B){for(var ee=[],he=L(V);he&&!oe(he)&&!F(ee,he);){if(he===k)return!0;ee.push(he),he=L(he)}return!1}return!0}o(vt,"_checkPrototype");function Ze(k,V){return _e(k,w)?k.name||V||N:((k||{})[T]||{}).name||V||N}o(Ze,"_getObjName");function Ge(k,V,ee,he){_e(k,w)||Fe("theClass is an invalid class definition.");var Je=k[w];vt(Je,V)||Fe("["+Ze(k)+"] not in hierarchy of ["+Ze(V)+"]");var nt=null;_e(Je,y)?nt=Je[y]:(nt=O+Ze(k,"_")+"$"+me.n,me.n++,Je[y]=nt);var pe=Ge[W],Ae=!!pe[X];Ae&&he&&he[X]!==void 0&&(Ae=!!he[X]);var Se=ve(V),ie=we(Je,V,Se,Ae);ee(V,ie);var Re=!!B&&!!pe[Q];Re&&he&&(Re=!!he[Q]),re(Je,nt,V,Se,Re!==!1)}o(Ge,"dynamicProto"),Ge[W]=me.o},6232:(Qe,s,b)=>{"use strict";const R=b(8641),p=b(8692),T=b(1474),w=b(5870),J=o((M,g={})=>{let y=[];if(Array.isArray(M))for(let O of M){let U=J.create(O,g);Array.isArray(U)?y.push(...U):y.push(U)}else y=[].concat(J.create(M,g));return g&&g.expand===!0&&g.nodupes===!0&&(y=[...new Set(y)]),y},"braces");J.parse=(M,g={})=>w(M,g),J.stringify=(M,g={})=>R(typeof M=="string"?J.parse(M,g):M,g),J.compile=(M,g={})=>(typeof M=="string"&&(M=J.parse(M,g)),p(M,g)),J.expand=(M,g={})=>{typeof M=="string"&&(M=J.parse(M,g));let y=T(M,g);return g.noempty===!0&&(y=y.filter(Boolean)),g.nodupes===!0&&(y=[...new Set(y)]),y},J.create=(M,g={})=>M===""||M.length<3?[M]:g.expand!==!0?J.compile(M,g):J.expand(M,g),Qe.exports=J},8692:(Qe,s,b)=>{"use strict";const R=b(1516),p=b(3596),T=o((w,J={})=>{let M=o((g,y={})=>{let O=p.isInvalidBrace(y),U=g.invalid===!0&&J.escapeInvalid===!0,_=O===!0||U===!0,W=J.escapeInvalid===!0?"\\":"",N="";if(g.isOpen===!0||g.isClose===!0)return W+g.value;if(g.type==="open")return _?W+g.value:"(";if(g.type==="close")return _?W+g.value:")";if(g.type==="comma")return g.prev.type==="comma"?"":_?g.value:"|";if(g.value)return g.value;if(g.nodes&&g.ranges>0){let z=p.reduce(g.nodes),Y=R(...z,{...J,wrap:!1,toRegex:!0});if(Y.length!==0)return z.length>1&&Y.length>1?`(${Y})`:Y}if(g.nodes)for(let z of g.nodes)N+=M(z,g);return N},"walk");return M(w)},"compile");Qe.exports=T},7007:Qe=>{"use strict";Qe.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(Qe,s,b)=>{"use strict";const R=b(1516),p=b(8641),T=b(3596),w=o((M="",g="",y=!1)=>{let O=[];if(M=[].concat(M),g=[].concat(g),!g.length)return M;if(!M.length)return y?T.flatten(g).map(U=>`{${U}}`):g;for(let U of M)if(Array.isArray(U))for(let _ of U)O.push(w(_,g,y));else for(let _ of g)y===!0&&typeof _=="string"&&(_=`{${_}}`),O.push(Array.isArray(_)?w(U,_,y):U+_);return T.flatten(O)},"append"),J=o((M,g={})=>{let y=g.rangeLimit===void 0?1e3:g.rangeLimit,O=o((U,_={})=>{U.queue=[];let W=_,N=_.queue;for(;W.type!=="brace"&&W.type!=="root"&&W.parent;)W=W.parent,N=W.queue;if(U.invalid||U.dollar){N.push(w(N.pop(),p(U,g)));return}if(U.type==="brace"&&U.invalid!==!0&&U.nodes.length===2){N.push(w(N.pop(),["{}"]));return}if(U.nodes&&U.ranges>0){let H=T.reduce(U.nodes);if(T.exceedsLimit(...H,g.step,y))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let X=R(...H,g);X.length===0&&(X=p(U,g)),N.push(w(N.pop(),X)),U.nodes=[];return}let z=T.encloseBrace(U),Y=U.queue,Ee=U;for(;Ee.type!=="brace"&&Ee.type!=="root"&&Ee.parent;)Ee=Ee.parent,Y=Ee.queue;for(let H=0;H<U.nodes.length;H++){let X=U.nodes[H];if(X.type==="comma"&&U.type==="brace"){H===1&&Y.push(""),Y.push("");continue}if(X.type==="close"){N.push(w(N.pop(),Y,z));continue}if(X.value&&X.type!=="open"){Y.push(w(Y.pop(),X.value));continue}X.nodes&&O(X,U)}return Y},"walk");return T.flatten(O(M))},"expand");Qe.exports=J},5870:(Qe,s,b)=>{"use strict";const R=b(8641),{MAX_LENGTH:p,CHAR_BACKSLASH:T,CHAR_BACKTICK:w,CHAR_COMMA:J,CHAR_DOT:M,CHAR_LEFT_PARENTHESES:g,CHAR_RIGHT_PARENTHESES:y,CHAR_LEFT_CURLY_BRACE:O,CHAR_RIGHT_CURLY_BRACE:U,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_RIGHT_SQUARE_BRACKET:W,CHAR_DOUBLE_QUOTE:N,CHAR_SINGLE_QUOTE:z,CHAR_NO_BREAK_SPACE:Y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ee}=b(7007),H=o((X,Q={})=>{if(typeof X!="string")throw new TypeError("Expected a string");let P=Q||{},B=typeof P.maxLength=="number"?Math.min(p,P.maxLength):p;if(X.length>B)throw new SyntaxError(`Input length (${X.length}), exceeds max characters (${B})`);let K={type:"root",input:X,nodes:[]},q=[K],ne=K,me=K,_e=0,Be=X.length,oe=0,L=0,se,We={};const Fe=o(()=>X[oe++],"advance"),ve=o(F=>{if(F.type==="text"&&me.type==="dot"&&(me.type="text"),me&&me.type==="text"&&F.type==="text"){me.value+=F.value;return}return ne.nodes.push(F),F.parent=ne,F.prev=me,me=F,F},"push");for(ve({type:"bos"});oe<Be;)if(ne=q[q.length-1],se=Fe(),!(se===Ee||se===Y)){if(se===T){ve({type:"text",value:(Q.keepEscaping?se:"")+Fe()});continue}if(se===W){ve({type:"text",value:"\\"+se});continue}if(se===_){_e++;let F=!0,we;for(;oe<Be&&(we=Fe());){if(se+=we,we===_){_e++;continue}if(we===T){se+=Fe();continue}if(we===W&&(_e--,_e===0))break}ve({type:"text",value:se});continue}if(se===g){ne=ve({type:"paren",nodes:[]}),q.push(ne),ve({type:"text",value:se});continue}if(se===y){if(ne.type!=="paren"){ve({type:"text",value:se});continue}ne=q.pop(),ve({type:"text",value:se}),ne=q[q.length-1];continue}if(se===N||se===z||se===w){let F=se,we;for(Q.keepQuotes!==!0&&(se="");oe<Be&&(we=Fe());){if(we===T){se+=we+Fe();continue}if(we===F){Q.keepQuotes===!0&&(se+=we);break}se+=we}ve({type:"text",value:se});continue}if(se===O){L++;let F=me.value&&me.value.slice(-1)==="$"||ne.dollar===!0;ne=ve({type:"brace",open:!0,close:!1,dollar:F,depth:L,commas:0,ranges:0,nodes:[]}),q.push(ne),ve({type:"open",value:se});continue}if(se===U){if(ne.type!=="brace"){ve({type:"text",value:se});continue}let F="close";ne=q.pop(),ne.close=!0,ve({type:F,value:se}),L--,ne=q[q.length-1];continue}if(se===J&&L>0){if(ne.ranges>0){ne.ranges=0;let F=ne.nodes.shift();ne.nodes=[F,{type:"text",value:R(ne)}]}ve({type:"comma",value:se}),ne.commas++;continue}if(se===M&&L>0&&ne.commas===0){let F=ne.nodes;if(L===0||F.length===0){ve({type:"text",value:se});continue}if(me.type==="dot"){if(ne.range=[],me.value+=se,me.type="range",ne.nodes.length!==3&&ne.nodes.length!==5){ne.invalid=!0,ne.ranges=0,me.type="text";continue}ne.ranges++,ne.args=[];continue}if(me.type==="range"){F.pop();let we=F[F.length-1];we.value+=me.value+se,me=we,ne.ranges--;continue}ve({type:"dot",value:se});continue}ve({type:"text",value:se})}do if(ne=q.pop(),ne.type!=="root"){ne.nodes.forEach(Ie=>{Ie.nodes||(Ie.type==="open"&&(Ie.isOpen=!0),Ie.type==="close"&&(Ie.isClose=!0),Ie.nodes||(Ie.type="text"),Ie.invalid=!0)});let F=q[q.length-1],we=F.nodes.indexOf(ne);F.nodes.splice(we,1,...ne.nodes)}while(q.length>0);return ve({type:"eos"}),K},"parse");Qe.exports=H},8641:(Qe,s,b)=>{"use strict";const R=b(3596);Qe.exports=(p,T={})=>{let w=o((J,M={})=>{let g=T.escapeInvalid&&R.isInvalidBrace(M),y=J.invalid===!0&&T.escapeInvalid===!0,O="";if(J.value)return(g||y)&&R.isOpenOrClose(J)?"\\"+J.value:J.value;if(J.value)return J.value;if(J.nodes)for(let U of J.nodes)O+=w(U);return O},"stringify");return w(p)}},3596:(Qe,s)=>{"use strict";s.isInteger=b=>typeof b=="number"?Number.isInteger(b):typeof b=="string"&&b.trim()!==""?Number.isInteger(Number(b)):!1,s.find=(b,R)=>b.nodes.find(p=>p.type===R),s.exceedsLimit=(b,R,p=1,T)=>T===!1||!s.isInteger(b)||!s.isInteger(R)?!1:(Number(R)-Number(b))/Number(p)>=T,s.escapeNode=(b,R=0,p)=>{let T=b.nodes[R];!T||(p&&T.type===p||T.type==="open"||T.type==="close")&&T.escaped!==!0&&(T.value="\\"+T.value,T.escaped=!0)},s.encloseBrace=b=>b.type!=="brace"?!1:b.commas>>0+b.ranges>>0==0?(b.invalid=!0,!0):!1,s.isInvalidBrace=b=>b.type!=="brace"?!1:b.invalid===!0||b.dollar?!0:b.commas>>0+b.ranges>>0==0||b.open!==!0||b.close!==!0?(b.invalid=!0,!0):!1,s.isOpenOrClose=b=>b.type==="open"||b.type==="close"?!0:b.open===!0||b.close===!0,s.reduce=b=>b.reduce((R,p)=>(p.type==="text"&&R.push(p.value),p.type==="range"&&(p.type="text"),R),[]),s.flatten=(...b)=>{const R=[],p=o(T=>{for(let w=0;w<T.length;w++){let J=T[w];Array.isArray(J)?p(J,R):J!==void 0&&R.push(J)}return R},"flat");return p(b),R}},1516:(Qe,s,b)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=b(6529),p=b(2999),T=o(P=>P!==null&&typeof P=="object"&&!Array.isArray(P),"isObject"),w=o(P=>B=>P===!0?Number(B):String(B),"transform"),J=o(P=>typeof P=="number"||typeof P=="string"&&P!=="","isValidValue"),M=o(P=>Number.isInteger(+P),"isNumber"),g=o(P=>{let B=`${P}`,K=-1;if(B[0]==="-"&&(B=B.slice(1)),B==="0")return!1;for(;B[++K]==="0";);return K>0},"zeros"),y=o((P,B,K)=>typeof P=="string"||typeof B=="string"?!0:K.stringify===!0,"stringify"),O=o((P,B,K)=>{if(B>0){let q=P[0]==="-"?"-":"";q&&(P=P.slice(1)),P=q+P.padStart(q?B-1:B,"0")}return K===!1?String(P):P},"pad"),U=o((P,B)=>{let K=P[0]==="-"?"-":"";for(K&&(P=P.slice(1),B--);P.length<B;)P="0"+P;return K?"-"+P:P},"toMaxLen"),_=o((P,B)=>{P.negatives.sort((_e,Be)=>_e<Be?-1:_e>Be?1:0),P.positives.sort((_e,Be)=>_e<Be?-1:_e>Be?1:0);let K=B.capture?"":"?:",q="",ne="",me;return P.positives.length&&(q=P.positives.join("|")),P.negatives.length&&(ne=`-(${K}${P.negatives.join("|")})`),q&&ne?me=`${q}|${ne}`:me=q||ne,B.wrap?`(${K}${me})`:me},"toSequence"),W=o((P,B,K,q)=>{if(K)return p(P,B,{wrap:!1,...q});let ne=String.fromCharCode(P);if(P===B)return ne;let me=String.fromCharCode(B);return`[${ne}-${me}]`},"toRange"),N=o((P,B,K)=>{if(Array.isArray(P)){let q=K.wrap===!0,ne=K.capture?"":"?:";return q?`(${ne}${P.join("|")})`:P.join("|")}return p(P,B,K)},"toRegex"),z=o((...P)=>new RangeError("Invalid range arguments: "+R.inspect(...P)),"rangeError"),Y=o((P,B,K)=>{if(K.strictRanges===!0)throw z([P,B]);return[]},"invalidRange"),Ee=o((P,B)=>{if(B.strictRanges===!0)throw new TypeError(`Expected step "${P}" to be a number`);return[]},"invalidStep"),H=o((P,B,K=1,q={})=>{let ne=Number(P),me=Number(B);if(!Number.isInteger(ne)||!Number.isInteger(me)){if(q.strictRanges===!0)throw z([P,B]);return[]}ne===0&&(ne=0),me===0&&(me=0);let _e=ne>me,Be=String(P),oe=String(B),L=String(K);K=Math.max(Math.abs(K),1);let se=g(Be)||g(oe)||g(L),We=se?Math.max(Be.length,oe.length,L.length):0,Fe=se===!1&&y(P,B,q)===!1,ve=q.transform||w(Fe);if(q.toRegex&&K===1)return W(U(P,We),U(B,We),!0,q);let F={negatives:[],positives:[]},we=o(re=>F[re<0?"negatives":"positives"].push(Math.abs(re)),"push"),Ie=[],Te=0;for(;_e?ne>=me:ne<=me;)q.toRegex===!0&&K>1?we(ne):Ie.push(O(ve(ne,Te),We,Fe)),ne=_e?ne-K:ne+K,Te++;return q.toRegex===!0?K>1?_(F,q):N(Ie,null,{wrap:!1,...q}):Ie},"fillNumbers"),X=o((P,B,K=1,q={})=>{if(!M(P)&&P.length>1||!M(B)&&B.length>1)return Y(P,B,q);let ne=q.transform||(Fe=>String.fromCharCode(Fe)),me=`${P}`.charCodeAt(0),_e=`${B}`.charCodeAt(0),Be=me>_e,oe=Math.min(me,_e),L=Math.max(me,_e);if(q.toRegex&&K===1)return W(oe,L,!1,q);let se=[],We=0;for(;Be?me>=_e:me<=_e;)se.push(ne(me,We)),me=Be?me-K:me+K,We++;return q.toRegex===!0?N(se,null,{wrap:!1,options:q}):se},"fillLetters"),Q=o((P,B,K,q={})=>{if(B==null&&J(P))return[P];if(!J(P)||!J(B))return Y(P,B,q);if(typeof K=="function")return Q(P,B,1,{transform:K});if(T(K))return Q(P,B,0,K);let ne={...q};return ne.capture===!0&&(ne.wrap=!0),K=K||ne.step||1,M(K)?M(P)&&M(B)?H(P,B,K,ne):X(P,B,Math.max(Math.abs(K),1),ne):K!=null&&!T(K)?Ee(K,ne):Q(P,B,1,K)},"fill");Qe.exports=Q},3338:Qe=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */Qe.exports=function(s){return typeof s=="number"?s-s==0:typeof s=="string"&&s.trim()!==""?Number.isFinite?Number.isFinite(+s):isFinite(+s):!1}},5179:(Qe,s,b)=>{Qe=b.nmd(Qe);var R=200,p="__lodash_hash_undefined__",T=1,w=2,J=9007199254740991,M="[object Arguments]",g="[object Array]",y="[object AsyncFunction]",O="[object Boolean]",U="[object Date]",_="[object Error]",W="[object Function]",N="[object GeneratorFunction]",z="[object Map]",Y="[object Number]",Ee="[object Null]",H="[object Object]",X="[object Promise]",Q="[object Proxy]",P="[object RegExp]",B="[object Set]",K="[object String]",q="[object Symbol]",ne="[object Undefined]",me="[object WeakMap]",_e="[object ArrayBuffer]",Be="[object DataView]",oe="[object Float32Array]",L="[object Float64Array]",se="[object Int8Array]",We="[object Int16Array]",Fe="[object Int32Array]",ve="[object Uint8Array]",F="[object Uint8ClampedArray]",we="[object Uint16Array]",Ie="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,vt=/^(?:0|[1-9]\d*)$/,Ze={};Ze[oe]=Ze[L]=Ze[se]=Ze[We]=Ze[Fe]=Ze[ve]=Ze[F]=Ze[we]=Ze[Ie]=!0,Ze[M]=Ze[g]=Ze[_e]=Ze[O]=Ze[Be]=Ze[U]=Ze[_]=Ze[W]=Ze[z]=Ze[Y]=Ze[H]=Ze[P]=Ze[B]=Ze[K]=Ze[me]=!1;var Ge=typeof b.g=="object"&&b.g&&b.g.Object===Object&&b.g,k=typeof self=="object"&&self&&self.Object===Object&&self,V=Ge||k||Function("return this")(),ee=s&&!s.nodeType&&s,he=ee&&!0&&Qe&&!Qe.nodeType&&Qe,Je=he&&he.exports===ee,nt=Je&&Ge.process,pe=function(){try{return nt&&nt.binding&&nt.binding("util")}catch(S){}}(),Ae=pe&&pe.isTypedArray;function Se(S,$){for(var de=-1,Oe=S==null?0:S.length,mt=0,it=[];++de<Oe;){var fe=S[de];$(fe,de,S)&&(it[mt++]=fe)}return it}o(Se,"arrayFilter");function ie(S,$){for(var de=-1,Oe=$.length,mt=S.length;++de<Oe;)S[mt+de]=$[de];return S}o(ie,"arrayPush");function Re(S,$){for(var de=-1,Oe=S==null?0:S.length;++de<Oe;)if($(S[de],de,S))return!0;return!1}o(Re,"arraySome");function ge(S,$){for(var de=-1,Oe=Array(S);++de<S;)Oe[de]=$(de);return Oe}o(ge,"baseTimes");function tt(S){return function($){return S($)}}o(tt,"baseUnary");function Ne(S,$){return S.has($)}o(Ne,"cacheHas");function A(S,$){return S==null?void 0:S[$]}o(A,"getValue");function G(S){var $=-1,de=Array(S.size);return S.forEach(function(Oe,mt){de[++$]=[mt,Oe]}),de}o(G,"mapToArray");function ue(S,$){return function(de){return S($(de))}}o(ue,"overArg");function je(S){var $=-1,de=Array(S.size);return S.forEach(function(Oe){de[++$]=Oe}),de}o(je,"setToArray");var Ye=Array.prototype,_t=Function.prototype,qe=Object.prototype,At=V["__core-js_shared__"],wt=_t.toString,dn=qe.hasOwnProperty,pn=function(){var S=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),In=qe.toString,Un=RegExp("^"+wt.call(dn).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=Je?V.Buffer:void 0,Lt=V.Symbol,Qt=V.Uint8Array,Tt=qe.propertyIsEnumerable,Xt=Ye.splice,ht=Lt?Lt.toStringTag:void 0,sn=Object.getOwnPropertySymbols,Yt=et?et.isBuffer:void 0,an=ue(Object.keys,Object),hn=hr(V,"DataView"),Rn=hr(V,"Map"),Tn=hr(V,"Promise"),xr=hr(V,"Set"),pr=hr(V,"WeakMap"),bn=hr(Object,"create"),Kr=wr(hn),Yr=wr(Rn),fr=wr(Tn),ri=wr(xr),qr=wr(pr),Gr=Lt?Lt.prototype:void 0,Z=Gr?Gr.valueOf:void 0;function ze(S){var $=-1,de=S==null?0:S.length;for(this.clear();++$<de;){var Oe=S[$];this.set(Oe[0],Oe[1])}}o(ze,"Hash");function ot(){this.__data__=bn?bn(null):{},this.size=0}o(ot,"hashClear");function pt(S){var $=this.has(S)&&delete this.__data__[S];return this.size-=$?1:0,$}o(pt,"hashDelete");function Ht(S){var $=this.__data__;if(bn){var de=$[S];return de===p?void 0:de}return dn.call($,S)?$[S]:void 0}o(Ht,"hashGet");function Bt(S){var $=this.__data__;return bn?$[S]!==void 0:dn.call($,S)}o(Bt,"hashHas");function Mn(S,$){var de=this.__data__;return this.size+=this.has(S)?0:1,de[S]=bn&&$===void 0?p:$,this}o(Mn,"hashSet"),ze.prototype.clear=ot,ze.prototype.delete=pt,ze.prototype.get=Ht,ze.prototype.has=Bt,ze.prototype.set=Mn;function Ut(S){var $=-1,de=S==null?0:S.length;for(this.clear();++$<de;){var Oe=S[$];this.set(Oe[0],Oe[1])}}o(Ut,"ListCache");function yt(){this.__data__=[],this.size=0}o(yt,"listCacheClear");function Dt(S){var $=this.__data__,de=_n($,S);if(de<0)return!1;var Oe=$.length-1;return de==Oe?$.pop():Xt.call($,de,1),--this.size,!0}o(Dt,"listCacheDelete");function xt(S){var $=this.__data__,de=_n($,S);return de<0?void 0:$[de][1]}o(xt,"listCacheGet");function dt(S){return _n(this.__data__,S)>-1}o(dt,"listCacheHas");function ln(S,$){var de=this.__data__,Oe=_n(de,S);return Oe<0?(++this.size,de.push([S,$])):de[Oe][1]=$,this}o(ln,"listCacheSet"),Ut.prototype.clear=yt,Ut.prototype.delete=Dt,Ut.prototype.get=xt,Ut.prototype.has=dt,Ut.prototype.set=ln;function zt(S){var $=-1,de=S==null?0:S.length;for(this.clear();++$<de;){var Oe=S[$];this.set(Oe[0],Oe[1])}}o(zt,"MapCache");function St(){this.size=0,this.__data__={hash:new ze,map:new(Rn||Ut),string:new ze}}o(St,"mapCacheClear");function en(S){var $=tr(this,S).delete(S);return this.size-=$?1:0,$}o(en,"mapCacheDelete");function un(S){return tr(this,S).get(S)}o(un,"mapCacheGet");function Sn(S){return tr(this,S).has(S)}o(Sn,"mapCacheHas");function yn(S,$){var de=tr(this,S),Oe=de.size;return de.set(S,$),this.size+=de.size==Oe?0:1,this}o(yn,"mapCacheSet"),zt.prototype.clear=St,zt.prototype.delete=en,zt.prototype.get=un,zt.prototype.has=Sn,zt.prototype.set=yn;function Wn(S){var $=-1,de=S==null?0:S.length;for(this.__data__=new zt;++$<de;)this.add(S[$])}o(Wn,"SetCache");function Ln(S){return this.__data__.set(S,p),this}o(Ln,"setCacheAdd");function Hn(S){return this.__data__.has(S)}o(Hn,"setCacheHas"),Wn.prototype.add=Wn.prototype.push=Ln,Wn.prototype.has=Hn;function wn(S){var $=this.__data__=new Ut(S);this.size=$.size}o(wn,"Stack");function Pt(){this.__data__=new Ut,this.size=0}o(Pt,"stackClear");function on(S){var $=this.__data__,de=$.delete(S);return this.size=$.size,de}o(on,"stackDelete");function kt(S){return this.__data__.get(S)}o(kt,"stackGet");function Dn(S){return this.__data__.has(S)}o(Dn,"stackHas");function Nt(S,$){var de=this.__data__;if(de instanceof Ut){var Oe=de.__data__;if(!Rn||Oe.length<R-1)return Oe.push([S,$]),this.size=++de.size,this;de=this.__data__=new zt(Oe)}return de.set(S,$),this.size=de.size,this}o(Nt,"stackSet"),wn.prototype.clear=Pt,wn.prototype.delete=on,wn.prototype.get=kt,wn.prototype.has=Dn,wn.prototype.set=Nt;function gn(S,$){var de=kr(S),Oe=!de&&Hr(S),mt=!de&&!Oe&&$n(S),it=!de&&!Oe&&!mt&&zn(S),fe=de||Oe||mt||it,Ce=fe?ge(S.length,String):[],Le=Ce.length;for(var Ve in S)($||dn.call(S,Ve))&&!(fe&&(Ve=="length"||mt&&(Ve=="offset"||Ve=="parent")||it&&(Ve=="buffer"||Ve=="byteLength"||Ve=="byteOffset")||Xn(Ve,Le)))&&Ce.push(Ve);return Ce}o(gn,"arrayLikeKeys");function _n(S,$){for(var de=S.length;de--;)if(ii(S[de][0],$))return de;return-1}o(_n,"assocIndexOf");function Nn(S,$,de){var Oe=$(S);return kr(S)?Oe:ie(Oe,de(S))}o(Nn,"baseGetAllKeys");function tn(S){return S==null?S===void 0?ne:Ee:ht&&ht in Object(S)?Qn(S):or(S)}o(tn,"baseGetTag");function xn(S){return Kn(S)&&tn(S)==M}o(xn,"baseIsArguments");function Yn(S,$,de,Oe,mt){return S===$?!0:S==null||$==null||!Kn(S)&&!Kn($)?S!==S&&$!==$:Fn(S,$,de,Oe,Yn,mt)}o(Yn,"baseIsEqual");function Fn(S,$,de,Oe,mt,it){var fe=kr(S),Ce=kr($),Le=fe?g:nr(S),Ve=Ce?g:nr($);Le=Le==M?H:Le,Ve=Ve==M?H:Ve;var ct=Le==H,gt=Ve==H,Mt=Le==Ve;if(Mt&&$n(S)){if(!$n($))return!1;fe=!0,ct=!1}if(Mt&&!ct)return it||(it=new wn),fe||zn(S)?Vt(S,$,de,Oe,mt,it):Ft(S,$,Le,de,Oe,mt,it);if(!(de&T)){var Et=ct&&dn.call(S,"__wrapped__"),qt=gt&&dn.call($,"__wrapped__");if(Et||qt){var Pn=Et?S.value():S,Gt=qt?$.value():$;return it||(it=new wn),mt(Pn,Gt,de,Oe,it)}}return Mt?(it||(it=new wn),ar(S,$,de,Oe,mt,it)):!1}o(Fn,"baseIsEqualDeep");function qn(S){if(!Jr(S)||gr(S))return!1;var $=sr(S)?Un:re;return $.test(wr(S))}o(qn,"baseIsNative");function Bn(S){return Kn(S)&&nn(S.length)&&!!Ze[tn(S)]}o(Bn,"baseIsTypedArray");function Gn(S){if(!yr(S))return an(S);var $=[];for(var de in Object(S))dn.call(S,de)&&de!="constructor"&&$.push(de);return $}o(Gn,"baseKeys");function Vt(S,$,de,Oe,mt,it){var fe=de&T,Ce=S.length,Le=$.length;if(Ce!=Le&&!(fe&&Le>Ce))return!1;var Ve=it.get(S);if(Ve&&it.get($))return Ve==$;var ct=-1,gt=!0,Mt=de&w?new Wn:void 0;for(it.set(S,$),it.set($,S);++ct<Ce;){var Et=S[ct],qt=$[ct];if(Oe)var Pn=fe?Oe(qt,Et,ct,$,S,it):Oe(Et,qt,ct,S,$,it);if(Pn!==void 0){if(Pn)continue;gt=!1;break}if(Mt){if(!Re($,function(Gt,Zn){if(!Ne(Mt,Zn)&&(Et===Gt||mt(Et,Gt,de,Oe,it)))return Mt.push(Zn)})){gt=!1;break}}else if(!(Et===qt||mt(Et,qt,de,Oe,it))){gt=!1;break}}return it.delete(S),it.delete($),gt}o(Vt,"equalArrays");function Ft(S,$,de,Oe,mt,it,fe){switch(de){case Be:if(S.byteLength!=$.byteLength||S.byteOffset!=$.byteOffset)return!1;S=S.buffer,$=$.buffer;case _e:return!(S.byteLength!=$.byteLength||!it(new Qt(S),new Qt($)));case O:case U:case Y:return ii(+S,+$);case _:return S.name==$.name&&S.message==$.message;case P:case K:return S==$+"";case z:var Ce=G;case B:var Le=Oe&T;if(Ce||(Ce=je),S.size!=$.size&&!Le)return!1;var Ve=fe.get(S);if(Ve)return Ve==$;Oe|=w,fe.set(S,$);var ct=Vt(Ce(S),Ce($),Oe,mt,it,fe);return fe.delete(S),ct;case q:if(Z)return Z.call(S)==Z.call($)}return!1}o(Ft,"equalByTag");function ar(S,$,de,Oe,mt,it){var fe=de&T,Ce=Or(S),Le=Ce.length,Ve=Or($),ct=Ve.length;if(Le!=ct&&!fe)return!1;for(var gt=Le;gt--;){var Mt=Ce[gt];if(!(fe?Mt in $:dn.call($,Mt)))return!1}var Et=it.get(S);if(Et&&it.get($))return Et==$;var qt=!0;it.set(S,$),it.set($,S);for(var Pn=fe;++gt<Le;){Mt=Ce[gt];var Gt=S[Mt],Zn=$[Mt];if(Oe)var er=fe?Oe(Zn,Gt,Mt,$,S,it):Oe(Gt,Zn,Mt,S,$,it);if(!(er===void 0?Gt===Zn||mt(Gt,Zn,de,Oe,it):er)){qt=!1;break}Pn||(Pn=Mt=="constructor")}if(qt&&!Pn){var lr=S.constructor,Ar=$.constructor;lr!=Ar&&"constructor"in S&&"constructor"in $&&!(typeof lr=="function"&&lr instanceof lr&&typeof Ar=="function"&&Ar instanceof Ar)&&(qt=!1)}return it.delete(S),it.delete($),qt}o(ar,"equalObjects");function Or(S){return Nn(S,rr,Pr)}o(Or,"getAllKeys");function tr(S,$){var de=S.__data__;return zr($)?de[typeof $=="string"?"string":"hash"]:de.map}o(tr,"getMapData");function hr(S,$){var de=A(S,$);return qn(de)?de:void 0}o(hr,"getNative");function Qn(S){var $=dn.call(S,ht),de=S[ht];try{S[ht]=void 0;var Oe=!0}catch(it){}var mt=In.call(S);return Oe&&($?S[ht]=de:delete S[ht]),mt}o(Qn,"getRawTag");var Pr=sn?function(S){return S==null?[]:(S=Object(S),Se(sn(S),function($){return Tt.call(S,$)}))}:On,nr=tn;(hn&&nr(new hn(new ArrayBuffer(1)))!=Be||Rn&&nr(new Rn)!=z||Tn&&nr(Tn.resolve())!=X||xr&&nr(new xr)!=B||pr&&nr(new pr)!=me)&&(nr=o(function(S){var $=tn(S),de=$==H?S.constructor:void 0,Oe=de?wr(de):"";if(Oe)switch(Oe){case Kr:return Be;case Yr:return z;case fr:return X;case ri:return B;case qr:return me}return $},"getTag"));function Xn(S,$){return $=$==null?J:$,!!$&&(typeof S=="number"||vt.test(S))&&S>-1&&S%1==0&&S<$}o(Xn,"isIndex");function zr(S){var $=typeof S;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?S!=="__proto__":S===null}o(zr,"isKeyable");function gr(S){return!!pn&&pn in S}o(gr,"isMasked");function yr(S){var $=S&&S.constructor,de=typeof $=="function"&&$.prototype||qe;return S===de}o(yr,"isPrototype");function or(S){return In.call(S)}o(or,"objectToString");function wr(S){if(S!=null){try{return wt.call(S)}catch($){}try{return S+""}catch($){}}return""}o(wr,"toSource");function ii(S,$){return S===$||S!==S&&$!==$}o(ii,"eq");var Hr=xn(function(){return arguments}())?xn:function(S){return Kn(S)&&dn.call(S,"callee")&&!Tt.call(S,"callee")},kr=Array.isArray;function ai(S){return S!=null&&nn(S.length)&&!sr(S)}o(ai,"isArrayLike");var $n=Yt||ye;function oi(S,$){return Yn(S,$)}o(oi,"isEqual");function sr(S){if(!Jr(S))return!1;var $=tn(S);return $==W||$==N||$==y||$==Q}o(sr,"isFunction");function nn(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=J}o(nn,"isLength");function Jr(S){var $=typeof S;return S!=null&&($=="object"||$=="function")}o(Jr,"isObject");function Kn(S){return S!=null&&typeof S=="object"}o(Kn,"isObjectLike");var zn=Ae?tt(Ae):Bn;function rr(S){return ai(S)?gn(S):Gn(S)}o(rr,"keys");function On(){return[]}o(On,"stubArray");function ye(){return!1}o(ye,"stubFalse"),Qe.exports=oi},919:(Qe,s,b)=>{"use strict";const R=b(6391),p=b(6232),T=b(6796),w=b(292),J=o(g=>g===""||g==="./","isEmptyString"),M=o((g,y,O)=>{y=[].concat(y),g=[].concat(g);let U=new Set,_=new Set,W=new Set,N=0,z=o(H=>{W.add(H.output),O&&O.onResult&&O.onResult(H)},"onResult");for(let H=0;H<y.length;H++){let X=T(String(y[H]),{...O,onResult:z},!0),Q=X.state.negated||X.state.negatedExtglob;Q&&N++;for(let P of g){let B=X(P,!0);!(Q?!B.isMatch:B.isMatch)||(Q?U.add(B.output):(U.delete(B.output),_.add(B.output)))}}let Ee=(N===y.length?[...W]:[..._]).filter(H=>!U.has(H));if(O&&Ee.length===0){if(O.failglob===!0)throw new Error(`No matches found for "${y.join(", ")}"`);if(O.nonull===!0||O.nullglob===!0)return O.unescape?y.map(H=>H.replace(/\\/g,"")):y}return Ee},"micromatch");M.match=M,M.matcher=(g,y)=>T(g,y),M.isMatch=(g,y,O)=>T(y,O)(g),M.any=M.isMatch,M.not=(g,y,O={})=>{y=[].concat(y).map(String);let U=new Set,_=[],W=o(z=>{O.onResult&&O.onResult(z),_.push(z.output)},"onResult"),N=new Set(M(g,y,{...O,onResult:W}));for(let z of _)N.has(z)||U.add(z);return[...U]},M.contains=(g,y,O)=>{if(typeof g!="string")throw new TypeError(`Expected a string: "${R.inspect(g)}"`);if(Array.isArray(y))return y.some(U=>M.contains(g,U,O));if(typeof y=="string"){if(J(g)||J(y))return!1;if(g.includes(y)||g.startsWith("./")&&g.slice(2).includes(y))return!0}return M.isMatch(g,y,{...O,contains:!0})},M.matchKeys=(g,y,O)=>{if(!w.isObject(g))throw new TypeError("Expected the first argument to be an object");let U=M(Object.keys(g),y,O),_={};for(let W of U)_[W]=g[W];return _},M.some=(g,y,O)=>{let U=[].concat(g);for(let _ of[].concat(y)){let W=T(String(_),O);if(U.some(N=>W(N)))return!0}return!1},M.every=(g,y,O)=>{let U=[].concat(g);for(let _ of[].concat(y)){let W=T(String(_),O);if(!U.every(N=>W(N)))return!1}return!0},M.all=(g,y,O)=>{if(typeof g!="string")throw new TypeError(`Expected a string: "${R.inspect(g)}"`);return[].concat(y).every(U=>T(U,O)(g))},M.capture=(g,y,O)=>{let U=w.isWindows(O),W=T.makeRe(String(g),{...O,capture:!0}).exec(U?w.toPosixSlashes(y):y);if(W)return W.slice(1).map(N=>N===void 0?"":N)},M.makeRe=(...g)=>T.makeRe(...g),M.scan=(...g)=>T.scan(...g),M.parse=(g,y)=>{let O=[];for(let U of[].concat(g||[]))for(let _ of p(String(U),y))O.push(T.parse(_,y));return O},M.braces=(g,y)=>{if(typeof g!="string")throw new TypeError("Expected a string");return y&&y.nobrace===!0||!/\{.*\}/.test(g)?[g]:p(g,y)},M.braceExpand=(g,y)=>{if(typeof g!="string")throw new TypeError("Expected a string");return M.braces(g,{...y,expand:!0})},Qe.exports=M},6796:(Qe,s,b)=>{"use strict";Qe.exports=b(5761)},3889:(Qe,s,b)=>{"use strict";const R=b(6470),p="\\\\/",T=`[^${p}]`,w="\\.",J="\\+",M="\\?",g="\\/",y="(?=.)",O="[^/]",U=`(?:${g}|$)`,_=`(?:^|${g})`,W=`${w}{1,2}${U}`,N=`(?!${w})`,z=`(?!${_}${W})`,Y=`(?!${w}{0,1}${U})`,Ee=`(?!${W})`,H=`[^.${g}]`,X=`${O}*?`,Q={DOT_LITERAL:w,PLUS_LITERAL:J,QMARK_LITERAL:M,SLASH_LITERAL:g,ONE_CHAR:y,QMARK:O,END_ANCHOR:U,DOTS_SLASH:W,NO_DOT:N,NO_DOTS:z,NO_DOT_SLASH:Y,NO_DOTS_SLASH:Ee,QMARK_NO_DOT:H,STAR:X,START_ANCHOR:_},P={...Q,SLASH_LITERAL:`[${p}]`,QMARK:T,STAR:`${T}*?`,DOTS_SLASH:`${w}{1,2}(?:[${p}]|$)`,NO_DOT:`(?!${w})`,NO_DOTS:`(?!(?:^|[${p}])${w}{1,2}(?:[${p}]|$))`,NO_DOT_SLASH:`(?!${w}{0,1}(?:[${p}]|$))`,NO_DOTS_SLASH:`(?!${w}{1,2}(?:[${p}]|$))`,QMARK_NO_DOT:`[^.${p}]`,START_ANCHOR:`(?:^|[${p}])`,END_ANCHOR:`(?:[${p}]|$)`},B={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Qe.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:B,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(K){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${K.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(K){return K===!0?P:Q}}},3969:(Qe,s,b)=>{"use strict";const R=b(3889),p=b(292),{MAX_LENGTH:T,POSIX_REGEX_SOURCE:w,REGEX_NON_SPECIAL_CHARS:J,REGEX_SPECIAL_CHARS_BACKREF:M,REPLACEMENTS:g}=R,y=o((_,W)=>{if(typeof W.expandRange=="function")return W.expandRange(..._,W);_.sort();const N=`[${_.join("-")}]`;try{new RegExp(N)}catch(z){return _.map(Y=>p.escapeRegex(Y)).join("..")}return N},"expandRange"),O=o((_,W)=>`Missing ${_}: "${W}" - use "\\\\${W}" to match literal characters`,"syntaxError"),U=o((_,W)=>{if(typeof _!="string")throw new TypeError("Expected a string");_=g[_]||_;const N={...W},z=typeof N.maxLength=="number"?Math.min(T,N.maxLength):T;let Y=_.length;if(Y>z)throw new SyntaxError(`Input length: ${Y}, exceeds maximum allowed length: ${z}`);const Ee={type:"bos",value:"",output:N.prepend||""},H=[Ee],X=N.capture?"":"?:",Q=p.isWindows(W),P=R.globChars(Q),B=R.extglobChars(P),{DOT_LITERAL:K,PLUS_LITERAL:q,SLASH_LITERAL:ne,ONE_CHAR:me,DOTS_SLASH:_e,NO_DOT:Be,NO_DOT_SLASH:oe,NO_DOTS_SLASH:L,QMARK:se,QMARK_NO_DOT:We,STAR:Fe,START_ANCHOR:ve}=P,F=o(A=>`(${X}(?:(?!${ve}${A.dot?_e:K}).)*?)`,"globstar"),we=N.dot?"":Be,Ie=N.dot?se:We;let Te=N.bash===!0?F(N):Fe;N.capture&&(Te=`(${Te})`),typeof N.noext=="boolean"&&(N.noextglob=N.noext);const re={input:_,index:-1,start:0,dot:N.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:H};_=p.removePrefix(_,re),Y=_.length;const vt=[],Ze=[],Ge=[];let k=Ee,V;const ee=o(()=>re.index===Y-1,"eos"),he=re.peek=(A=1)=>_[re.index+A],Je=re.advance=()=>_[++re.index]||"",nt=o(()=>_.slice(re.index+1),"remaining"),pe=o((A="",G=0)=>{re.consumed+=A,re.index+=G},"consume"),Ae=o(A=>{re.output+=A.output!=null?A.output:A.value,pe(A.value)},"append"),Se=o(()=>{let A=1;for(;he()==="!"&&(he(2)!=="("||he(3)==="?");)Je(),re.start++,A++;return A%2==0?!1:(re.negated=!0,re.start++,!0)},"negate"),ie=o(A=>{re[A]++,Ge.push(A)},"increment"),Re=o(A=>{re[A]--,Ge.pop()},"decrement"),ge=o(A=>{if(k.type==="globstar"){const G=re.braces>0&&(A.type==="comma"||A.type==="brace"),ue=A.extglob===!0||vt.length&&(A.type==="pipe"||A.type==="paren");A.type!=="slash"&&A.type!=="paren"&&!G&&!ue&&(re.output=re.output.slice(0,-k.output.length),k.type="star",k.value="*",k.output=Te,re.output+=k.output)}if(vt.length&&A.type!=="paren"&&(vt[vt.length-1].inner+=A.value),(A.value||A.output)&&Ae(A),k&&k.type==="text"&&A.type==="text"){k.value+=A.value,k.output=(k.output||"")+A.value;return}A.prev=k,H.push(A),k=A},"push"),tt=o((A,G)=>{const ue={...B[G],conditions:1,inner:""};ue.prev=k,ue.parens=re.parens,ue.output=re.output;const je=(N.capture?"(":"")+ue.open;ie("parens"),ge({type:A,value:G,output:re.output?"":me}),ge({type:"paren",extglob:!0,value:Je(),output:je}),vt.push(ue)},"extglobOpen"),Ne=o(A=>{let G=A.close+(N.capture?")":""),ue;if(A.type==="negate"){let je=Te;if(A.inner&&A.inner.length>1&&A.inner.includes("/")&&(je=F(N)),(je!==Te||ee()||/^\)+$/.test(nt()))&&(G=A.close=`)$))${je}`),A.inner.includes("*")&&(ue=nt())&&/^\.[^\\/.]+$/.test(ue)){const Ye=U(ue,{...W,fastpaths:!1}).output;G=A.close=`)${Ye})${je})`}A.prev.type==="bos"&&(re.negatedExtglob=!0)}ge({type:"paren",extglob:!0,value:V,output:G}),Re("parens")},"extglobClose");if(N.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(_)){let A=!1,G=_.replace(M,(ue,je,Ye,_t,qe,At)=>_t==="\\"?(A=!0,ue):_t==="?"?je?je+_t+(qe?se.repeat(qe.length):""):At===0?Ie+(qe?se.repeat(qe.length):""):se.repeat(Ye.length):_t==="."?K.repeat(Ye.length):_t==="*"?je?je+_t+(qe?Te:""):Te:je?ue:`\\${ue}`);return A===!0&&(N.unescape===!0?G=G.replace(/\\/g,""):G=G.replace(/\\+/g,ue=>ue.length%2==0?"\\\\":ue?"\\":"")),G===_&&N.contains===!0?(re.output=_,re):(re.output=p.wrapOutput(G,re,W),re)}for(;!ee();){if(V=Je(),V==="\0")continue;if(V==="\\"){const ue=he();if(ue==="/"&&N.bash!==!0||ue==="."||ue===";")continue;if(!ue){V+="\\",ge({type:"text",value:V});continue}const je=/^\\+/.exec(nt());let Ye=0;if(je&&je[0].length>2&&(Ye=je[0].length,re.index+=Ye,Ye%2!=0&&(V+="\\")),N.unescape===!0?V=Je():V+=Je(),re.brackets===0){ge({type:"text",value:V});continue}}if(re.brackets>0&&(V!=="]"||k.value==="["||k.value==="[^")){if(N.posix!==!1&&V===":"){const ue=k.value.slice(1);if(ue.includes("[")&&(k.posix=!0,ue.includes(":"))){const je=k.value.lastIndexOf("["),Ye=k.value.slice(0,je),_t=k.value.slice(je+2),qe=w[_t];if(qe){k.value=Ye+qe,re.backtrack=!0,Je(),!Ee.output&&H.indexOf(k)===1&&(Ee.output=me);continue}}}(V==="["&&he()!==":"||V==="-"&&he()==="]")&&(V=`\\${V}`),V==="]"&&(k.value==="["||k.value==="[^")&&(V=`\\${V}`),N.posix===!0&&V==="!"&&k.value==="["&&(V="^"),k.value+=V,Ae({value:V});continue}if(re.quotes===1&&V!=='"'){V=p.escapeRegex(V),k.value+=V,Ae({value:V});continue}if(V==='"'){re.quotes=re.quotes===1?0:1,N.keepQuotes===!0&&ge({type:"text",value:V});continue}if(V==="("){ie("parens"),ge({type:"paren",value:V});continue}if(V===")"){if(re.parens===0&&N.strictBrackets===!0)throw new SyntaxError(O("opening","("));const ue=vt[vt.length-1];if(ue&&re.parens===ue.parens+1){Ne(vt.pop());continue}ge({type:"paren",value:V,output:re.parens?")":"\\)"}),Re("parens");continue}if(V==="["){if(N.nobracket===!0||!nt().includes("]")){if(N.nobracket!==!0&&N.strictBrackets===!0)throw new SyntaxError(O("closing","]"));V=`\\${V}`}else ie("brackets");ge({type:"bracket",value:V});continue}if(V==="]"){if(N.nobracket===!0||k&&k.type==="bracket"&&k.value.length===1){ge({type:"text",value:V,output:`\\${V}`});continue}if(re.brackets===0){if(N.strictBrackets===!0)throw new SyntaxError(O("opening","["));ge({type:"text",value:V,output:`\\${V}`});continue}Re("brackets");const ue=k.value.slice(1);if(k.posix!==!0&&ue[0]==="^"&&!ue.includes("/")&&(V=`/${V}`),k.value+=V,Ae({value:V}),N.literalBrackets===!1||p.hasRegexChars(ue))continue;const je=p.escapeRegex(k.value);if(re.output=re.output.slice(0,-k.value.length),N.literalBrackets===!0){re.output+=je,k.value=je;continue}k.value=`(${X}${je}|${k.value})`,re.output+=k.value;continue}if(V==="{"&&N.nobrace!==!0){ie("braces");const ue={type:"brace",value:V,output:"(",outputIndex:re.output.length,tokensIndex:re.tokens.length};Ze.push(ue),ge(ue);continue}if(V==="}"){const ue=Ze[Ze.length-1];if(N.nobrace===!0||!ue){ge({type:"text",value:V,output:V});continue}let je=")";if(ue.dots===!0){const Ye=H.slice(),_t=[];for(let qe=Ye.length-1;qe>=0&&(H.pop(),Ye[qe].type!=="brace");qe--)Ye[qe].type!=="dots"&&_t.unshift(Ye[qe].value);je=y(_t,N),re.backtrack=!0}if(ue.comma!==!0&&ue.dots!==!0){const Ye=re.output.slice(0,ue.outputIndex),_t=re.tokens.slice(ue.tokensIndex);ue.value=ue.output="\\{",V=je="\\}",re.output=Ye;for(const qe of _t)re.output+=qe.output||qe.value}ge({type:"brace",value:V,output:je}),Re("braces"),Ze.pop();continue}if(V==="|"){vt.length>0&&vt[vt.length-1].conditions++,ge({type:"text",value:V});continue}if(V===","){let ue=V;const je=Ze[Ze.length-1];je&&Ge[Ge.length-1]==="braces"&&(je.comma=!0,ue="|"),ge({type:"comma",value:V,output:ue});continue}if(V==="/"){if(k.type==="dot"&&re.index===re.start+1){re.start=re.index+1,re.consumed="",re.output="",H.pop(),k=Ee;continue}ge({type:"slash",value:V,output:ne});continue}if(V==="."){if(re.braces>0&&k.type==="dot"){k.value==="."&&(k.output=K);const ue=Ze[Ze.length-1];k.type="dots",k.output+=V,k.value+=V,ue.dots=!0;continue}if(re.braces+re.parens===0&&k.type!=="bos"&&k.type!=="slash"){ge({type:"text",value:V,output:K});continue}ge({type:"dot",value:V,output:K});continue}if(V==="?"){if(!(k&&k.value==="(")&&N.noextglob!==!0&&he()==="("&&he(2)!=="?"){tt("qmark",V);continue}if(k&&k.type==="paren"){const je=he();let Ye=V;if(je==="<"&&!p.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(k.value==="("&&!/[!=<:]/.test(je)||je==="<"&&!/<([!=]|\w+>)/.test(nt()))&&(Ye=`\\${V}`),ge({type:"text",value:V,output:Ye});continue}if(N.dot!==!0&&(k.type==="slash"||k.type==="bos")){ge({type:"qmark",value:V,output:We});continue}ge({type:"qmark",value:V,output:se});continue}if(V==="!"){if(N.noextglob!==!0&&he()==="("&&(he(2)!=="?"||!/[!=<:]/.test(he(3)))){tt("negate",V);continue}if(N.nonegate!==!0&&re.index===0){Se();continue}}if(V==="+"){if(N.noextglob!==!0&&he()==="("&&he(2)!=="?"){tt("plus",V);continue}if(k&&k.value==="("||N.regex===!1){ge({type:"plus",value:V,output:q});continue}if(k&&(k.type==="bracket"||k.type==="paren"||k.type==="brace")||re.parens>0){ge({type:"plus",value:V});continue}ge({type:"plus",value:q});continue}if(V==="@"){if(N.noextglob!==!0&&he()==="("&&he(2)!=="?"){ge({type:"at",extglob:!0,value:V,output:""});continue}ge({type:"text",value:V});continue}if(V!=="*"){(V==="$"||V==="^")&&(V=`\\${V}`);const ue=J.exec(nt());ue&&(V+=ue[0],re.index+=ue[0].length),ge({type:"text",value:V});continue}if(k&&(k.type==="globstar"||k.star===!0)){k.type="star",k.star=!0,k.value+=V,k.output=Te,re.backtrack=!0,re.globstar=!0,pe(V);continue}let A=nt();if(N.noextglob!==!0&&/^\([^?]/.test(A)){tt("star",V);continue}if(k.type==="star"){if(N.noglobstar===!0){pe(V);continue}const ue=k.prev,je=ue.prev,Ye=ue.type==="slash"||ue.type==="bos",_t=je&&(je.type==="star"||je.type==="globstar");if(N.bash===!0&&(!Ye||A[0]&&A[0]!=="/")){ge({type:"star",value:V,output:""});continue}const qe=re.braces>0&&(ue.type==="comma"||ue.type==="brace"),At=vt.length&&(ue.type==="pipe"||ue.type==="paren");if(!Ye&&ue.type!=="paren"&&!qe&&!At){ge({type:"star",value:V,output:""});continue}for(;A.slice(0,3)==="/**";){const wt=_[re.index+4];if(wt&&wt!=="/")break;A=A.slice(3),pe("/**",3)}if(ue.type==="bos"&&ee()){k.type="globstar",k.value+=V,k.output=F(N),re.output=k.output,re.globstar=!0,pe(V);continue}if(ue.type==="slash"&&ue.prev.type!=="bos"&&!_t&&ee()){re.output=re.output.slice(0,-(ue.output+k.output).length),ue.output=`(?:${ue.output}`,k.type="globstar",k.output=F(N)+(N.strictSlashes?")":"|$)"),k.value+=V,re.globstar=!0,re.output+=ue.output+k.output,pe(V);continue}if(ue.type==="slash"&&ue.prev.type!=="bos"&&A[0]==="/"){const wt=A[1]!==void 0?"|$":"";re.output=re.output.slice(0,-(ue.output+k.output).length),ue.output=`(?:${ue.output}`,k.type="globstar",k.output=`${F(N)}${ne}|${ne}${wt})`,k.value+=V,re.output+=ue.output+k.output,re.globstar=!0,pe(V+Je()),ge({type:"slash",value:"/",output:""});continue}if(ue.type==="bos"&&A[0]==="/"){k.type="globstar",k.value+=V,k.output=`(?:^|${ne}|${F(N)}${ne})`,re.output=k.output,re.globstar=!0,pe(V+Je()),ge({type:"slash",value:"/",output:""});continue}re.output=re.output.slice(0,-k.output.length),k.type="globstar",k.output=F(N),k.value+=V,re.output+=k.output,re.globstar=!0,pe(V);continue}const G={type:"star",value:V,output:Te};if(N.bash===!0){G.output=".*?",(k.type==="bos"||k.type==="slash")&&(G.output=we+G.output),ge(G);continue}if(k&&(k.type==="bracket"||k.type==="paren")&&N.regex===!0){G.output=V,ge(G);continue}(re.index===re.start||k.type==="slash"||k.type==="dot")&&(k.type==="dot"?(re.output+=oe,k.output+=oe):N.dot===!0?(re.output+=L,k.output+=L):(re.output+=we,k.output+=we),he()!=="*"&&(re.output+=me,k.output+=me)),ge(G)}for(;re.brackets>0;){if(N.strictBrackets===!0)throw new SyntaxError(O("closing","]"));re.output=p.escapeLast(re.output,"["),Re("brackets")}for(;re.parens>0;){if(N.strictBrackets===!0)throw new SyntaxError(O("closing",")"));re.output=p.escapeLast(re.output,"("),Re("parens")}for(;re.braces>0;){if(N.strictBrackets===!0)throw new SyntaxError(O("closing","}"));re.output=p.escapeLast(re.output,"{"),Re("braces")}if(N.strictSlashes!==!0&&(k.type==="star"||k.type==="bracket")&&ge({type:"maybe_slash",value:"",output:`${ne}?`}),re.backtrack===!0){re.output="";for(const A of re.tokens)re.output+=A.output!=null?A.output:A.value,A.suffix&&(re.output+=A.suffix)}return re},"parse");U.fastpaths=(_,W)=>{const N={...W},z=typeof N.maxLength=="number"?Math.min(T,N.maxLength):T,Y=_.length;if(Y>z)throw new SyntaxError(`Input length: ${Y}, exceeds maximum allowed length: ${z}`);_=g[_]||_;const Ee=p.isWindows(W),{DOT_LITERAL:H,SLASH_LITERAL:X,ONE_CHAR:Q,DOTS_SLASH:P,NO_DOT:B,NO_DOTS:K,NO_DOTS_SLASH:q,STAR:ne,START_ANCHOR:me}=R.globChars(Ee),_e=N.dot?K:B,Be=N.dot?q:B,oe=N.capture?"":"?:",L={negated:!1,prefix:""};let se=N.bash===!0?".*?":ne;N.capture&&(se=`(${se})`);const We=o(we=>we.noglobstar===!0?se:`(${oe}(?:(?!${me}${we.dot?P:H}).)*?)`,"globstar"),Fe=o(we=>{switch(we){case"*":return`${_e}${Q}${se}`;case".*":return`${H}${Q}${se}`;case"*.*":return`${_e}${se}${H}${Q}${se}`;case"*/*":return`${_e}${se}${X}${Q}${Be}${se}`;case"**":return _e+We(N);case"**/*":return`(?:${_e}${We(N)}${X})?${Be}${Q}${se}`;case"**/*.*":return`(?:${_e}${We(N)}${X})?${Be}${se}${H}${Q}${se}`;case"**/.*":return`(?:${_e}${We(N)}${X})?${H}${Q}${se}`;default:{const Ie=/^(.*?)\.(\w+)$/.exec(we);if(!Ie)return;const Te=Fe(Ie[1]);return Te?Te+H+Ie[2]:void 0}}},"create"),ve=p.removePrefix(_,L);let F=Fe(ve);return F&&N.strictSlashes!==!0&&(F+=`${X}?`),F},Qe.exports=U},5761:(Qe,s,b)=>{"use strict";const R=b(6470),p=b(9826),T=b(3969),w=b(292),J=b(3889),M=o(y=>y&&typeof y=="object"&&!Array.isArray(y),"isObject"),g=o((y,O,U=!1)=>{if(Array.isArray(y)){const X=y.map(P=>g(P,O,U));return o(P=>{for(const B of X){const K=B(P);if(K)return K}return!1},"arrayMatcher")}const _=M(y)&&y.tokens&&y.input;if(y===""||typeof y!="string"&&!_)throw new TypeError("Expected pattern to be a non-empty string");const W=O||{},N=w.isWindows(O),z=_?g.compileRe(y,O):g.makeRe(y,O,!1,!0),Y=z.state;delete z.state;let Ee=o(()=>!1,"isIgnored");if(W.ignore){const X={...O,ignore:null,onMatch:null,onResult:null};Ee=g(W.ignore,X,U)}const H=o((X,Q=!1)=>{const{isMatch:P,match:B,output:K}=g.test(X,z,O,{glob:y,posix:N}),q={glob:y,state:Y,regex:z,posix:N,input:X,output:K,match:B,isMatch:P};return typeof W.onResult=="function"&&W.onResult(q),P===!1?(q.isMatch=!1,Q?q:!1):Ee(X)?(typeof W.onIgnore=="function"&&W.onIgnore(q),q.isMatch=!1,Q?q:!1):(typeof W.onMatch=="function"&&W.onMatch(q),Q?q:!0)},"matcher");return U&&(H.state=Y),H},"picomatch");g.test=(y,O,U,{glob:_,posix:W}={})=>{if(typeof y!="string")throw new TypeError("Expected input to be a string");if(y==="")return{isMatch:!1,output:""};const N=U||{},z=N.format||(W?w.toPosixSlashes:null);let Y=y===_,Ee=Y&&z?z(y):y;return Y===!1&&(Ee=z?z(y):y,Y=Ee===_),(Y===!1||N.capture===!0)&&(N.matchBase===!0||N.basename===!0?Y=g.matchBase(y,O,U,W):Y=O.exec(Ee)),{isMatch:Boolean(Y),match:Y,output:Ee}},g.matchBase=(y,O,U,_=w.isWindows(U))=>(O instanceof RegExp?O:g.makeRe(O,U)).test(R.basename(y)),g.isMatch=(y,O,U)=>g(O,U)(y),g.parse=(y,O)=>Array.isArray(y)?y.map(U=>g.parse(U,O)):T(y,{...O,fastpaths:!1}),g.scan=(y,O)=>p(y,O),g.compileRe=(y,O,U=!1,_=!1)=>{if(U===!0)return y.output;const W=O||{},N=W.contains?"":"^",z=W.contains?"":"$";let Y=`${N}(?:${y.output})${z}`;y&&y.negated===!0&&(Y=`^(?!${Y}).*$`);const Ee=g.toRegex(Y,O);return _===!0&&(Ee.state=y),Ee},g.makeRe=(y,O={},U=!1,_=!1)=>{if(!y||typeof y!="string")throw new TypeError("Expected a non-empty string");let W={negated:!1,fastpaths:!0};return O.fastpaths!==!1&&(y[0]==="."||y[0]==="*")&&(W.output=T.fastpaths(y,O)),W.output||(W=T(y,O)),g.compileRe(W,O,U,_)},g.toRegex=(y,O)=>{try{const U=O||{};return new RegExp(y,U.flags||(U.nocase?"i":""))}catch(U){if(O&&O.debug===!0)throw U;return/$^/}},g.constants=J,Qe.exports=g},9826:(Qe,s,b)=>{"use strict";const R=b(292),{CHAR_ASTERISK:p,CHAR_AT:T,CHAR_BACKWARD_SLASH:w,CHAR_COMMA:J,CHAR_DOT:M,CHAR_EXCLAMATION_MARK:g,CHAR_FORWARD_SLASH:y,CHAR_LEFT_CURLY_BRACE:O,CHAR_LEFT_PARENTHESES:U,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_PLUS:W,CHAR_QUESTION_MARK:N,CHAR_RIGHT_CURLY_BRACE:z,CHAR_RIGHT_PARENTHESES:Y,CHAR_RIGHT_SQUARE_BRACKET:Ee}=b(3889),H=o(P=>P===y||P===w,"isPathSeparator"),X=o(P=>{P.isPrefix!==!0&&(P.depth=P.isGlobstar?1/0:1)},"depth"),Q=o((P,B)=>{const K=B||{},q=P.length-1,ne=K.parts===!0||K.scanToEnd===!0,me=[],_e=[],Be=[];let oe=P,L=-1,se=0,We=0,Fe=!1,ve=!1,F=!1,we=!1,Ie=!1,Te=!1,re=!1,vt=!1,Ze=!1,Ge=!1,k=0,V,ee,he={value:"",depth:0,isGlob:!1};const Je=o(()=>L>=q,"eos"),nt=o(()=>oe.charCodeAt(L+1),"peek"),pe=o(()=>(V=ee,oe.charCodeAt(++L)),"advance");for(;L<q;){ee=pe();let ge;if(ee===w){re=he.backslashes=!0,ee=pe(),ee===O&&(Te=!0);continue}if(Te===!0||ee===O){for(k++;Je()!==!0&&(ee=pe());){if(ee===w){re=he.backslashes=!0,pe();continue}if(ee===O){k++;continue}if(Te!==!0&&ee===M&&(ee=pe())===M){if(Fe=he.isBrace=!0,F=he.isGlob=!0,Ge=!0,ne===!0)continue;break}if(Te!==!0&&ee===J){if(Fe=he.isBrace=!0,F=he.isGlob=!0,Ge=!0,ne===!0)continue;break}if(ee===z&&(k--,k===0)){Te=!1,Fe=he.isBrace=!0,Ge=!0;break}}if(ne===!0)continue;break}if(ee===y){if(me.push(L),_e.push(he),he={value:"",depth:0,isGlob:!1},Ge===!0)continue;if(V===M&&L===se+1){se+=2;continue}We=L+1;continue}if(K.noext!==!0&&(ee===W||ee===T||ee===p||ee===N||ee===g)===!0&&nt()===U){if(F=he.isGlob=!0,we=he.isExtglob=!0,Ge=!0,ee===g&&L===se&&(Ze=!0),ne===!0){for(;Je()!==!0&&(ee=pe());){if(ee===w){re=he.backslashes=!0,ee=pe();continue}if(ee===Y){F=he.isGlob=!0,Ge=!0;break}}continue}break}if(ee===p){if(V===p&&(Ie=he.isGlobstar=!0),F=he.isGlob=!0,Ge=!0,ne===!0)continue;break}if(ee===N){if(F=he.isGlob=!0,Ge=!0,ne===!0)continue;break}if(ee===_){for(;Je()!==!0&&(ge=pe());){if(ge===w){re=he.backslashes=!0,pe();continue}if(ge===Ee){ve=he.isBracket=!0,F=he.isGlob=!0,Ge=!0;break}}if(ne===!0)continue;break}if(K.nonegate!==!0&&ee===g&&L===se){vt=he.negated=!0,se++;continue}if(K.noparen!==!0&&ee===U){if(F=he.isGlob=!0,ne===!0){for(;Je()!==!0&&(ee=pe());){if(ee===U){re=he.backslashes=!0,ee=pe();continue}if(ee===Y){Ge=!0;break}}continue}break}if(F===!0){if(Ge=!0,ne===!0)continue;break}}K.noext===!0&&(we=!1,F=!1);let Ae=oe,Se="",ie="";se>0&&(Se=oe.slice(0,se),oe=oe.slice(se),We-=se),Ae&&F===!0&&We>0?(Ae=oe.slice(0,We),ie=oe.slice(We)):F===!0?(Ae="",ie=oe):Ae=oe,Ae&&Ae!==""&&Ae!=="/"&&Ae!==oe&&H(Ae.charCodeAt(Ae.length-1))&&(Ae=Ae.slice(0,-1)),K.unescape===!0&&(ie&&(ie=R.removeBackslashes(ie)),Ae&&re===!0&&(Ae=R.removeBackslashes(Ae)));const Re={prefix:Se,input:P,start:se,base:Ae,glob:ie,isBrace:Fe,isBracket:ve,isGlob:F,isExtglob:we,isGlobstar:Ie,negated:vt,negatedExtglob:Ze};if(K.tokens===!0&&(Re.maxDepth=0,H(ee)||_e.push(he),Re.tokens=_e),K.parts===!0||K.tokens===!0){let ge;for(let tt=0;tt<me.length;tt++){const Ne=ge?ge+1:se,A=me[tt],G=P.slice(Ne,A);K.tokens&&(tt===0&&se!==0?(_e[tt].isPrefix=!0,_e[tt].value=Se):_e[tt].value=G,X(_e[tt]),Re.maxDepth+=_e[tt].depth),(tt!==0||G!=="")&&Be.push(G),ge=A}if(ge&&ge+1<P.length){const tt=P.slice(ge+1);Be.push(tt),K.tokens&&(_e[_e.length-1].value=tt,X(_e[_e.length-1]),Re.maxDepth+=_e[_e.length-1].depth)}Re.slashes=me,Re.parts=Be}return Re},"scan");Qe.exports=Q},292:(Qe,s,b)=>{"use strict";var R=b(6038);const p=b(6470),T=R.platform==="win32",{REGEX_BACKSLASH:w,REGEX_REMOVE_BACKSLASH:J,REGEX_SPECIAL_CHARS:M,REGEX_SPECIAL_CHARS_GLOBAL:g}=b(3889);s.isObject=y=>y!==null&&typeof y=="object"&&!Array.isArray(y),s.hasRegexChars=y=>M.test(y),s.isRegexChar=y=>y.length===1&&s.hasRegexChars(y),s.escapeRegex=y=>y.replace(g,"\\$1"),s.toPosixSlashes=y=>y.replace(w,"/"),s.removeBackslashes=y=>y.replace(J,O=>O==="\\"?"":O),s.supportsLookbehinds=()=>{const y=R.version.slice(1).split(".").map(Number);return y.length===3&&y[0]>=9||y[0]===8&&y[1]>=10},s.isWindows=y=>y&&typeof y.windows=="boolean"?y.windows:T===!0||p.sep==="\\",s.escapeLast=(y,O,U)=>{const _=y.lastIndexOf(O,U);return _===-1?y:y[_-1]==="\\"?s.escapeLast(y,O,_-1):`${y.slice(0,_)}\\${y.slice(_)}`},s.removePrefix=(y,O={})=>{let U=y;return U.startsWith("./")&&(U=U.slice(2),O.prefix="./"),U},s.wrapOutput=(y,O={},U={})=>{const _=U.contains?"":"^",W=U.contains?"":"$";let N=`${_}(?:${y})${W}`;return O.negated===!0&&(N=`(?:^(?!${N}).*$)`),N}},6038:Qe=>{var s=Qe.exports={},b,R;function p(){throw new Error("setTimeout has not been defined")}o(p,"defaultSetTimout");function T(){throw new Error("clearTimeout has not been defined")}o(T,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=p}catch(z){b=p}try{typeof clearTimeout=="function"?R=clearTimeout:R=T}catch(z){R=T}}();function w(z){if(b===setTimeout)return setTimeout(z,0);if((b===p||!b)&&setTimeout)return b=setTimeout,setTimeout(z,0);try{return b(z,0)}catch(Y){try{return b.call(null,z,0)}catch(Ee){return b.call(this,z,0)}}}o(w,"runTimeout");function J(z){if(R===clearTimeout)return clearTimeout(z);if((R===T||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(z);try{return R(z)}catch(Y){try{return R.call(null,z)}catch(Ee){return R.call(this,z)}}}o(J,"runClearTimeout");var M=[],g=!1,y,O=-1;function U(){!g||!y||(g=!1,y.length?M=y.concat(M):O=-1,M.length&&_())}o(U,"cleanUpNextTick");function _(){if(!g){var z=w(U);g=!0;for(var Y=M.length;Y;){for(y=M,M=[];++O<Y;)y&&y[O].run();O=-1,Y=M.length}y=null,g=!1,J(z)}}o(_,"drainQueue"),s.nextTick=function(z){var Y=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)Y[Ee-1]=arguments[Ee];M.push(new W(z,Y)),M.length===1&&!g&&w(_)};function W(z,Y){this.fun=z,this.array=Y}o(W,"Item"),W.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function N(){}o(N,"noop"),s.on=N,s.addListener=N,s.once=N,s.off=N,s.removeListener=N,s.removeAllListeners=N,s.emit=N,s.prependListener=N,s.prependOnceListener=N,s.listeners=function(z){return[]},s.binding=function(z){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(z){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},2999:(Qe,s,b)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=b(3338),p=o((H,X,Q)=>{if(R(H)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(X===void 0||H===X)return String(H);if(R(X)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let P={relaxZeros:!0,...Q};typeof P.strictZeros=="boolean"&&(P.relaxZeros=P.strictZeros===!1);let B=String(P.relaxZeros),K=String(P.shorthand),q=String(P.capture),ne=String(P.wrap),me=H+":"+X+"="+B+K+q+ne;if(p.cache.hasOwnProperty(me))return p.cache[me].result;let _e=Math.min(H,X),Be=Math.max(H,X);if(Math.abs(_e-Be)===1){let Fe=H+"|"+X;return P.capture?`(${Fe})`:P.wrap===!1?Fe:`(?:${Fe})`}let oe=Y(H)||Y(X),L={min:H,max:X,a:_e,b:Be},se=[],We=[];if(oe&&(L.isPadded=oe,L.maxLen=String(L.max).length),_e<0){let Fe=Be<0?Math.abs(Be):1;We=M(Fe,Math.abs(_e),L,P),_e=L.a=0}return Be>=0&&(se=M(_e,Be,L,P)),L.negatives=We,L.positives=se,L.result=T(We,se,P),P.capture===!0?L.result=`(${L.result})`:P.wrap!==!1&&se.length+We.length>1&&(L.result=`(?:${L.result})`),p.cache[me]=L,L.result},"toRegexRange");function T(H,X,Q){let P=g(H,X,"-",!1,Q)||[],B=g(X,H,"",!1,Q)||[],K=g(H,X,"-?",!0,Q)||[];return P.concat(K).concat(B).join("|")}o(T,"collatePatterns");function w(H,X){let Q=1,P=1,B=_(H,Q),K=new Set([X]);for(;H<=B&&B<=X;)K.add(B),Q+=1,B=_(H,Q);for(B=W(X+1,P)-1;H<B&&B<=X;)K.add(B),P+=1,B=W(X+1,P)-1;return K=[...K],K.sort(O),K}o(w,"splitToRanges");function J(H,X,Q){if(H===X)return{pattern:H,count:[],digits:0};let P=y(H,X),B=P.length,K="",q=0;for(let ne=0;ne<B;ne++){let[me,_e]=P[ne];me===_e?K+=me:me!=="0"||_e!=="9"?K+=z(me,_e,Q):q++}return q&&(K+=Q.shorthand===!0?"\\d":"[0-9]"),{pattern:K,count:[q],digits:B}}o(J,"rangeToPattern");function M(H,X,Q,P){let B=w(H,X),K=[],q=H,ne;for(let me=0;me<B.length;me++){let _e=B[me],Be=J(String(q),String(_e),P),oe="";if(!Q.isPadded&&ne&&ne.pattern===Be.pattern){ne.count.length>1&&ne.count.pop(),ne.count.push(Be.count[0]),ne.string=ne.pattern+N(ne.count),q=_e+1;continue}Q.isPadded&&(oe=Ee(_e,Q,P)),Be.string=oe+Be.pattern+N(Be.count),K.push(Be),q=_e+1,ne=Be}return K}o(M,"splitToPatterns");function g(H,X,Q,P,B){let K=[];for(let q of H){let{string:ne}=q;!P&&!U(X,"string",ne)&&K.push(Q+ne),P&&U(X,"string",ne)&&K.push(Q+ne)}return K}o(g,"filterPatterns");function y(H,X){let Q=[];for(let P=0;P<H.length;P++)Q.push([H[P],X[P]]);return Q}o(y,"zip");function O(H,X){return H>X?1:X>H?-1:0}o(O,"compare");function U(H,X,Q){return H.some(P=>P[X]===Q)}o(U,"contains");function _(H,X){return Number(String(H).slice(0,-X)+"9".repeat(X))}o(_,"countNines");function W(H,X){return H-H%Math.pow(10,X)}o(W,"countZeros");function N(H){let[X=0,Q=""]=H;return Q||X>1?`{${X+(Q?","+Q:"")}}`:""}o(N,"toQuantifier");function z(H,X,Q){return`[${H}${X-H==1?"":"-"}${X}]`}o(z,"toCharacterClass");function Y(H){return/^-?(0+)\d/.test(H)}o(Y,"hasPadding");function Ee(H,X,Q){if(!X.isPadded)return H;let P=Math.abs(X.maxLen-String(H).length),B=Q.relaxZeros!==!1;switch(P){case 0:return"";case 1:return B?"0?":"0";case 2:return B?"0{0,2}":"00";default:return B?`0{0,${P}}`:`0{${P}}`}}o(Ee,"padZeros"),p.cache={},p.clearCache=()=>p.cache={},Qe.exports=p},6724:()=>{},6470:(Qe,s,b)=>{"use strict";var R=b(4155);function p(M){if(typeof M!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(M))}o(p,"assertPath");function T(M,g){for(var y="",O=0,U=-1,_=0,W,N=0;N<=M.length;++N){if(N<M.length)W=M.charCodeAt(N);else{if(W===47)break;W=47}if(W===47){if(!(U===N-1||_===1))if(U!==N-1&&_===2){if(y.length<2||O!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var z=y.lastIndexOf("/");if(z!==y.length-1){z===-1?(y="",O=0):(y=y.slice(0,z),O=y.length-1-y.lastIndexOf("/")),U=N,_=0;continue}}else if(y.length===2||y.length===1){y="",O=0,U=N,_=0;continue}}g&&(y.length>0?y+="/..":y="..",O=2)}else y.length>0?y+="/"+M.slice(U+1,N):y=M.slice(U+1,N),O=N-U-1;U=N,_=0}else W===46&&_!==-1?++_:_=-1}return y}o(T,"normalizeStringPosix");function w(M,g){var y=g.dir||g.root,O=g.base||(g.name||"")+(g.ext||"");return y?y===g.root?y+O:y+M+O:O}o(w,"_format");var J={resolve:o(function(){for(var g="",y=!1,O,U=arguments.length-1;U>=-1&&!y;U--){var _;U>=0?_=arguments[U]:(O===void 0&&(O=R.cwd()),_=O),p(_),_.length!==0&&(g=_+"/"+g,y=_.charCodeAt(0)===47)}return g=T(g,!y),y?g.length>0?"/"+g:"/":g.length>0?g:"."},"resolve"),normalize:o(function(g){if(p(g),g.length===0)return".";var y=g.charCodeAt(0)===47,O=g.charCodeAt(g.length-1)===47;return g=T(g,!y),g.length===0&&!y&&(g="."),g.length>0&&O&&(g+="/"),y?"/"+g:g},"normalize"),isAbsolute:o(function(g){return p(g),g.length>0&&g.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var g,y=0;y<arguments.length;++y){var O=arguments[y];p(O),O.length>0&&(g===void 0?g=O:g+="/"+O)}return g===void 0?".":J.normalize(g)},"join"),relative:o(function(g,y){if(p(g),p(y),g===y||(g=J.resolve(g),y=J.resolve(y),g===y))return"";for(var O=1;O<g.length&&g.charCodeAt(O)===47;++O);for(var U=g.length,_=U-O,W=1;W<y.length&&y.charCodeAt(W)===47;++W);for(var N=y.length,z=N-W,Y=_<z?_:z,Ee=-1,H=0;H<=Y;++H){if(H===Y){if(z>Y){if(y.charCodeAt(W+H)===47)return y.slice(W+H+1);if(H===0)return y.slice(W+H)}else _>Y&&(g.charCodeAt(O+H)===47?Ee=H:H===0&&(Ee=0));break}var X=g.charCodeAt(O+H),Q=y.charCodeAt(W+H);if(X!==Q)break;X===47&&(Ee=H)}var P="";for(H=O+Ee+1;H<=U;++H)(H===U||g.charCodeAt(H)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+y.slice(W+Ee):(W+=Ee,y.charCodeAt(W)===47&&++W,y.slice(W))},"relative"),_makeLong:o(function(g){return g},"_makeLong"),dirname:o(function(g){if(p(g),g.length===0)return".";for(var y=g.charCodeAt(0),O=y===47,U=-1,_=!0,W=g.length-1;W>=1;--W)if(y=g.charCodeAt(W),y===47){if(!_){U=W;break}}else _=!1;return U===-1?O?"/":".":O&&U===1?"//":g.slice(0,U)},"dirname"),basename:o(function(g,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');p(g);var O=0,U=-1,_=!0,W;if(y!==void 0&&y.length>0&&y.length<=g.length){if(y.length===g.length&&y===g)return"";var N=y.length-1,z=-1;for(W=g.length-1;W>=0;--W){var Y=g.charCodeAt(W);if(Y===47){if(!_){O=W+1;break}}else z===-1&&(_=!1,z=W+1),N>=0&&(Y===y.charCodeAt(N)?--N==-1&&(U=W):(N=-1,U=z))}return O===U?U=z:U===-1&&(U=g.length),g.slice(O,U)}else{for(W=g.length-1;W>=0;--W)if(g.charCodeAt(W)===47){if(!_){O=W+1;break}}else U===-1&&(_=!1,U=W+1);return U===-1?"":g.slice(O,U)}},"basename"),extname:o(function(g){p(g);for(var y=-1,O=0,U=-1,_=!0,W=0,N=g.length-1;N>=0;--N){var z=g.charCodeAt(N);if(z===47){if(!_){O=N+1;break}continue}U===-1&&(_=!1,U=N+1),z===46?y===-1?y=N:W!==1&&(W=1):y!==-1&&(W=-1)}return y===-1||U===-1||W===0||W===1&&y===U-1&&y===O+1?"":g.slice(y,U)},"extname"),format:o(function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return w("/",g)},"format"),parse:o(function(g){p(g);var y={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return y;var O=g.charCodeAt(0),U=O===47,_;U?(y.root="/",_=1):_=0;for(var W=-1,N=0,z=-1,Y=!0,Ee=g.length-1,H=0;Ee>=_;--Ee){if(O=g.charCodeAt(Ee),O===47){if(!Y){N=Ee+1;break}continue}z===-1&&(Y=!1,z=Ee+1),O===46?W===-1?W=Ee:H!==1&&(H=1):W!==-1&&(H=-1)}return W===-1||z===-1||H===0||H===1&&W===z-1&&W===N+1?z!==-1&&(N===0&&U?y.base=y.name=g.slice(1,z):y.base=y.name=g.slice(N,z)):(N===0&&U?(y.name=g.slice(1,W),y.base=g.slice(1,z)):(y.name=g.slice(N,W),y.base=g.slice(N,z)),y.ext=g.slice(W,z)),N>0?y.dir=g.slice(0,N-1):U&&(y.dir="/"),y},"parse"),sep:"/",delimiter:":",win32:null,posix:null};J.posix=J,Qe.exports=J},4155:Qe=>{var s=Qe.exports={},b,R;function p(){throw new Error("setTimeout has not been defined")}o(p,"defaultSetTimout");function T(){throw new Error("clearTimeout has not been defined")}o(T,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=p}catch(z){b=p}try{typeof clearTimeout=="function"?R=clearTimeout:R=T}catch(z){R=T}}();function w(z){if(b===setTimeout)return setTimeout(z,0);if((b===p||!b)&&setTimeout)return b=setTimeout,setTimeout(z,0);try{return b(z,0)}catch(Y){try{return b.call(null,z,0)}catch(Ee){return b.call(this,z,0)}}}o(w,"runTimeout");function J(z){if(R===clearTimeout)return clearTimeout(z);if((R===T||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(z);try{return R(z)}catch(Y){try{return R.call(null,z)}catch(Ee){return R.call(this,z)}}}o(J,"runClearTimeout");var M=[],g=!1,y,O=-1;function U(){!g||!y||(g=!1,y.length?M=y.concat(M):O=-1,M.length&&_())}o(U,"cleanUpNextTick");function _(){if(!g){var z=w(U);g=!0;for(var Y=M.length;Y;){for(y=M,M=[];++O<Y;)y&&y[O].run();O=-1,Y=M.length}y=null,g=!1,J(z)}}o(_,"drainQueue"),s.nextTick=function(z){var Y=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)Y[Ee-1]=arguments[Ee];M.push(new W(z,Y)),M.length===1&&!g&&w(_)};function W(z,Y){this.fun=z,this.array=Y}o(W,"Item"),W.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function N(){}o(N,"noop"),s.on=N,s.addListener=N,s.once=N,s.off=N,s.removeListener=N,s.removeAllListeners=N,s.emit=N,s.prependListener=N,s.prependOnceListener=N,s.listeners=function(z){return[]},s.binding=function(z){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(z){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Ba={};function jn(Qe){var s=Ba[Qe];if(s!==void 0)return s.exports;var b=Ba[Qe]={id:Qe,loaded:!1,exports:{}};return Co[Qe](b,b.exports,jn),b.loaded=!0,b.exports}o(jn,"__webpack_require__"),(()=>{jn.n=Qe=>{var s=Qe&&Qe.__esModule?()=>Qe.default:()=>Qe;return jn.d(s,{a:s}),s}})(),(()=>{jn.d=(Qe,s)=>{for(var b in s)jn.o(s,b)&&!jn.o(Qe,b)&&Object.defineProperty(Qe,b,{enumerable:!0,get:s[b]})}})(),(()=>{jn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(Qe){if(typeof window=="object")return window}}()})(),(()=>{jn.o=(Qe,s)=>Object.prototype.hasOwnProperty.call(Qe,s)})(),(()=>{jn.r=Qe=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Qe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Qe,"__esModule",{value:!0})}})(),(()=>{jn.nmd=Qe=>(Qe.paths=[],Qe.children||(Qe.children=[]),Qe)})();var bo={};(()=>{"use strict";jn.r(bo),jn.d(bo,{StateKeys:()=>ea,activate:()=>pc,ensureProvidersRegistered:()=>mr,getOpenActionsService:()=>yo,getState:()=>js,isPreRelease:()=>vc,updateState:()=>Wo});var Qe={};jn.r(Qe),jn.d(Qe,{max:()=>_l,min:()=>bl});const s=require("vscode"),b=new TextDecoder,R=new TextEncoder,p=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function T(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=p[e[r]];return n.join("")}o(T,"hex_encodeUtf8Hex");function w(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return b.decode(n)}o(w,"decodeUtf8Hex");const J=/^[0-9a-f]{40}$/i;function M(t){return t!==void 0&&J.test(t)}o(M,"isSha");const g=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function y(t){return g.test(t)}o(y,"isValidBranchName");function O(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(O,"shortenRef");const U=47;function _(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(_,"asKey");function W(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o(W,"asFileKey");function N(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(N,"asFileStorageKey");function z(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===U){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(z,"basename");function Y(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===U){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(Y,"dirname");function Ee(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ee,"getParent");function H(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?s.Uri.joinPath(t,n.substr(t.path.length)):s.Uri.joinPath(t,n)}o(H,"joinRelativePath");function X(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),Q(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):Q(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(X,"isChild");function Q(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(Q,"isDescendent");function P(t){return t&&typeof t=="object"&&"scheme"in t}o(P,"isSerializedUri");var B;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=s.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,m=s.workspace.textDocuments;if(m.length===0)return h;for(const D of m)D.uri.scheme===d&&f.some(ae=>Q(D.uri,ae))&&h.set(_(D.uri),D.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,m]=d.authority.split(t.authoritySeparator);let D;if(m)try{const ae=JSON.parse(w(m));D=f?f(ae):ae}catch{}return{scheme:h,metadata:D}}o(a,"decodeAuthority"),t.decodeAuthority=a;function l(d,f){const h=f?`${t.authoritySeparator}${T(JSON.stringify(f))}`:"";return`${d}${h}`}o(l,"encodeAuthority"),t.encodeAuthority=l;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=s.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(B||(B={}));var K;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(K||(K={}));var q;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(q||(q={}));var ne;(function(t){function e(n){return n!==void 0&&n.type===Be.Active}o(e,"isActive"),t.isActive=e})(ne||(ne={}));var me;(function(t){function e(n){const r=B.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:_e.Latest};if(M(r.idx))return{type:_e.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(me||(me={}));var _e;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(_e||(_e={}));var Be;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Be||(Be={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Be||(Be={}));var oe;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(oe||(oe={}));var L;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(L||(L={}));var se;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(se||(se={}));var We;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(We||(We={}));var Fe;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(Fe||(Fe={}));var ve;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(ve||(ve={}));var F;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(F||(F={}));var we;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(we||(we={}));var Ie;(function(t){t.Browse="browse",t.Edit="edit"})(Ie||(Ie={}));var Te;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(Te||(Te={}));class re extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new re("Failed to create and push commit",Te.CommitFailedError)}static DetachedHEADError(e){return new re(e,Te.DetachedHEADError)}static CommitToProtectedBranchError(e){return new re(e,Te.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new re(e,Te.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new re(r,Te.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new re(e,Te.InvalidCredentialsError,n)}static MergeConflictError(e){return new re(e,Te.MergeConflictError)}static NothingToCommitError(e){return new re(e,Te.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new re(n,Te.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new re(e,Te.SyncConflictsError)}static UnresolvedConflictsError(){return new re("You have unresolved merge conflicts.",Te.UnresolvedConflictsError)}static InvalidRepositoryError(){return new re("The current repository is invalid",Te.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:Te.Unknown}}o(re,"VirtualProviderError");const vt=6;var Ze;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(Ze||(Ze={}));var Ge;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Ge||(Ge={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(Ge||(Ge={}));var k;(function(t){t.Browse="browse",t.Edit="edit"})(k||(k={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(k||(k={}));var V;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(V||(V={}));var ee;(function(t){const e=new Map([[F.Branch,Ge.None],[F.RemoteBranch,Ge.None],[F.PullRequestBranch,Ge.Match],[F.PullRequestRemoteBranch,Ge.Match],[F.Commit,Ge.Match],[F.Tag,Ge.Match]]),n=new Map([[F.Branch,k.Edit],[F.RemoteBranch,k.Edit],[F.PullRequestBranch,k.Browse],[F.PullRequestRemoteBranch,k.Browse],[F.Commit,k.Browse],[F.Tag,k.Browse]]);function r(a){var l,c;return{display:(l=n.get(a))!=null?l:k.Edit,index:(c=e.get(a))!=null?c:Ge.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case F.Branch:case F.RemoteBranch:return{display:k.Browse,index:Ge.Latest};case F.PullRequestBranch:case F.PullRequestRemoteBranch:return{display:k.Browse,index:Ge.Match};case F.Commit:case F.Tag:return{display:k.Browse,index:Ge.Match};default:return{display:k.Edit,index:Ge.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(ee||(ee={}));const he=null;var Je=jn(5179),nt=jn.n(Je);const pe="modes",Ae="indexMemento";class Se{constructor(){this._onDidChange=new s.EventEmitter,this._onDidChangeAny=new s.EventEmitter,this.memoryState=new Map}static configure(e,n){ie.configPrefix=e,ie.state=n.workspaceState,n.subscriptions.push(s.workspace.onDidChangeConfiguration(ie.onConfigurationChanged,ie))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(pe),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(pe,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Ae),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?s.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):s.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let l=this.modes!==void 0?this.modes[a]:void 0;if(l!==void 0)return{display:k.sanitize(l.display),index:Ge.sanitize(l.index)};if(l=this.memoryState.get(a),l!==void 0)return l;if(n===F.Branch||n===F.RemoteBranch)switch((i=s.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:k.Edit,index:Ge.None};case"latest":return{display:k.Browse,index:Ge.Latest};case"tipPlusLatest":return{display:k.Edit,index:Ge.TipPlusLatest}}if(!r)return ee.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(pe,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Ae,this.indexMemento))}getAny(e,n,r){return r===void 0?s.workspace.getConfiguration(void 0,n).get(e):s.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return s.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return s.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=ie.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,s.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,s.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,s.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,s.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=ie.inspect(e);if(i===void 0)return;const a=ie.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,s.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,s.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,s.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return s.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return s.workspace.getConfiguration(void 0,r===s.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=ie.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):ie.update(e,n,s.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):ie.update(e,n,s.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):ie.update(e,nt()(n,r.defaultValue)?void 0:n,s.ConfigurationTarget.Global)}}o(Se,"Configuration");const ie=new Se,Re="";var ge;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(ge||(ge={}));var tt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(tt||(tt={}));const Ne="[RemoteHub]",A=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===s.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===ge.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:s.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case ge.Off:return 0;case ge.Error:return 1;case ge.Warn:return 2;case ge.Info:return 3;case ge.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){A.isDebugging&&console.log(this.timestamp,Ne,t!=null?t:Re,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Re}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!A.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}A.isDebugging&&console.error(this.timestamp,Ne,e!=null?e:Re,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:Re}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){A.isDebugging&&console.log(this.timestamp,Ne,t!=null?t:Re,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Re}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){A.isDebugging&&console.warn(this.timestamp,Ne,t!=null?t:Re,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Re}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof s.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:Re}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:Re;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,Re)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!A.isDebugging)return Re;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:Re}},"_Logger");let G=A;G.level=0,G._logLevel=ge.Off;const ue=new TextDecoder,je=new TextEncoder;async function Ye(t){const e=typeof t=="string"?je.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new pn;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(ue.decode(n)))}o(Ye,"sha1");async function _t(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return encodeUtf8Hex(ue.decode(e))}o(_t,"sha256");var qe;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(qe||(qe={}));function At(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(At,"leftRotate");function wt(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(wt,"fill");const dn=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let l=0;l<a;l++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,wt(this._buff,this._buffLen),this._buffLen>56&&(this._step(),wt(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=dn._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,At(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,l=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=At(n,5)+c+l+u+t.getUint32(f*4,!1)&4294967295,l=a,a=i,i=At(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+l&4294967295}},"_SHA1Computer");let pn=dn;pn._bigBlock32=new DataView(new ArrayBuffer(320));function In(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}o(In,"fromBase64");const{fromCharCode:Un}=String;function et(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=Un(t[n])}return globalThis.btoa(e)}o(et,"toBase64");function Lt(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(Lt,"indexOfDifference");function Qt(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(Qt,"escapeRegExpCharacters");let Tt;var Xt;(function(t){function e(n){const r=sn(n);return Tt=s.env.uiKind===s.UIKind.Web,G.warn(`Running on the ${Tt?"web":"desktop"}${n.extensionRuntime!==s.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})(Xt||(Xt={}));const ht=/\/workspaceStorage\/(?<id>[^/]+)/i;function sn(t){var e;if(t.storageUri===void 0)return"";const n=ht.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=Lt(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(sn,"getWorkspaceId");var Yt;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(Yt||(Yt={}));const an=new Map;function hn(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):an.get(t)}o(hn,"getContext");function Rn(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(Rn,"isSupportedContextKey");async function Tn(t,e){an.set(t,e),!t.startsWith("continueOn:")&&await s.commands.executeCommand("setContext",t,e)}o(Tn,"setContext");const xr=o(async(t,e,n)=>{const r=await Promise.resolve().then(jn.bind(jn,5326)),i=await Promise.resolve().then(jn.bind(jn,9865)),a=new r.AppInsightsCore,l=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[l]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[l.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,m;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(m=f.ext.utc)!=null?m:{},f.ext.utc.flags=8462029)}),a},"getAICore"),pr=o(async(t,e,n)=>{const r=await xr(t,e,n);return{logEvent:(a,l)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:l==null?void 0:l.properties,measurements:l==null?void 0:l.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var bn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(bn||(bn={}));class Kr{constructor(e,n){this._instantiationStatus=bn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==bn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==bn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===bn.NOT_INSTANTIATED&&(this._instantiationStatus=bn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=bn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=bn.INSTANTIATED}))}}o(Kr,"BaseTelemetrySender");class Yr{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender()}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Yr,"BaseTelemetryReporter");class fr{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.4-preview"}}static getInstance(){return fr._instance||(fr._instance=new fr),fr._instance}}o(fr,"TelemetryUtil");const ri=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(jn.bind(jn,5783));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),n.initialize()}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const l={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&fr.applyReplacements(l,e),n==null||n.track({name:i,data:l})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");class qr extends Yr{constructor(e,n){let r=o(l=>ri(l,n),"clientFactory");fr.shouldUseOneDataSystemSDK(e)&&(r=o(l=>pr(l,s),"clientFactory"));const i={release:navigator.appVersion,platform:"web",architecture:"web"},a=new Kr(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,s,{additionalCommonProperties:fr.getAdditionalCommonProperties(i)})}}o(qr,"TelemetryReporter");const Gr="Type of classified event does not match event properties",Z=o(class{constructor(t){this.context=t,this.sharedProperties={},Z._instance=this,this.reporter=new qr(Z.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==Gr&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";s.env.appHost==="github.dev"&&(G.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},s.commands.executeCommand(e,t).then(n=>{},n=>{G.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let ze=Z;ze.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function ot(t,e){const n=s.l10n.t("Report Issue"),r=s.l10n.t("Reload");s.window.showErrorMessage(s.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:s.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?s.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&s.commands.executeCommand("workbench.action.reloadWindow")})}o(ot,"handleExtensionActivationError");function pt(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(pt,"hrtime");let Ht=0;function Bt(){return Ht===Number.MAX_SAFE_INTEGER&&(Ht=0),++Ht}o(Bt,"getNextInstanceId");const Mn=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Bt().toString().padStart(5)}] `;var r,i,a,l,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:ge.Info,this.time=pt(),d){if(!G.enabled(this.logLevel))return;n.length?yt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(l=d.message)!=null?l:""}`,...n):yt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:pt(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=pt()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,l,c,u,d;if(!G.enabled(this.logLevel))return;let f="";if(this.step){const[ae,x]=pt(this.step.time),ce=ae*1e3+Math.floor(x/1e6);f=`${this.step.label?`${this.step.label} took `:""}${ce} ms`}if(!n){yt(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,m]=pt(this.time),D=h*1e3+Math.floor(m/1e6);yt(D>500?ge.Warn:this.logLevel,`${this.instance}${(l=e==null?void 0:e.prefix)!=null?l:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${D} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=Mn.watches.get(t))==null||r.log(),Mn.watches.set(t,new Mn(t,e,...n))}static log(t,e){var n;(n=Mn.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Mn.watches.get(t))==null||n.stop(e),Mn.watches.delete(t)}},"_Stopwatch");let Ut=Mn;Ut.watches=new Map;function yt(t,e,...n){switch(t){case ge.Warn:G.warn(e,...n);break;case ge.Info:G.log(e,...n);break;default:G.debug(e,...n);break}}o(yt,"log");class Dt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=s.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),ie.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{G.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=_(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=_(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(_(e.uri)))}}o(Dt,"CodeNavigationServices");const xt=globalThis.fetch;async function dt(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new CancellationError:i}}o(dt,"fetchWithCancellation");async function ln(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const l=await dt(t,e,a.token);if(l.body){const c=[];let u=0;const d=l.body.getReader();let f=3;for(;;){let{done:h,value:m}=await d.read();if(h){const ae=c.reduce((De,te)=>De+te.length,0),x=new Uint8Array(ae);let ce=0;for(const De of c)x.set(De,ce),ce+=De.length;return x}m&&(c.push(m),u+=m.length);const D=Math.floor(u/(1024*1024));if(f<D){f=D;const ae={message:D+" MB"};i.report(ae)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(l){throw r.isCancellationRequested?new CancellationError:l}throw new CancellationError}o(ln,"fetchUInt8ArrayWithMaxSizeAndCancellation");const zt=globalThis.crypto;function St(){return zt.randomUUID()}o(St,"uuid");/*! (c) Andrea Giammarchi - ISC */var en={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;en.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,l=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(te,Pe){ae(this._ungap,te,Pe)},delete:function(te){delete this._ungap[te]},get:function(te){return this.has(te)?this._ungap[te][0]:null},getAll:function(te){return this.has(te)?this._ungap[te].slice(0):[]},has:function(te){return te in this._ungap},set:function(te,Pe){this._ungap[te]=[n(Pe)]},forEach:function(te,Pe){var He=this;for(var $e in He._ungap)He._ungap[$e].forEach(Xe,$e);function Xe(Ct){te.call(Pe,Ct,n($e),He)}o(Xe,"invoke")},toJSON:function(){return{}},toString:function(){var te=[];for(var Pe in this._ungap)for(var He=ce(Pe),$e=0,Xe=this._ungap[Pe];$e<Xe.length;$e++)te.push(He+"="+ce(Xe[$e]));return te.join("&")}};for(var h in f)a(m.prototype,h,{configurable:!0,writable:!0,value:f[h]});en.URLSearchParams=m;function m(te){var Pe=i(null);switch(a(this,"_ungap",{value:Pe}),!0){case!te:break;case typeof te=="string":te.charAt(0)==="?"&&(te=te.slice(1));for(var He=te.split("&"),$e=0,Xe=He.length;$e<Xe;$e++){var Ct=He[$e],at=Ct.indexOf("=");-1<at?ae(Pe,x(Ct.slice(0,at)),x(Ct.slice(at+1))):Ct.length&&ae(Pe,x(Ct),"")}break;case r(te):for(var $e=0,Xe=te.length;$e<Xe;$e++){var Ct=te[$e];ae(Pe,Ct[0],Ct[1])}break;case"forEach"in te:te.forEach(D,Pe);break;default:for(var Ot in te)ae(Pe,Ot,te[Ot])}}o(m,"URLSearchParams");function D(te,Pe){ae(this,Pe,te)}o(D,"addEach");function ae(te,Pe,He){var $e=r(He)?He.join(","):He;Pe in te?te[Pe].push($e):te[Pe]=[$e]}o(ae,"appendTo");function x(te){return decodeURIComponent(te.replace(c,"%25").replace(u," "))}o(x,"decode");function ce(te){return encodeURIComponent(te).replace(l,De)}o(ce,"encode");function De(te){return d[te]}o(De,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var l=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=l.getAll(u)).forEach(function(d){i.call(a,d,u,l)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),l=a.done,c=[],u=Object.create(null),d,f,h;!l;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),l=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var l=a.shift();return{done:l===void 0,value:l}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,l=o(function(h){function m(x,ce){t.append.call(this,x,ce),x=this.toString(),h.set.call(this._usp,x?"?"+x:"")}o(m,"append");function D(x){t.delete.call(this,x),x=this.toString(),h.set.call(this._usp,x?"?"+x:"")}o(D,"del");function ae(x,ce){t.set.call(this,x,ce),x=this.toString(),h.set.call(this._usp,x?"?"+x:"")}return o(ae,"set"),function(x,ce){return x.append=m,x.delete=D,x.set=ae,i(x,"_usp",{configurable:!0,writable:!0,value:ce})}},"createSearchParamsPollute"),c=o(function(h){return function(m,D){return i(m,"_searchParams",{configurable:!0,writable:!0,value:h(D,m)}),D}},"createSearchParamsCreate"),u=o(function(h){var m=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=m},"updateSearchParams"),d=o(function(h,m){if(!(h instanceof m))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+m.name)},"verifySearchParams"),f=o(function(h){var m=h.prototype,D=a(m,"searchParams"),ae=a(m,"href"),x=a(m,"search"),ce;!D&&x&&x.set&&(ce=c(l(x)),r.defineProperties(m,{href:{get:function(){return ae.get.call(this)},set:function(De){var te=this._searchParams;ae.set.call(this,De),te&&u(te)}},search:{get:function(){return x.get.call(this)},set:function(De){var te=this._searchParams;x.set.call(this,De),te&&u(te)}},searchParams:{get:function(){return d(this,h),this._searchParams||ce(this,new URLSearchParams(this.search.slice(1)))},set:function(De){d(this,h),ce(this,De)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(en.URLSearchParams.prototype,Object);const un=en.URLSearchParams,Sn=60,yn=Sn*60,Wn=yn*24,Ln=Wn*7,Hn=Wn*30,wn=Wn*365;function Pt(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return s.l10n.t("in {0}",Pt(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?s.l10n.t("secs ago"):s.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?s.l10n.t("now"):s.l10n.t("Just now");let r;return n<Sn?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} sec ago",r):s.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} secs ago",r):s.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} sec",r):s.l10n.t("{0} second",r):(e==null?void 0:e.short)?s.l10n.t("{0} secs",r):s.l10n.t("{0} seconds",r)):n<yn?(r=Math.floor(n/Sn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} min ago",r):s.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} mins ago",r):s.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} min",r):s.l10n.t("{0} minute",r):(e==null?void 0:e.short)?s.l10n.t("{0} mins",r):s.l10n.t("{0} minutes",r)):n<Wn?(r=Math.floor(n/yn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} hr ago",r):s.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} hrs ago",r):s.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} hr",r):s.l10n.t("{0} hour",r):(e==null?void 0:e.short)?s.l10n.t("{0} hrs",r):s.l10n.t("{0} hours",r)):n<Ln?(r=Math.floor(n/Wn),(e==null?void 0:e.ago)?r===1?s.l10n.t("{0} day ago",r):s.l10n.t("{0} days ago",r):r===1?s.l10n.t("{0} day",r):s.l10n.t("{0} days",r)):n<Hn?(r=Math.floor(n/Ln),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} wk ago",r):s.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} wks ago",r):s.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} wk",r):s.l10n.t("{0} week",r):(e==null?void 0:e.short)?s.l10n.t("{0} wks",r):s.l10n.t("{0} weeks",r)):n<wn?(r=Math.floor(n/Hn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} mo ago",r):s.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} mos ago",r):s.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} mo",r):s.l10n.t("{0} month",r):(e==null?void 0:e.short)?s.l10n.t("{0} mos",r):s.l10n.t("{0} months",r)):(r=Math.floor(n/wn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?s.l10n.t("{0} yr ago",r):s.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?s.l10n.t("{0} yrs ago",r):s.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?s.l10n.t("{0} yr",r):s.l10n.t("{0} year",r):(e==null?void 0:e.short)?s.l10n.t("{0} yrs",r):s.l10n.t("{0} years",r))}o(Pt,"fromNow");var on,kt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(kt||(kt={}));class Dn{constructor(){this[on]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=kt.None){const r=this._map.get(e);if(!!r)return n!==kt.None&&this.touch(r,n),r.value}set(e,n,r=kt.None){let i=this._map.get(e);if(i)i.value=n,r!==kt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case kt.None:this.addItemLast(i);break;case kt.First:this.addItemFirst(i);break;case kt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(on=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==kt.First&&n!==kt.Last)){if(n===kt.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===kt.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(Dn,"LinkedMap");class Nt extends Dn{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=kt.AsNew){return super.get(e,n)}peek(e){return super.get(e,kt.None)}set(e,n){return super.set(e,n,kt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(Nt,"LRUCache");function gn(t,e){return t.reduce((r,i)=>{const a=e(i),l=r.get(a);return l===void 0?r.set(a,[i]):l.push(i),r},new Map)}o(gn,"groupBy");function _n(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(_n,"isBinary");function Nn(t,e,n=r=>r){return[...t.reduce((i,a)=>{const l=e(a),c=i.get(l);if(c===void 0)i.set(l,a);else{const u=n(c,a);u!==void 0&&i.set(l,u)}return i},new Map).values()]}o(Nn,"uniqueBy");function tn(t,e){switch(t){case q.Branch:case q.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case q.Tag:return"$(tag)";case q.Commit:return"$(git-commit)"}}o(tn,"headTypeToCodicon");function xn(t){switch(t){case Be.Active:return"$(layers-active)";case Be.Match:return"$(layers-dot)";case Be.Indexed:return"$(layers)"}}o(xn,"indexTypeToCodicon");function Yn(t,e){switch(t){case q.Branch:case q.RemoteBranch:return e?new s.ThemeIcon("git-pull-request"):new s.ThemeIcon("git-branch");case q.Tag:return new s.ThemeIcon("tag");case q.Commit:return new s.ThemeIcon("git-commit")}}o(Yn,"headTypeToThemeIcon");function*Fn(t,e){for(const n of t)yield*e(n)}o(Fn,"flatMap");function*qn(t,e){for(const n of t)e(n)&&(yield n)}o(qn,"filter");function*Bn(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(Bn,"filterMap");function Gn(t,e){for(const n of t)if(e(n))return n}o(Gn,"find");function Vt(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(Vt,"join");function*Ft(t,e){for(const n of t)yield e(n)}o(Ft,"map");function ar(t,e){for(const n of t)if(e(n))return!0;return!1}o(ar,"some");function*Or(...t){for(const e of t)for(const n of e)yield n}o(Or,"union");function*tr(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(tr,"unique");const hr="";function Qn(...t){if(t.length===1){const e=t[0];return e===void 0?hr:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof s.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Qn,"defaultResolver");function Pr(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...l){const c=l.length===0?a:`${a}$${(t!=null?t:Qn)(...l)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,l),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(Pr,"serialize");let nr=0;function Xn(){return nr===Number.MAX_SAFE_INTEGER&&(nr=0),String(++nr)}o(Xn,"getNextLockId");class zr{constructor(){this.id=Xn()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(zr,"Lock");class gr{constructor(e){this.lock=new zr,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new Ut(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:ge.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(l=>r=l),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new Ut(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:ge.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(gr,"ReaderWriterLock");class yr{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new gr(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new gr(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(yr,"KeyedReaderWriterLock");const or=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new s.EventEmitter,this.cache=new Map,this.lock=new gr("WorkspaceRepositories"),this.disposable=s.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),ie.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await s.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void s.window.showTextDocument(t)}onConfigurationChanged(t){if(!ie.changed(t,"experimental.syncRecentList"))return;const e=ie.get("experimental.syncRecentList")===!0?[or.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=Nn(t.map(n=>n.rootUri),n=>_(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=_(t);e=e.filter(r=>_(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(or.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${_(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const l={title:s.l10n.t("Yes")},c={title:s.l10n.t("No"),isCloseAffordance:!0};if(await s.window.showWarningMessage(a.length===1?s.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):s.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},l,c)!==l)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(or.storageKey,this.toStorage(e))}catch(l){throw G.error(l,"Failed to save workspace repositories"),l}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),l=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${_(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&Be.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:kr(l),timestamp:Date.now()})}try{await this.storageService.store(or.storageKey,this.toStorage(e))}catch(n){throw G.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&P(r)?s.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return G.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:or.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let wr=or;wr.storageKey="workspaceRepositories",wr.storageSchemaVersion=1;function ii(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(ii,"hasChanges");function Hr(t){return ii(t.changes)}o(Hr,"hasUncommittedChanges");function kr(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case L.Created:e++;break;case L.Changed:n++;break;case L.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(kr,"toChangesSummary");function ai(t,{compact:e=!0,preamble:n,separator:r=", ",short:i=!1,single:a=!1}={}){if(!ii(t))return s.l10n.t("Everything up to date");const{added:l,changed:c,deleted:u}=t;if(a){const f=l+c+u;return f===1?s.l10n.t("{0} change",f):s.l10n.t("{0} changes",f)}let d=`${n!=null?n:""}`;return(l||!e)&&(d+=i?`+${l}`:l===1?s.l10n.t("{0} file added",l):s.l10n.t("{0} files added",l),(c||u||!e)&&(d+=r)),(c||!e)&&(d+=i?`~${c}`:c===1?s.l10n.t("{0} file changed",c):s.l10n.t("{0} files changed",c),(u||!e)&&(d+=r)),(u||!e)&&(d+=i?`-${u}`:u===1?s.l10n.t("{0} file deleted",u):s.l10n.t("{0} files deleted",u)),d}o(ai,"formatChangesSummary");class $n extends Error{constructor(e){var n;const r=typeof e=="string"?e:Et.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,$n)}}o($n,"ProviderNotFoundError");class oi{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(oi,"VirtualRepository");var sr;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(sr||(sr={}));var nn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(nn||(nn={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(nn||(nn={}));var Jr;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(Jr||(Jr={}));var Kn;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Kn||(Kn={}));var zn;(function(t){function e(n){const r=B.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(M(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(zn||(zn={}));function rr(t){return t!==void 0&&typeof t.then=="function"}o(rr,"isPromise");const On="";function ye(...t){if(t.length===1){const e=t[0];return e===void 0?On:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof s.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(ye,"gate_defaultResolver");function S(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...l){const c=l.length===0?a:`${a}$${(t!=null?t:ye)(...l)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,l),d==null||!rr(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(S,"gate");var $=Object.defineProperty,de=Object.getOwnPropertyDescriptor,Oe=o((t,e,n,r)=>{for(var i=r>1?void 0:r?de(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&$(e,n,i),i},"__decorateClass");class mt{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=s.l10n.t("Open Repository");await s.window.showErrorMessage(s.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&s.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return s.window.showErrorMessage(s.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),s.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void s.window.showErrorMessage(s.l10n.t("The provided credentials are either invalid or expired."),s.l10n.t("OK"));const n=s.l10n.t("Reauthenticate");await s.window.showErrorMessage(s.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void s.window.showErrorMessage(s.l10n.t("The provided credentials do not have the required access."),s.l10n.t("OK"));const n=s.l10n.t("Reauthenticate"),r=s.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await s.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=it.get(e.id);if(n&&s.extensions.getExtension(n[0])===void 0){const r=s.l10n.t("Install");if(await s.window.showInformationMessage(s.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await s.commands.executeCommand("workbench.extensions.installExtension",n[0]),await s.commands.executeCommand("workbench.action.reloadWindow")}}}o(mt,"Messages"),Oe([S(()=>"")],mt.prototype,"showRepositoryNotValidMessage",1),Oe([S(()=>"")],mt.prototype,"showGitHubStatus500Message",1),Oe([S(()=>"")],mt.prototype,"showStatus401Message",1),Oe([S(()=>"")],mt.prototype,"showStatus403Message",1),Oe([S()],mt.prototype,"showProviderNotFoundMessage",1);const it=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),fe=new mt;async function Ce(t,e,n){var r,i,a,l,c;if(ze.instance.publicLog2("openWorkspace",{location:e.location}),e.location===se.AddToWorkspace){const d=(i=(r=s.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void s.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===se.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:s.l10n.t("Continue")},h={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showWarningMessage(Tt?s.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(D=>D.name).join(", ")):s.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(D=>D.name).join(", ")),{modal:!0},f,h)!==f){ze.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=s.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===se.CurrentWindow&&u===void 0&&((a=s.workspace.workspaceFolders)==null?void 0:a.length)===1&&s.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((l=yo())==null?void 0:l.openPendingFiles(e.uri,e.filesToOpen)):await((c=yo())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),ze.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void s.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===se.NewWindow,forceLocalWindow:u})}o(Ce,"openWorkspace");var Le=jn(6724),Ve=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,gt=o((t,e,n,r)=>{for(var i=r>1?void 0:r?ct(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&Ve(e,n,i),i},"providers_decorateClass");const Mt=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new s.EventEmitter,this._onDidChangeChangeStore=new s.EventEmitter,this._onDidChangeWorkspaceRepositories=new s.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new s.EventEmitter,this._onDidChangeRepository=new s.EventEmitter,this._onDidSyncRepository=new s.EventEmitter,this._onDidRefresh=new s.EventEmitter,this._onWillRefresh=new s.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=s.Disposable.from(s.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(_(t.uri));!e||(G.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=_(t.uri);if(t.uri.scheme!==Mt.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new oi(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=_(e.uri);if(e.uri.scheme!==Mt.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Tn(Yt.HasVirtualFolders,this._repositories.size!==0),Tn(Yt.VirtualFolderProviders,Vt(tr(Ft(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Ft(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,l,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:l,workspaceRepositories:c};this._providers.set(t,d);const f=s.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Tn(Yt.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=s.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[m,D]of[...this._repositories])(D==null?void 0:D.provider.id)===t&&(this._repositories.delete(m),h.push(D));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Ft(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=s.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==Mt.scheme)return;const i=(n=this._repositories.get(_(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return qn(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:Mt.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:Mt.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new $n(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new $n(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new $n(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new $n(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new $n(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new $n(t)}async getRecentRemoteSourceProviders(){return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:s.l10n.t("Choose a recent repository"),getRemoteSources:async()=>{const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return Promise.all(t.sort((e,n)=>n.timestamp-e.timestamp).map(async e=>({providerId:e.provider.id,name:e.name,icon:"repo",description:Pt(e.timestamp,{ago:!0}),detail:`${e.provider.name}${e.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${e.pullRequest.id}`:""}${B.isCanonicalUri(e.uri)?"":`\xA0\xA0\u2022\xA0\xA0${tn(e.ref.type)} ${e.ref.name}`}\xA0\xA0\u2022\xA0\xA0${ai(e.changes)}${e.idx?`\xA0\xA0\u2022\xA0\xA0${xn(e.idx.type)}`:""}`,url:(await this.getBestRemoteUri(e.uri)).toString()})))}}}getRemoteSourceProviders(t){const e=o(n=>n.provider.getRemoteSourceProviders().map(i=>{var a;return{...i,getRecentRemoteSources:(a=i.getRecentRemoteSources)!=null?a:async()=>{var l;const c=(l=await n.workspaceRepositories.getRemoteWorkspaceSourceProvider(n.id))!=null?l:[];return Promise.all(c.map(async u=>({providerId:u.provider.id,name:u.name,icon:"repo",timestamp:u.timestamp,description:Pt(u.timestamp,{ago:!0}),detail:`${u.provider.name}${u.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${u.pullRequest.id}`:""}${B.isCanonicalUri(u.uri)?"":`\xA0\xA0\u2022\xA0\xA0${tn(u.ref.type)} ${u.ref.name}`}\xA0\xA0\u2022\xA0\xA0${ai(u.changes)}${u.idx?`\xA0\xA0\u2022\xA0\xA0${xn(u.idx.type)}`:""}`,url:(await this.getBestRemoteUri(u.uri)).toString()})))}}}),"createRemoteSourceProviders");if(t){const n=this.getProvider(t);return n?e(n):[]}return[...Fn(this._providers.values(),n=>{var r;return(r=e(n))!=null?r:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=s.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===B.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new $n(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=se.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return Ce(this,t,e)}createProviderUri(t,e,n){return B.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(Mt.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return B.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===Mt.scheme?B.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return B.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(Mt.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e){const{provider:n,repo:r,ref:i}=this.getVirtualUriMetadata(t);if(e===sr.Repository)return this.getRemoteUri(n.id,{repo:r});if(e===sr.PullRequest||e===void 0&&(i==null?void 0:i.type)===We.PullRequest){if((i==null?void 0:i.type)===We.PullRequest)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:i.id}});const{pullRequest:a}=await this.getMetadata(t);if(e===sr.PullRequest&&a)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:a.id}})}if(e===sr.Branch||e===void 0&&(i==null?void 0:i.type)===We.Branch){if((i==null?void 0:i.type)===We.Branch)return this.getRemoteUri(n.id,{repo:r,branch:i.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===q.Branch||a.type===q.RemoteBranch&&e===sr.Branch)return this.getRemoteUri(n.id,{repo:r,branch:a.branch.name})}if(e===sr.Tag||e===void 0&&(i==null?void 0:i.type)===We.Tag){if((i==null?void 0:i.type)===We.Tag)return this.getRemoteUri(n.id,{repo:r,tag:i.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===q.Tag)return this.getRemoteUri(n.id,{repo:r,tag:a.detached.name})}if(e===sr.Commit||e===void 0&&((i==null?void 0:i.type)===We.Commit||(i==null?void 0:i.type)===We.Tree&&M(i.id))){if((i==null?void 0:i.type)===We.Commit||(i==null?void 0:i.type)===We.Tree&&M(i.id))return this.getRemoteUri(n.id,{repo:r,sha:i.id});const{HEAD:a}=await this.getMetadata(t);if(e===sr.Commit||a.type===q.Commit)return this.getRemoteUri(n.id,{repo:r,sha:a.sha})}if(e===void 0&&(i==null?void 0:i.type)===We.Tree&&!M(i.id))return this.getRemoteUri(n.id,{repo:r,branch:i.id});if(e===void 0)return this.getRemoteUri(n.id,{repo:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(Mt.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=B.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=B.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=B.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(Mt.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return B.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=s.workspace.getWorkspaceFolder(B.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const l=this.getRelativeFilePath(t,a.uri);switch(a.type){case L.Created:case L.Changed:return{type:a.type,path:l,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Ye(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case L.Deleted:return{type:a.type,path:l,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return ie.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=_(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new $n(t);const l=zn.decode(t);(l==null?void 0:l.type)===Kn.SHA&&(r=l.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw re.asVirtualProviderErrorCode(c)===Te.InvalidRepositoryError&&fe.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new Ut(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(B.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(B.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t){var e;const n=ie.get("gitProtocol");let{HEAD:r,cloneUrl:i}=await this.getMetadata(t.uri);if(((e=r.branch)==null?void 0:e.remote)!==void 0){const a=this.getRemoteUri(t.provider.id,{repo:r.branch.remote.repo});return{cloneUrl:i}=await this.getMetadata(a),{uri:n==="http"?i.http:i.ssh,ref:r.branch.name,name:r.branch.remote.name}}return{uri:n==="http"?i.http:i.ssh,ref:r.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");if(Tt){let i=`${s.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;return n!==void 0&&(i+=`&ref=${encodeURIComponent(n)}`),s.Uri.parse(i)}const r=o(async i=>{try{await i.activate(),await s.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(a){G.error(a,"Unable to clone repository");const l=s.l10n.t("Could not clone your repository as Git is not installed."),c=s.l10n.t("Download Git");await s.window.showErrorMessage(l,{modal:!0},c)===c&&await s.commands.executeCommand("vscode.open",s.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(s.workspace.isTrusted){const i=s.extensions.getExtension("vscode.git");if(i)await r(i);else throw new Error("Git extension not found")}else{const i=s.extensions.onDidChange(async()=>{const l=s.extensions.getExtension("vscode.git");l&&(await r(l),i.dispose())});await s.workspace.requestWorkspaceTrust()||i.dispose()}}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await mr(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(_(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new $n(t);let{to:a,reason:l,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,l==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw re.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:Fe.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=s.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return gn(t.sort((e,n)=>n.timestamp-e.timestamp),e=>_(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(Mt.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(Mt.authoritySeparator)===-1}},"_VirtualProviderService");let Et=Mt;Et.scheme="vscode-vfs",Et.authoritySeparator="+",Et.baseVirtualWorkspaceUri=s.Uri.parse(`${Mt.scheme}://`),gt([Pr()],Et.prototype,"getMetadataCore",1);function qt(t,e,n){let r=!1;async function i(){var c;if(await mr(t,void 0),!r){const d=t.getRemoteSourceProviders(),f=await((c=s.extensions.getExtension("vscode.git-base"))==null?void 0:c.activate()),h=f==null?void 0:f.getAPI(1);if(!h)return;d.map(m=>h.registerRemoteSourceProvider(m)),r=!0}const u=await s.commands.executeCommand("git-base.api.getRemoteSources",{title:s.l10n.t("Open Remote Repository"),placeholder:s.l10n.t("Enter a remote url, or select a remote provider"),showRecentSources:!0,providerLabel:d=>{var f;return(f=d.label)!=null?f:s.l10n.t("Open Repository from {0}",d.name)},urlLabel:d=>{const f=t.canOpenRemoteUrl(d);if(f){const{provider:h,urlType:m}=f;switch(m){case ve.Branch:return s.l10n.t("Open Branch from {0} Repository",h.name);case ve.Tag:return s.l10n.t("Open Tag from {0} Repository",h.name);case ve.Commit:return s.l10n.t("Open Commit from {0} Repository",h.name);case ve.File:return s.l10n.t("Open File from {0} Repository",h.name);case ve.PullRequest:return s.l10n.t("Open Pull Request from {0} Repository",h.name);default:return s.l10n.t("Open {0} Repository",h.name)}}return s.l10n.t("Enter a Remote Url")}});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{const f=s.workspace.getConfiguration("window").get("openFoldersInNewWindow")==="on"?se.NewWindow:se.CurrentWindow,h=await t.createWorkspaceForRemoteUrl(u,void 0,f);if(!h){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});const m=s.l10n.t("Install");await s.window.showInformationMessage(s.l10n.t("Extension 'GitHub Repositories' is not installed or enabled. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},m)===m&&(await s.commands.executeCommand("workbench.extensions.installExtension","github.remotehub"),await s.commands.executeCommand("workbench.action.reloadWindow"))}if(!h)return;await Ce(t,h)}catch(d){if(n.sendException(d),re.asVirtualProviderErrorCode(d)===Te.InvalidCredentialsError){const{action:f}=d;if(f){fe.showStatus401Message(()=>f());return}}G.error(d)}}o(i,"openRepository");async function a(c,u){const d=u?t.repositories.filter(f=>f.provider.id===u):t.repositories;if(d.length!==0){if(d.length>1){const f=await s.window.showQuickPick(d.map(h=>({label:h.name,description:h.provider.name,repository:h})),{placeHolder:c});return f?f.repository:void 0}return d[0]}}o(a,"getRepository");async function l(c,u,d=!1){const f=await a(s.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=lr(u);if(!h)return;const m=c.getRemoteUri(f.provider.id,{repo:f.id,path:c.getRelativeFilePath(h.uri),sha:(await c.getMetadata(f.uri)).HEAD.sha});if(m===void 0)return;const D=s.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",ae=h.type===Zn.File?`${_i(h.range)}`:`${ta(h.cellIndex,h.range)}`;return m.with({authority:`${D}/${m.authority}`,fragment:d?ae:void 0})}return o(l,"getLink"),[s.commands.registerCommand("remoteHub.openRepository",()=>(n.publicLog2("command.openRepository"),i())),s.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(n.publicLog2("command.continueOn.openRepository"),i())),s.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),s.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),s.commands.registerCommand("remoteHub.continueOn",async()=>s.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),s.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!Tt)return;const c=await a(s.l10n.t("Choose which repository to open on the desktop"),void 0);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u!==void 0)return n.publicLog2("command.openOnDesktop"),s.Uri.parse(`${s.env.uriScheme}://${e}/open?url=${encodeURIComponent(u.toString(!0))}`)}),s.commands.registerCommand("remoteHub.clone",async()=>{const c=await a(s.l10n.t("Choose which repository to clone"),void 0);if(c!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(c.uri)&&s.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const u={title:s.l10n.t("Continue")},d={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showWarningMessage(s.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},u,d)!==u){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(c)}}),s.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Tt)return;const c=await a(s.l10n.t("Choose which repository to open on the web"));if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u===void 0)return;const d=s.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return u.with({authority:`${d}/${u.authority}`})}),s.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(Tt)return;const c=await a(s.l10n.t("Choose which repository to open on the web"),void 0);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u===void 0)return;const d=s.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",f=u.with({authority:`${d}/${u.authority}`});n.publicLog2("command.openOnWeb"),s.env.openExternal(f)}),s.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const c=await a(s.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri,sr.Commit);if(u===void 0)return;const d=s.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",f=u.with({authority:`${d}/${u.authority}`});await s.env.clipboard.writeText(f.toString(!0))}),s.commands.registerCommand("remoteHub.copyVscodeDevLink",async c=>{const u=await l(t,c,!0);u&&await s.env.clipboard.writeText(u.toString(!0))}),s.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async c=>{const u=await l(t,c,!1);u&&await s.env.clipboard.writeText(u.toString(!0))}),s.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const c=await a(s.l10n.t("Choose which repository to open on the remote"));if(!c)return;const u={provider:c.provider,repo:c.id};return s.commands.executeCommand("remoteHub.openOnRemote",u)}),s.commands.registerCommand("remoteHub.openOnRemote",async c=>{n.publicLog2("command.openOnRemote");const{provider:u,...d}=c,f=t.getRemoteUri(u.id,d);if(f){await s.env.openExternal(f);return}s.window.showErrorMessage(s.l10n.t("Unable to open the resource on {0}",c.provider.name))}),s.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),s.commands.registerCommand("remoteHub.enableDebugLogging",()=>ie.updateEffective("logLevel",ge.Debug)),s.commands.registerCommand("remoteHub.disableDebugLogging",()=>ie.updateEffective("logLevel",ge.Warn)),s.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),s.commands.registerCommand("remoteHub.setContext",async(c,u)=>{if(!c.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Tn(c,u)}),s.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const c={title:s.l10n.t("Continue Working On...")};await s.window.showInformationMessage(s.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},c)===c&&await s.commands.executeCommand("remoteHub.continueOn")}),s.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Tt?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(qt,"registerCommands");function Pn(t){return t}o(Pn,"command");async function Gt(t,e){return s.commands.executeCommand(t,e)}o(Gt,"executeCommand");var Zn;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(Zn||(Zn={}));function er(t){return t instanceof s.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(er,"extractContext");function lr(t){var e,n,r;let i;const{fileUri:a,lineNumber:l}=er(t),c=a!=null?a:(e=s.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=s.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=s.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:s.window.activeNotebookEditor.selection.start;return i=Ar(l),{type:2,uri:c,cellIndex:d,range:i}}return i=Ar(l),{type:1,uri:c,range:i}}if(s.window.activeNotebookEditor)return{type:2,uri:s.window.activeNotebookEditor.notebook.uri,cellIndex:s.window.activeNotebookEditor.selection.start,range:void 0}}o(lr,"getFileAndPosition");function Ar(t){var e;return t!==void 0&&(!s.window.activeTextEditor||s.window.activeTextEditor.selection.isEmpty||!s.window.activeTextEditor.selection.contains(new s.Position(t-1,0)))?new s.Range(t-1,0,t-1,1):(e=s.window.activeTextEditor)==null?void 0:e.selection}o(Ar,"getRangeOrSelectionForLink");function _i(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}o(_i,"rangeString");function ta(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}o(ta,"notebookCellRangeString");function zi(t,e,n){return new Ur(new Ai(t),new Ai(e)).ComputeDiff(n).changes}o(zi,"stringDiff");class Ir{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Ir,"DiffChange");var Ei;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Ei||(Ei={}));function na(t,e){return(e<<5)-e+t|0}o(na,"numberHash");function Hi(t,e){e=na(149417,e);for(let n=0,r=t.length;n<r;n++)e=na(t.charCodeAt(n),e);return e}o(Hi,"stringHash");class Ai{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(Ai,"StringDiffSequence");class Br{static Assert(e,n){if(!e)throw new Error(n)}}o(Br,"Debug");class Vr{static Copy(e,n,r,i,a){for(let l=0;l<a;l++)r[i+l]=e[n+l]}static Copy2(e,n,r,i,a){for(let l=0;l<a;l++)r[i+l]=e[n+l]}}o(Vr,"MyArray");var Bi;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(Bi||(Bi={}));class si{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ir(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(si,"DiffChangeHelper");class Ur{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,l]=Ur._getElements(e),[c,u,d]=Ur._getElements(n);this._hasStrings=l&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Ur._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=Hi(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=Ur._getStrictElement(this._originalSequence,e),i=Ur._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const l=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,l);return a&&(c=this.PrettifyChanges(c)),{quitEarly:l[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(Br.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Ir(e,0,r,i-r+1)]):e<=n?(Br.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Ir(e,n-e+1,r,0)]):(Br.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Br.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const l=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,l,c,a),d=l[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let m=[];return a[0]?m=[new Ir(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:m=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,m)}return[new Ir(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,l,c,u,d,f,h,m,D,ae,x,ce,De,te){let Pe=null,He=null,$e=new si,Xe=n,Ct=r,at=D[0]-ce[0]-i,Ot=-1073741824,Zt=this.m_forwardHistory.length-1;do{const Kt=at+e;Kt===Xe||Kt<Ct&&d[Kt-1]<d[Kt+1]?(h=d[Kt+1],ae=h-at-i,h<Ot&&$e.MarkNextChange(),Ot=h,$e.AddModifiedElement(h+1,ae),at=Kt+1-e):(h=d[Kt-1]+1,ae=h-at-i,h<Ot&&$e.MarkNextChange(),Ot=h-1,$e.AddOriginalElement(h,ae+1),at=Kt-1-e),Zt>=0&&(d=this.m_forwardHistory[Zt],e=d[0],Xe=1,Ct=d.length-1)}while(--Zt>=-1);if(Pe=$e.getReverseChanges(),te[0]){let Kt=D[0]+1,It=ce[0]+1;if(Pe!==null&&Pe.length>0){const jt=Pe[Pe.length-1];Kt=Math.max(Kt,jt.getOriginalEnd()),It=Math.max(It,jt.getModifiedEnd())}He=[new Ir(Kt,m-Kt+1,It,x-It+1)]}else{$e=new si,Xe=l,Ct=c,at=D[0]-ce[0]-u,Ot=1073741824,Zt=De?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Kt=at+a;Kt===Xe||Kt<Ct&&f[Kt-1]>=f[Kt+1]?(h=f[Kt+1]-1,ae=h-at-u,h>Ot&&$e.MarkNextChange(),Ot=h+1,$e.AddOriginalElement(h+1,ae+1),at=Kt+1-a):(h=f[Kt-1],ae=h-at-u,h>Ot&&$e.MarkNextChange(),Ot=h,$e.AddModifiedElement(h+1,ae+1),at=Kt-1-a),Zt>=0&&(f=this.m_reverseHistory[Zt],a=f[0],Xe=1,Ct=f.length-1)}while(--Zt>=-1);He=$e.getChanges()}return this.ConcatenateChanges(Pe,He)}ComputeRecursionPoint(e,n,r,i,a,l,c){let u=0,d=0,f=0,h=0,m=0,D=0;e--,r--,a[0]=0,l[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const ae=n-e+(i-r),x=ae+1,ce=new Int32Array(x),De=new Int32Array(x),te=i-r,Pe=n-e,He=e-r,$e=n-i,Ct=(Pe-te)%2==0;ce[te]=e,De[Pe]=n,c[0]=!1;for(let at=1;at<=ae/2+1;at++){let Ot=0,Zt=0;f=this.ClipDiagonalBound(te-at,at,te,x),h=this.ClipDiagonalBound(te+at,at,te,x);for(let It=f;It<=h;It+=2){It===f||It<h&&ce[It-1]<ce[It+1]?u=ce[It+1]:u=ce[It-1]+1,d=u-(It-te)-He;const jt=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(ce[It]=u,u+d>Ot+Zt&&(Ot=u,Zt=d),!Ct&&Math.abs(It-Pe)<=at-1&&u>=De[It])return a[0]=u,l[0]=d,jt<=De[It]&&1447>0&&at<=1447+1?this.WALKTRACE(te,f,h,He,Pe,m,D,$e,ce,De,u,n,a,d,i,l,Ct,c):null}const Kt=(Ot-e+(Zt-r)-at)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Ot,Kt))return c[0]=!0,a[0]=Ot,l[0]=Zt,Kt>0&&1447>0&&at<=1447+1?this.WALKTRACE(te,f,h,He,Pe,m,D,$e,ce,De,u,n,a,d,i,l,Ct,c):(e++,r++,[new Ir(e,n-e+1,r,i-r+1)]);m=this.ClipDiagonalBound(Pe-at,at,Pe,x),D=this.ClipDiagonalBound(Pe+at,at,Pe,x);for(let It=m;It<=D;It+=2){It===m||It<D&&De[It-1]>=De[It+1]?u=De[It+1]-1:u=De[It-1],d=u-(It-Pe)-$e;const jt=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(De[It]=u,Ct&&Math.abs(It-te)<=at&&u<=ce[It])return a[0]=u,l[0]=d,jt>=ce[It]&&1447>0&&at<=1447+1?this.WALKTRACE(te,f,h,He,Pe,m,D,$e,ce,De,u,n,a,d,i,l,Ct,c):null}if(at<=1447){let It=new Int32Array(h-f+2);It[0]=te-f+1,Vr.Copy2(ce,f,It,1,h-f+1),this.m_forwardHistory.push(It),It=new Int32Array(D-m+2),It[0]=Pe-m+1,Vr.Copy2(De,m,It,1,D-m+1),this.m_reverseHistory.push(It)}}return this.WALKTRACE(te,f,h,He,Pe,m,D,$e,ce,De,u,n,a,d,i,l,Ct,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,l=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!l||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const l=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const m=r.originalStart-h,D=r.modifiedStart-h;if(m<i||D<a||l&&!this.OriginalElementsAreEqual(m,m+r.originalLength)||c&&!this.ModifiedElementsAreEqual(D,D+r.modifiedLength))break;const x=(m===i&&D===a?5:0)+this._boundaryScore(m,r.originalLength,D,r.modifiedLength);x>d&&(d=x,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],l=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,m=h-f;if(l<5&&d<20&&m<20){const D=this._findBetterContiguousSequence(c,d,f,m,l);if(D){const[ae,x]=D;(ae!==i.originalStart+i.originalLength||x!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=ae-i.originalStart,i.modifiedLength=x-i.modifiedStart,a.originalStart=ae+l,a.modifiedStart=x+l,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const l=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<l;h++)for(let m=r;m<c;m++){const D=this._contiguousSequenceScore(h,m,a);D>0&&D>u&&(u=D,d=h,f=m)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,l=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+l}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Vr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Vr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Vr.Copy(e,0,i,0,e.length),Vr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Br.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Br.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const l=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Ir(i,a,l,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,l=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=l%2==0;return c===u?i-1:i-2}}}o(Ur,"LcsDiff");var li;(function(t){function e(r,i){return r instanceof pi?i:new s.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof pi?i:new s.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(li||(li={}));var ra;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(ra||(ra={}));const Di=o(class{constructor(t,e,n,r){this.diffCache=new Nt(32),this.indexDocumentCache=new Nt(32),this.codeDocumentCache=new Nt(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===L.Created||i===L.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const l=this.getDiff(2,a,t);if(l.length===0)return e;const c=t.offsetAt(new s.Position(e.line,e.character));let u=c;for(const m of l){if(m.modifiedStart<=c&&c<m.modifiedStart+m.modifiedLength)return;if(u<m.modifiedStart)break;u=u-(m.modifiedLength-m.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new s.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof s.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===L.Created||i===L.Deleted)return;const[a,l]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||l===void 0)return;const c=this.getDiff(1,a,l);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const ce of c){if(h<ce.originalStart)break;const De=ce.modifiedLength-ce.originalLength;if(ce.originalStart<=u){if(u<ce.originalStart+ce.originalLength)return;d+=De}else if(f<ce.originalStart+ce.originalLength)return;if(ce.originalStart<=f){if(f<ce.originalStart+ce.originalLength)return;h+=De}}const m=l.positionAt(d),D=l.positionAt(h),ae=a.getText(e),x=l.getText(li.makeRange(l,{start:m,end:D}));if(ae===x)return new s.Range(m.line,m.character,D.line,D.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof s.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new pi(t,Number.MAX_VALUE,Di.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:zi(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let Sr=Di;Sr.textDecoder=new TextDecoder("utf8");var pa;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(pa||(pa={}));class pi{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const l=e.charCodeAt(a);(l===13||l===10)&&(l===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=pi.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let l=a.length-1;for(;l>=0&&(a[l]===`
`||a[l]==="\r");)l--;return{lineNumber:e,text:a.substr(0,l+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const l=Math.floor((r+i)/2);n[l]>e?i=l:r=l+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(pi,"TextDocument");var Ui;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Ui||(Ui={}));var kn;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(kn||(kn={}));var Dr;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=kn.MAX_VALUE),i===Number.MAX_VALUE&&(i=kn.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&Ke.uinteger(i.line)&&Ke.uinteger(i.character)}o(n,"is"),t.is=n})(Dr||(Dr={}));var vr;(function(t){function e(r,i,a,l){if(Ke.uinteger(r)&&Ke.uinteger(i)&&Ke.uinteger(a)&&Ke.uinteger(l))return{start:Dr.create(r,i),end:Dr.create(a,l)};if(Dr.is(r)&&Dr.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+l+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.objectLiteral(i)&&Dr.is(i.start)&&Dr.is(i.end)}o(n,"is"),t.is=n})(vr||(vr={}));var ia;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&vr.is(i.range)&&(Ke.string(i.uri)||Ke.undefined(i.uri))}o(n,"is"),t.is=n})(ia||(ia={}));var Ri;(function(t){function e(r,i,a,l){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:l}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&vr.is(i.targetRange)&&Ke.string(i.targetUri)&&(vr.is(i.targetSelectionRange)||Ke.undefined(i.targetSelectionRange))&&(vr.is(i.originSelectionRange)||Ke.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(Ri||(Ri={}));var ci;(function(t){function e(r,i,a,l){return{red:r,green:i,blue:a,alpha:l}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.numberRange(i.red,0,1)&&Ke.numberRange(i.green,0,1)&&Ke.numberRange(i.blue,0,1)&&Ke.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(ci||(ci={}));var ma;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return vr.is(i.range)&&ci.is(i.color)}o(n,"is"),t.is=n})(ma||(ma={}));var Wi;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.string(i.label)&&(Ke.undefined(i.textEdit)||jr.is(i))&&(Ke.undefined(i.additionalTextEdits)||Ke.typedArray(i.additionalTextEdits,jr.is))}o(n,"is"),t.is=n})(Wi||(Wi={}));var $i;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})($i||($i={}));var aa;(function(t){function e(r,i,a,l,c){var u={startLine:r,endLine:i};return Ke.defined(a)&&(u.startCharacter=a),Ke.defined(l)&&(u.endCharacter=l),Ke.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.uinteger(i.startLine)&&Ke.uinteger(i.startLine)&&(Ke.undefined(i.startCharacter)||Ke.uinteger(i.startCharacter))&&(Ke.undefined(i.endCharacter)||Ke.uinteger(i.endCharacter))&&(Ke.undefined(i.kind)||Ke.string(i.kind))}o(n,"is"),t.is=n})(aa||(aa={}));var Ji;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&ia.is(i.location)&&Ke.string(i.message)}o(n,"is"),t.is=n})(Ji||(Ji={}));var ui;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(ui||(ui={}));var Vi;(function(t){t.Unnecessary=1,t.Deprecated=2})(Vi||(Vi={}));var ya;(function(t){function e(n){var r=n;return r!=null&&Ke.string(r.href)}o(e,"is"),t.is=e})(ya||(ya={}));var Lr;(function(t){function e(r,i,a,l,c,u){var d={range:r,message:i};return Ke.defined(a)&&(d.severity=a),Ke.defined(l)&&(d.code=l),Ke.defined(c)&&(d.source=c),Ke.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return Ke.defined(a)&&vr.is(a.range)&&Ke.string(a.message)&&(Ke.number(a.severity)||Ke.undefined(a.severity))&&(Ke.integer(a.code)||Ke.string(a.code)||Ke.undefined(a.code))&&(Ke.undefined(a.codeDescription)||Ke.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Ke.string(a.source)||Ke.undefined(a.source))&&(Ke.undefined(a.relatedInformation)||Ke.typedArray(a.relatedInformation,Ji.is))}o(n,"is"),t.is=n})(Lr||(Lr={}));var Ti;(function(t){function e(r,i){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];var c={title:r,command:i};return Ke.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.title)&&Ke.string(i.command)}o(n,"is"),t.is=n})(Ti||(Ti={}));var jr;(function(t){function e(a,l){return{range:a,newText:l}}o(e,"replace"),t.replace=e;function n(a,l){return{range:{start:a,end:a},newText:l}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var l=a;return Ke.objectLiteral(l)&&Ke.string(l.newText)&&vr.is(l.range)}o(i,"is"),t.is=i})(jr||(jr={}));var di;(function(t){function e(r,i,a){var l={label:r};return i!==void 0&&(l.needsConfirmation=i),a!==void 0&&(l.description=a),l}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Ke.objectLiteral(i)&&Ke.string(i.label)&&(Ke.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ke.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(di||(di={}));var Cr;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(Cr||(Cr={}));var Wr;(function(t){function e(a,l,c){return{range:a,newText:l,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,l,c){return{range:{start:a,end:a},newText:l,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,l){return{range:a,newText:"",annotationId:l}}o(r,"del"),t.del=r;function i(a){var l=a;return jr.is(l)&&(di.is(l.annotationId)||Cr.is(l.annotationId))}o(i,"is"),t.is=i})(Wr||(Wr={}));var Mi;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Vn.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(Mi||(Mi={}));var Pi;(function(t){function e(r,i,a){var l={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(l.options=i),a!==void 0&&(l.annotationId=a),l}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Cr.is(i.annotationId))}o(n,"is"),t.is=n})(Pi||(Pi={}));var Ii;(function(t){function e(r,i,a,l){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),l!==void 0&&(c.annotationId=l),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&Ke.string(i.oldUri)&&Ke.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ke.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ke.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Cr.is(i.annotationId))}o(n,"is"),t.is=n})(Ii||(Ii={}));var Li;(function(t){function e(r,i,a){var l={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(l.options=i),a!==void 0&&(l.annotationId=a),l}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&Ke.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ke.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ke.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Cr.is(i.annotationId))}o(n,"is"),t.is=n})(Li||(Li={}));var oa;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return Ke.string(i.kind)?Pi.is(i)||Ii.is(i)||Li.is(i):Mi.is(i)}))}o(e,"is"),t.is=e})(oa||(oa={}));var sa=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=jr.insert(e,n):Cr.is(r)?(a=r,i=Wr.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Wr.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=jr.replace(e,n):Cr.is(r)?(a=r,i=Wr.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Wr.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=jr.del(e):Cr.is(n)?(i=n,r=Wr.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Wr.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),la=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Cr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Jn=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new la(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Mi.is(r)){var i=new sa(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new sa(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(Vn.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new sa(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new sa(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new la,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;di.is(n)||Cr.is(n)?i=n:r=n;var a,l;if(i===void 0?a=Pi.create(e,r):(l=Cr.is(i)?i:this._changeAnnotations.manage(i),a=Pi.create(e,r,l)),this._workspaceEdit.documentChanges.push(a),l!==void 0)return l},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;di.is(r)||Cr.is(r)?a=r:i=r;var l,c;if(a===void 0?l=Ii.create(e,n,i):(c=Cr.is(a)?a:this._changeAnnotations.manage(a),l=Ii.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(l),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;di.is(n)||Cr.is(n)?i=n:r=n;var a,l;if(i===void 0?a=Li.create(e,r):(l=Cr.is(i)?i:this._changeAnnotations.manage(i),a=Li.create(e,r,l)),this._workspaceEdit.documentChanges.push(a),l!==void 0)return l},t}(),cr;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)}o(n,"is"),t.is=n})(cr||(cr={}));var wa;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.integer(i.version)}o(n,"is"),t.is=n})(wa||(wa={}));var Vn;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&(i.version===null||Ke.integer(i.version))}o(n,"is"),t.is=n})(Vn||(Vn={}));var Ua;(function(t){function e(r,i,a,l){return{uri:r,languageId:i,version:a,text:l}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.string(i.uri)&&Ke.string(i.languageId)&&Ke.integer(i.version)&&Ke.string(i.text)}o(n,"is"),t.is=n})(Ua||(Ua={}));var br;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(br||(br={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(br||(br={}));var fi;(function(t){function e(n){var r=n;return Ke.objectLiteral(n)&&br.is(r.kind)&&Ke.string(r.value)}o(e,"is"),t.is=e})(fi||(fi={}));var mi;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(mi||(mi={}));var yi;(function(t){t.PlainText=1,t.Snippet=2})(yi||(yi={}));var Wa;(function(t){t.Deprecated=1})(Wa||(Wa={}));var $a;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.newText)&&vr.is(i.insert)&&vr.is(i.replace)}o(n,"is"),t.is=n})($a||($a={}));var Sa;(function(t){t.asIs=1,t.adjustIndentation=2})(Sa||(Sa={}));var Ka;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Ka||(Ka={}));var Ga;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Ga||(Ga={}));var ca;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return Ke.string(i)||Ke.objectLiteral(i)&&Ke.string(i.language)&&Ke.string(i.value)}o(n,"is"),t.is=n})(ca||(ca={}));var za;(function(t){function e(n){var r=n;return!!r&&Ke.objectLiteral(r)&&(fi.is(r.contents)||ca.is(r.contents)||Ke.typedArray(r.contents,ca.is))&&(n.range===void 0||vr.is(n.range))}o(e,"is"),t.is=e})(za||(za={}));var Ja;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(Ja||(Ja={}));var Ca;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var l={label:n};return Ke.defined(r)&&(l.documentation=r),Ke.defined(i)?l.parameters=i:l.parameters=[],l}o(e,"create"),t.create=e})(Ca||(Ca={}));var ji;(function(t){t.Text=1,t.Read=2,t.Write=3})(ji||(ji={}));var ba;(function(t){function e(n,r){var i={range:n};return Ke.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(ba||(ba={}));var _a;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(_a||(_a={}));var Ea;(function(t){t.Deprecated=1})(Ea||(Ea={}));var Va;(function(t){function e(n,r,i,a,l){var c={name:n,kind:r,location:{uri:a,range:i}};return l&&(c.containerName=l),c}o(e,"create"),t.create=e})(Va||(Va={}));var ja;(function(t){function e(r,i,a,l,c,u){var d={name:r,detail:i,kind:a,range:l,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.name)&&Ke.number(i.kind)&&vr.is(i.range)&&vr.is(i.selectionRange)&&(i.detail===void 0||Ke.string(i.detail))&&(i.deprecated===void 0||Ke.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(ja||(ja={}));var Qr;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Qr||(Qr={}));var Ya;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.typedArray(i.diagnostics,Lr.is)&&(i.only===void 0||Ke.typedArray(i.only,Ke.string))}o(n,"is"),t.is=n})(Ya||(Ya={}));var qa;(function(t){function e(r,i,a){var l={title:r},c=!0;return typeof i=="string"?(c=!1,l.kind=i):Ti.is(i)?l.command=i:l.edit=i,c&&a!==void 0&&(l.kind=a),l}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ke.string(i.title)&&(i.diagnostics===void 0||Ke.typedArray(i.diagnostics,Lr.is))&&(i.kind===void 0||Ke.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Ti.is(i.command))&&(i.isPreferred===void 0||Ke.boolean(i.isPreferred))&&(i.edit===void 0||oa.is(i.edit))}o(n,"is"),t.is=n})(qa||(qa={}));var Xr;(function(t){function e(r,i){var a={range:r};return Ke.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&vr.is(i.range)&&(Ke.undefined(i.command)||Ti.is(i.command))}o(n,"is"),t.is=n})(Xr||(Xr={}));var Qa;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&Ke.uinteger(i.tabSize)&&Ke.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(Qa||(Qa={}));var Yi;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ke.defined(i)&&vr.is(i.range)&&(Ke.undefined(i.target)||Ke.string(i.target))}o(n,"is"),t.is=n})(Yi||(Yi={}));var Aa;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&vr.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Aa||(Aa={}));var jo=null,Da;(function(t){function e(a,l,c,u){return new Xa(a,l,c,u)}o(e,"create"),t.create=e;function n(a){var l=a;return!!(Ke.defined(l)&&Ke.string(l.uri)&&(Ke.undefined(l.languageId)||Ke.string(l.languageId))&&Ke.uinteger(l.lineCount)&&Ke.func(l.getText)&&Ke.func(l.positionAt)&&Ke.func(l.offsetAt))}o(n,"is"),t.is=n;function r(a,l){for(var c=a.getText(),u=i(l,function(ae,x){var ce=ae.range.start.line-x.range.start.line;return ce===0?ae.range.start.character-x.range.start.character:ce}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],m=a.offsetAt(h.range.start),D=a.offsetAt(h.range.end);if(D<=d)c=c.substring(0,m)+h.newText+c.substring(D,c.length);else throw new Error("Overlapping edit");d=m}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,l){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,l),i(d,l);for(var f=0,h=0,m=0;f<u.length&&h<d.length;){var D=l(u[f],d[h]);D<=0?a[m++]=u[f++]:a[m++]=d[h++]}for(;f<u.length;)a[m++]=u[f++];for(;h<d.length;)a[m++]=d[h++];return a}o(i,"mergeSort")})(Da||(Da={}));var Xa=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Dr.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var l=r-1;return Dr.create(l,e-n[l])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Ke;(function(t){var e=Object.prototype.toString;function n(D){return typeof D!="undefined"}o(n,"defined"),t.defined=n;function r(D){return typeof D=="undefined"}o(r,"undefined"),t.undefined=r;function i(D){return D===!0||D===!1}o(i,"boolean"),t.boolean=i;function a(D){return e.call(D)==="[object String]"}o(a,"string"),t.string=a;function l(D){return e.call(D)==="[object Number]"}o(l,"number"),t.number=l;function c(D,ae,x){return e.call(D)==="[object Number]"&&ae<=D&&D<=x}o(c,"numberRange"),t.numberRange=c;function u(D){return e.call(D)==="[object Number]"&&-2147483648<=D&&D<=2147483647}o(u,"integer"),t.integer=u;function d(D){return e.call(D)==="[object Number]"&&0<=D&&D<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(D){return e.call(D)==="[object Function]"}o(f,"func"),t.func=f;function h(D){return D!==null&&typeof D=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function m(D,ae){return Array.isArray(D)&&D.every(ae)}o(m,"typedArray"),t.typedArray=m})(Ke||(Ke={}));var wi;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(wi||(wi={}));var Ra;(function(t){function e(n){const r=n;return r!=null&&(wi.number(r.value)||wi.string(r.value))&&wi.string(r.target)}o(e,"is"),t.is=e})(Ra||(Ra={}));class Za extends s.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(Za,"ProtocolDiagnostic");var Zr;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function l(f){return f!==null&&typeof f=="object"}o(l,"objectLiteral"),t.objectLiteral=l;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(Zr||(Zr={}));var C;(function(t){function e(n){const r=n;return r&&Zr.string(r.language)&&Zr.string(r.value)}o(e,"is"),t.is=e})(C||(C={}));function v(t){const e=o(j=>s.Uri.parse(j),"nullConverter"),n=t!=null?t:e;function r(j){return n(j)}o(r,"asUri");function i(j){return j.map(a)}o(i,"asDiagnostics");function a(j){const st=new Za(h(j.range),j.message,D(j.severity),j.data);return j.code!==void 0&&(ya.is(j.codeDescription)?st.code={value:j.code,target:r(j.codeDescription.href)}:Ra.is(j.code)?(st.hasDiagnosticCode=!0,st.code={value:j.code.value,target:r(j.code.target)}):st.code=j.code),j.source&&(st.source=j.source),j.relatedInformation&&(st.relatedInformation=l(j.relatedInformation)),Array.isArray(j.tags)&&(st.tags=u(j.tags)),st}o(a,"asDiagnostic");function l(j){return j.map(c)}o(l,"asRelatedInformation");function c(j){return new s.DiagnosticRelatedInformation(at(j.location),j.message)}o(c,"asDiagnosticRelatedInformation");function u(j){if(!j)return;const st=[];for(const fn of j){const Mr=d(fn);Mr!==void 0&&st.push(Mr)}return st.length>0?st:void 0}o(u,"asDiagnosticTags");function d(j){switch(j){case Vi.Unnecessary:return s.DiagnosticTag.Unnecessary;case Vi.Deprecated:return s.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(j){if(!!j)return new s.Position(j.line,j.character)}o(f,"asPosition");function h(j){if(!!j)return new s.Range(f(j.start),f(j.end))}o(h,"asRange");function m(j){return j.map(st=>h(st))}o(m,"asRanges");function D(j){if(j==null)return s.DiagnosticSeverity.Error;switch(j){case ui.Error:return s.DiagnosticSeverity.Error;case ui.Warning:return s.DiagnosticSeverity.Warning;case ui.Information:return s.DiagnosticSeverity.Information;case ui.Hint:return s.DiagnosticSeverity.Hint}return s.DiagnosticSeverity.Error}o(D,"asDiagnosticSeverity");function ae(j){if(Zr.string(j))return new s.MarkdownString(j);if(C.is(j))return new s.MarkdownString().appendCodeblock(j.value,j.language);if(Array.isArray(j)){const fn=[];for(const Mr of j){const Ha=new s.MarkdownString;C.is(Mr)?Ha.appendCodeblock(Mr.value,Mr.language):Ha.appendMarkdown(Mr),fn.push(Ha)}return fn}let st;switch(j.kind){case br.Markdown:return new s.MarkdownString(j.value);case br.PlainText:return st=new s.MarkdownString,st.appendText(j.value),st;default:return st=new s.MarkdownString,st.appendText(`Unsupported Markup content received. Kind is: ${j.kind}`),st}}o(ae,"asHoverContent");function x(j){if(Zr.string(j))return j;switch(j.kind){case br.Markdown:return new s.MarkdownString(j.value);case br.PlainText:return j.value;default:return`Unsupported Markup content received. Kind is: ${j.kind}`}}o(x,"asDocumentation");function ce(j){if(!!j)return new s.Hover(ae(j.contents),h(j.range))}o(ce,"asHover");function De(j){if(!!j)return new s.TextEdit(h(j.range),j.newText)}o(De,"asTextEdit");function te(j){if(!!j)return j.map(De)}o(te,"asTextEdits");function Pe(j){if(!j)return;const st=new s.SignatureHelp;return Zr.number(j.activeSignature)?st.activeSignature=j.activeSignature:st.activeSignature=0,Zr.number(j.activeParameter)?st.activeParameter=j.activeParameter:st.activeParameter=0,j.signatures&&(st.signatures=He(j.signatures)),st}o(Pe,"asSignatureHelp");function He(j){return j.map($e)}o(He,"asSignatureInformations");function $e(j){const st=new s.SignatureInformation(j.label);return j.documentation!==void 0&&(st.documentation=x(j.documentation)),j.parameters!==void 0&&(st.parameters=Xe(j.parameters)),j.activeParameter!==void 0&&(st.activeParameter=j.activeParameter),st}o($e,"asSignatureInformation");function Xe(j){return j.map(Ct)}o(Xe,"asParameterInformations");function Ct(j){const st=new s.ParameterInformation(j.label);return j.documentation&&(st.documentation=x(j.documentation)),st}o(Ct,"asParameterInformation");function at(j){if(!!j)return new s.Location(n(j.uri),h(j.range))}o(at,"asLocation");function Ot(j){if(!!j)return It(j)}o(Ot,"asDeclarationResult");function Zt(j){if(!!j)return It(j)}o(Zt,"asDefinitionResult");function Kt(j){if(!j)return;const st={targetUri:n(j.targetUri),targetRange:h(j.targetSelectionRange),originSelectionRange:h(j.originSelectionRange),targetSelectionRange:h(j.targetSelectionRange)};if(!st.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return st}o(Kt,"asLocationLink");function It(j){if(!!j)return Zr.array(j)?j.length===0?[]:Ri.is(j[0])?j.map(Mr=>Kt(Mr)):j.map(fn=>at(fn)):Ri.is(j)?[Kt(j)]:at(j)}o(It,"asLocationResult");function jt(j){if(!!j)return j.map(st=>at(st))}o(jt,"asReferences");function dr(j){if(!!j)return j.map(ti)}o(dr,"asDocumentHighlights");function ti(j){const st=new s.DocumentHighlight(h(j.range));return Zr.number(j.kind)&&(st.kind=ni(j.kind)),st}o(ti,"asDocumentHighlight");function ni(j){switch(j){case ji.Text:return s.DocumentHighlightKind.Text;case ji.Read:return s.DocumentHighlightKind.Read;case ji.Write:return s.DocumentHighlightKind.Write}return s.DocumentHighlightKind.Text}o(ni,"asDocumentHighlightKind");function Gi(j,st){if(!!j)return j.map(fn=>Qs(fn,st))}o(Gi,"asSymbolInformations");function vi(j){return j<=_a.TypeParameter?j-1:s.SymbolKind.Property}o(vi,"asSymbolKind");function va(j){switch(j){case Ea.Deprecated:return s.SymbolTag.Deprecated;default:return}}o(va,"asSymbolTag");function So(j){if(j==null)return;const st=[];for(const fn of j){const Mr=va(fn);Mr!==void 0&&st.push(Mr)}return st.length===0?void 0:st}o(So,"asSymbolTags");function Qs(j,st){const fn=new s.SymbolInformation(j.name,vi(j.kind),h(j.location.range),j.location.uri?n(j.location.uri):st);return Xs(fn,j),j.containerName&&(fn.containerName=j.containerName),fn}o(Qs,"asSymbolInformation");function Cc(j){if(j!=null)return j.map(Go)}o(Cc,"asDocumentSymbols");function Go(j){var st;const fn=new s.DocumentSymbol(j.name,(st=j.detail)!=null?st:"",vi(j.kind),h(j.range),h(j.selectionRange));if(Xs(fn,j),j.children!==void 0&&j.children.length>0){const Mr=[];for(const Ha of j.children)Mr.push(Go(Ha));fn.children=Mr}return fn}o(Go,"asDocumentSymbol");function Xs(j,st){j.tags=So(st.tags),st.deprecated&&(j.tags?j.tags.includes(s.SymbolTag.Deprecated)||(j.tags=j.tags.concat(s.SymbolTag.Deprecated)):j.tags=[s.SymbolTag.Deprecated])}o(Xs,"fillTags");function zo(j){const st={title:j.title,command:j.command};return j.arguments&&(st.arguments=j.arguments),st}o(zo,"asCommand");function bc(j){if(!!j)return j.map(zo)}o(bc,"asCommands");const Oi=new Map;Oi.set(Qr.Empty,s.CodeActionKind.Empty),Oi.set(Qr.QuickFix,s.CodeActionKind.QuickFix),Oi.set(Qr.Refactor,s.CodeActionKind.Refactor),Oi.set(Qr.RefactorExtract,s.CodeActionKind.RefactorExtract),Oi.set(Qr.RefactorInline,s.CodeActionKind.RefactorInline),Oi.set(Qr.RefactorRewrite,s.CodeActionKind.RefactorRewrite),Oi.set(Qr.Source,s.CodeActionKind.Source),Oi.set(Qr.SourceOrganizeImports,s.CodeActionKind.SourceOrganizeImports);function Jo(j){if(j==null)return;let st=Oi.get(j);if(st)return st;const fn=j.split(".");st=s.CodeActionKind.Empty;for(const Mr of fn)st=st.append(Mr);return st}o(Jo,"asCodeActionKind");function _c(j){if(j!=null)return j.map(st=>Jo(st))}o(_c,"asCodeActionKinds");function Ec(j){if(j==null)return;const st=new s.CodeAction(j.title);return j.kind!==void 0&&(st.kind=Jo(j.kind)),j.diagnostics&&(st.diagnostics=i(j.diagnostics)),j.edit&&(st.edit=Zs(j.edit)),j.command&&(st.command=zo(j.command)),j.isPreferred!==void 0&&(st.isPreferred=j.isPreferred),st}o(Ec,"asCodeAction");function Zs(j){if(!j)return;const st=new s.WorkspaceEdit;return j.documentChanges?j.documentChanges.forEach(fn=>{if(Pi.is(fn))st.createFile(n(fn.uri),fn.options);else if(Ii.is(fn))st.renameFile(n(fn.oldUri),n(fn.newUri),fn.options);else if(Li.is(fn))st.deleteFile(n(fn.uri),fn.options);else if(Mi.is(fn))st.set(n(fn.textDocument.uri),te(fn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(fn,void 0,4)}`)}):j.changes&&Object.keys(j.changes).forEach(fn=>{st.set(n(fn),te(j.changes[fn]))}),st}o(Zs,"asWorkspaceEdit");function el(j){return new s.Color(j.red,j.green,j.blue,j.alpha)}o(el,"asColor");function tl(j){return new s.ColorInformation(h(j.range),el(j.color))}o(tl,"asColorInformation");function Ac(j){if(Array.isArray(j))return j.map(tl)}o(Ac,"asColorInformations");function nl(j){const st=new s.ColorPresentation(j.label);return st.additionalTextEdits=te(j.additionalTextEdits),j.textEdit&&(st.textEdit=De(j.textEdit)),st}o(nl,"asColorPresentation");function Dc(j){if(Array.isArray(j))return j.map(nl)}o(Dc,"asColorPresentations");function rl(j){if(j)switch(j){case $i.Comment:return s.FoldingRangeKind.Comment;case $i.Imports:return s.FoldingRangeKind.Imports;case $i.Region:return s.FoldingRangeKind.Region}}o(rl,"asFoldingRangeKind");function il(j){return new s.FoldingRange(j.startLine,j.endLine,rl(j.kind))}o(il,"asFoldingRange");function Rc(j){if(Array.isArray(j))return j.map(il)}o(Rc,"asFoldingRanges");function Vo(j){return new s.SelectionRange(h(j.range),j.parent?Vo(j.parent):void 0)}o(Vo,"asSelectionRange");function Tc(j){if(!Array.isArray(j))return[];const st=[];for(const fn of j)st.push(Vo(fn));return st}return o(Tc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:m,asPosition:f,asDiagnosticSeverity:D,asDiagnosticTag:d,asHover:ce,asTextEdit:De,asTextEdits:te,asSignatureHelp:Pe,asSignatureInformations:He,asSignatureInformation:$e,asParameterInformations:Xe,asParameterInformation:Ct,asDeclarationResult:Ot,asDefinitionResult:Zt,asLocation:at,asReferences:jt,asDocumentHighlights:dr,asDocumentHighlight:ti,asDocumentHighlightKind:ni,asSymbolKind:vi,asSymbolTag:va,asSymbolTags:So,asSymbolInformations:Gi,asSymbolInformation:Qs,asDocumentSymbols:Cc,asDocumentSymbol:Go,asCommand:zo,asCommands:bc,asCodeAction:Ec,asCodeActionKind:Jo,asCodeActionKinds:_c,asWorkspaceEdit:Zs,asFoldingRangeKind:rl,asFoldingRange:il,asFoldingRanges:Rc,asColor:el,asColorInformation:tl,asColorInformations:Ac,asColorPresentation:nl,asColorPresentations:Dc,asSelectionRange:Vo,asSelectionRanges:Tc}}o(v,"createConverter");var E;(function(t){function e(r,i){const{provider:a,repo:l}=i instanceof s.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:l})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:l}=i instanceof s.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:l})}o(n,"externalIndexUri"),t.externalIndexUri=n})(E||(E={}));var I;(function(t){function e(i){if(i.HEAD.type===q.Branch||i.HEAD.type===q.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==q.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,l=Ue.timeout){const c=await i.getMetadata(a),u=E.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return Ue.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},l)}o(r,"getIndexedTip"),t.getIndexedTip=r})(I||(I={}));var le;(function(t){const e=new Nt(1024);function n(l,c,u){let d=e.get(u);return d!==void 0||(d=l.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(l,c,u){const d=[];for(const h of u)d.push(n(l,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(l,c){const u=l.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(l){const c=l.authorName!==void 0?`  \u2022  ${l.authorName}`:"",u=l.commitDate!==void 0?`  \u2022  ${Pt(l.commitDate,{ago:!0})}`:"",d=l.branchName!==void 0?` - ${l.branchName}`:"",f=l.tags!==void 0?typeof l.tags=="string"?`  \u2022  ${l.tags}`:`  \u2022  ${l.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(le||(le={}));var be;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(be||(be={}));var xe;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(xe||(xe={}));var Ue;(function(t){t.timeout=5*60*1e3;const e=new Nt(32),n=new Nt(32);async function r(h,m,D,ae=t.timeout){const x=await i(h,m,D,ae);if(!(x===void 0||x.length===0))return x[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,m,D,ae=t.timeout){const x=c(h,m);let ce=e.get(x);if(ce===void 0||ce!==void 0&&Date.now()-ce.time>ae){const De=lt.getAllWorkspaceSnapshots(h,D,m);ce={time:Date.now(),promise:De,snapshots:void 0},e.set(x,ce)}if(ce.snapshots!==null){if(ce.snapshots===void 0){let De=await ce.promise;if(De===void 0){ce.snapshots=null;return}De.sort((te,Pe)=>Pe.creationDate.getTime()-te.creationDate.getTime()),De=De.filter(te=>te.state===5||te.state===3),ce.snapshots=De}return ce.snapshots}}o(i,"all"),t.all=i;async function a(h,m,D,ae,x=t.timeout){const ce=l(h,m);let De=n.get(ce);if(De===null)return;if(De!==void 0)return De;const te=c(h,D),Pe=e.get(te);if(Pe!==void 0&&Date.now()-Pe.time<=x){if(Pe.snapshots===null)return;const He=Pe.snapshots!==void 0?Pe.snapshots:await i(h,D,ae);if(He!==void 0){for(const $e of He)if($e.commitId===m)return n.set(ce,$e),$e}return}if(De=await lt.getWorkspaceSnapshot(m,ae),De===void 0){n.set(ce,null);return}return n.set(ce,De),De}o(a,"single"),t.single=a;function l(h,m){return`${h.toString()}/${m}`}o(l,"getSingleCacheKey");function c(h,m){return m!==void 0?`${m}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,m,D,ae=t.timeout){return await a(h,m,void 0,D,ae)!==void 0}o(u,"exists"),t.exists=u;async function d(h,m,D,ae=t.timeout){return await i(h,m,D,ae)!==void 0}o(d,"branch"),t.branch=d;async function f(h,m,D){const ae=new Map(D.map(De=>[De.commitId,De])),x=await le.all(h,m.uri,D.map(De=>De.commitId));if(x.length===0)return;const ce=[];for(const De of x){const te=ae.get(De.hash);te!==void 0&&ce.push({...te,commit:De})}if(ce.length!==0)return ce}o(f,"resolve"),t.resolve=f})(Ue||(Ue={}));var ut;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(ut||(ut={}));var lt;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function r(te,Pe,He){var $e;const Xe=await xt(te,{method:"POST",body:JSON.stringify(Pe),headers:{"Content-Type":"application/json",...(await He.authentication).getRichNavigationHeaders(),"x-correlation-id":($e=He.correlationId)!=null?$e:St()}});if(!!Xe.ok)return Xe.json()}o(r,"postRequest");async function i(te,Pe,He){const $e=await xt(te,{method:"POST",body:Pe,headers:(await He.authentication).getRichNavigationHeaders()});if(!!$e.ok)return await $e.json()}o(i,"postForm");function a(te,Pe){return`${n}/${e}/HttpLanguageService/${te}/${Pe}`}o(a,"makeRequestUrl");async function l(te,Pe){const He=await xt(`${n}/${e}/WorkspaceSnapshot?commitId=${te}`,{headers:(await Pe.authentication).getRichNavigationHeaders()});if(He.ok){const $e=await He.json();return{workspaceId:$e.workspaceId,snapshotId:$e.snapshotId,state:$e.state,commitId:te.toLowerCase(),branchName:void 0,creationDate:new Date}}}o(l,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=l;async function c(te,Pe,He){const $e=new un;$e.append("uriString",te.toString(!0)),He!==void 0&&$e.append("branchName",He);try{const Xe=await i(`${n}/${e}/WorkspaceSnapshot/all`,$e,Pe);return Xe===void 0?void 0:Xe.map(xe.asWorkspaceSnapshot)}catch(Xe){G.error(Xe);return}}o(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(te,Pe,He){const $e=new un;$e.append("uriString",te.toString(!0)),He!==void 0&&$e.append("branchName",He);try{const Xe=await i(`${n}/${e}/WorkspaceSnapshot/latest`,$e,Pe);return Xe===void 0?void 0:xe.asWorkspaceSnapshot(Xe)}catch(Xe){G.error(Xe);return}}o(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function d(te,Pe,He){try{return r(a(te,"textDocument/capabilities"),Pe,He)}catch($e){G.error($e);return}}o(d,"capabilities"),t.capabilities=d;async function f(te,Pe,He){try{return r(a(te,"textDocument/hover"),Pe,He)}catch($e){G.error($e);return}}o(f,"provideHover"),t.provideHover=f;async function h(te,Pe,He){try{return r(a(te,"textDocument/definition"),Pe,He)}catch($e){G.error($e);return}}o(h,"provideDefinition"),t.provideDefinition=h;async function m(te,Pe,He){try{return r(a(te,"textDocument/declaration"),Pe,He)}catch($e){G.error($e);return}}o(m,"provideDeclaration"),t.provideDeclaration=m;async function D(te,Pe,He){try{return r(a(te,"textDocument/typeDefinition"),Pe,He)}catch($e){G.error($e);return}}o(D,"provideTypeDefinition"),t.provideTypeDefinition=D;async function ae(te,Pe,He){try{return r(a(te,"textDocument/references"),Pe,He)}catch($e){G.error($e);return}}o(ae,"provideReferences"),t.provideReferences=ae;async function x(te,Pe,He){try{return r(a(te,"textDocument/foldingRange"),Pe,He)}catch($e){G.error($e);return}}o(x,"providerFoldingRanges"),t.providerFoldingRanges=x;async function ce(te,Pe,He){if(Pe=="")return;const $e=await xt(`${n}/${e}/Search/${te}/${Pe}`,{headers:(await He.authentication).getRichNavigationHeaders()});if($e.ok)return await $e.json()}o(ce,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=ce;async function De(te,Pe,He){const $e=s.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${te}/${Pe}/assets/designtime`,query:`id=${He}`});try{const Xe=await xt($e.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return Xe.ok?Xe.text():void 0}catch(Xe){G.error(Xe);return}}o(De,"getDesignTimeFileContent"),t.getDesignTimeFileContent=De})(lt||(lt={}));class Rt{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const l of i.added){const c=l.uri,u=ie.getIndexMemento(c);if(u!==void 0){const d=E.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?Ue.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&M(u.ref)&&Ue.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?I.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,ie.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,l=_(a);this.metadata.delete(l),this.getIndexMetadata(a).catch(void 0)})),this.disposable=s.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=zn.decode(e);if(i!==void 0){if(i.type===Kn.Latest)return r===F.Branch?this.getIndexedTip(e,n?0:Ue.timeout):void 0;if(i.type===Kn.SHA){const l=E.externalIndexUri(this.providerService,e);return l===void 0?void 0:await Ue.exists(l,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:Ue.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===Ge.Latest)return this.getIndexedTip(e,n?0:Ue.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=_(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=Ue.timeout){const r=await I.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new Ut(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=E.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),l=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=l.pullRequest===void 0?I.getIndexBranchName(l):void 0,d=await Ue.single(r,l.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(l.HEAD.type===q.Branch||l.HEAD.type===q.RemoteBranch){const D=zn.decode(e);if(D!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?D.type===Kn.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Ue.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:nn.Indexed}:{type:nn.NotIndexed}):{type:nn.NotIndexed}:D.type===Kn.Latest||D.type===Kn.SHA?{type:nn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:nn.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),m=this.providerService.getVirtualUriMetadata(e);if((h.index===Ge.Latest||h.index===Ge.Match)&&d!==void 0)return{type:nn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===Ge.TipPlusLatest&&m.provider.id==="github"){if(d!==void 0&&d.commitId===l.HEAD.sha)return{type:nn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(l.HEAD.type===q.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const D=await Ue.all(r,u,{authentication:c});if(D!==void 0&&D.length>0)return{type:nn.Active,sha:this.computeClosestIndex(e,l.HEAD.sha,D),branch:{name:u}}}}return d!==void 0?{type:nn.Indexed}:l.HEAD.type===q.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Ue.branch(r,u,{authentication:c}))?{type:nn.Indexed}:{type:nn.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let l;for(const f of a.commits)if(f.hash===n){l=f;break}if(l===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[l];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=E.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await Ue.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const l of i)l.branchName!==void 0&&a.push({workspaceId:l.workspaceId,snapshotId:l.snapshotId,hash:l.commitId,branch:{name:l.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:l}=n,c=[];if(r!==void 0){let u;const d=[`${O(l.sha)}`];if(r.type===nn.Active){const f=await r.sha;a.index===Ge.Latest||a.index===Ge.Match?(u=a.display===k.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(s.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===Ge.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(s.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(s.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===nn.Match?(u="$(layers)",d.push(s.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===nn.Indexed&&(u="$(layers)",d.push(s.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(Pn({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(Rt,"RichNavIndexProvider");var $t;(function(t){let e;function n(){return e=s.window.createStatusBarItem(s.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,s.window.onDidChangeActiveTextEditor(()=>{u()}),s.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>G.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function l(f){return r.get(_(f))}o(l,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(ae){const x=ae.lastIndexOf("/");return x<=0?ae:ae.substr(x+1)},"basename");const h=s.window.activeTextEditor;if(h===void 0){e.hide();return}const m=await c(h.document);if(m===void 0){e.hide();return}const D=await m.isDocumentIndexed(h.document);D===ke.Indexed?(e.text="$(compass)",e.tooltip=new s.MarkdownString(s.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):D===ke.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new s.MarkdownString(s.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const m=f.uri,D=l(m);if(D===void 0)return;const[ae,x,ce,De]=await Promise.all([D.getBranchName(),D.getMetadata(),D.getIndexMetadata(),D.getModeRefType(m)]);if(ce===void 0||!nn.hasIndex(ce.type))return;let te,Pe=!1;const He=zn.decode(m);(He==null?void 0:He.type)===Kn.Latest||(He==null?void 0:He.type)===Kn.SHA?(Pe=!0,te={display:k.Browse,index:He.type===Kn.Latest?Ge.Latest:Ge.Match}):te=(h=D.getCurrentIndexMode())!=null?h:D.getModeConfig(m,De);const $e=D.getUriMetadata(),Xe=s.l10n.t("{0} current","$(check)"),Ct={indexKind:"disable",label:s.l10n.t("Disable"),description:te.index===Ge.None?`  \u2022  ${Xe}`:void 0,detail:s.l10n.t("Disable rich navigation.")};let at,Ot;if(De===F.PullRequestBranch||De===F.PullRequestRemoteBranch||De===F.Commit||De===F.Tag){const Zt={indexKind:"match",label:s.l10n.t("Current indexed commit - readonly"),description:te.index===Ge.Match&&te.display===k.Browse?`  \u2022  ${Xe}`:void 0,detail:s.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},Kt={indexKind:"match+writeable",label:s.l10n.t("Current indexed commit - writable"),description:te.index===Ge.Match&&te.display===k.Edit?`  \u2022  ${Xe}`:void 0,detail:s.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let It=$e.provider.id==="github";It&&(It=x.HEAD.type===q.RemoteBranch?x.HEAD.branch.remote.accessLevel>=K.Write:!0);const jt=It?[Zt,Kt,Ct]:[Zt,Ct];Ot=await s.window.showQuickPick(jt,{placeHolder:"Pick a rich navigation mode"})}else if(De===F.Branch||De===F.RemoteBranch){const Zt={indexKind:"latest",label:s.l10n.t("Latest indexed commit"),description:te.index===Ge.Latest?`  \u2022  ${Xe}`:void 0,detail:s.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},Kt={indexKind:"tip+latest",label:s.l10n.t("Current commit & latest index"),description:te.index===Ge.TipPlusLatest?`  \u2022  ${Xe}`:void 0,detail:s.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},It=$e.provider.id==="github"?[Zt,Kt,Ct]:[Zt,Ct];Ot=await s.window.showQuickPick(It,{placeHolder:s.l10n.t("Pick a rich navigation mode for branch {0}",ae)})}if(Ot!==void 0&&(Ot.indexKind==="disable"?at={display:k.Edit,index:Ge.None}:Ot.indexKind==="match"?at={display:k.Browse,index:Ge.Match}:Ot.indexKind==="match+writeable"?at={display:k.Edit,index:Ge.Match}:Ot.indexKind==="tip+latest"?at={display:k.Edit,index:Ge.TipPlusLatest}:Ot.indexKind==="latest"&&(at={display:k.Browse,index:Ge.Latest}),at!==void 0&&!V.equals(te,at))){if(await D.hasChanges()&&at.display===k.Browse){await s.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await D.updateIndexMode(at),Pe){const Zt=await D.getNonIndexedWorkspaceDescriptor();Zt!==void 0&&Ce(D.getProviderService(),Zt)}}}o(d,"toggleIndexMode")})($t||($t={}));class cn{constructor(e){this.telemetryService=e}static createStatus(){return $t.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===nn.NotIndexed))return()=>new Nr(e,n,this.telemetryService)}}o(cn,"RichNavServiceProvider");var Jt;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const l={v:1,w:a[1],s:a[2],a:a[3]};return s.Uri.from({scheme:rn.scheme,authority:T(JSON.stringify(l)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==rn.scheme)return;let a;try{return a=JSON.parse(w(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(Jt||(Jt={}));const vn=o(class{constructor(){this._onDidChangeFile=new s.EventEmitter,this.cache=new Nt(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return vn.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw s.FileSystemError.FileNotFound();return{type:s.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:s.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw s.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw s.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw s.FileSystemError.NoPermissions()}delete(t,e){throw s.FileSystemError.NoPermissions()}rename(t,e,n){throw s.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==vn.scheme)return;const n=Jt.toRichNavComponents(t);if(n===void 0)return;const r=await lt.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let rn=vn;rn.scheme="vsck-fs",rn.emptyDisposable={dispose:()=>{}};var ke;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(ke||(ke={}));const En=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const l=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(l),this.indexMetadata=this.providerService.getIndexMetadata(l)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(l,this.metadata)]).then(async c=>{var u,d;const[f,h,m]=this.currentlyResolved,[D,ae,x]=c,ce=this.providerService.getModeConfig(l,x);if(f!==void 0&&h!==void 0&&m!==void 0&&f.HEAD.sha===D.HEAD.sha&&ae!==void 0&&h.type===ae.type&&m.index===ce.index&&m.display===ce.display){const te=(h==null?void 0:h.type)===nn.Active?await h.sha:void 0,Pe=(ae==null?void 0:ae.type)===nn.Active?await ae.sha:void 0;if(te===Pe)return}const De={newDisplayMode:ce.display,newIndexMode:ce.index,newIndexType:(ae==null?void 0:ae.type)===void 0?"undefined":nn[ae==null?void 0:ae.type],currentDisplayMode:(u=m==null?void 0:m.display)!=null?u:"undefined",currentIndexMode:(d=m==null?void 0:m.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":nn[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",De),this.currentlyResolved=[D,ae,ce];for(const te of this.registeredFeatures.values())te.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,Jr.isActive(ae)){const te=E.externalIndexUri(this.providerService,D),Pe=await ae.sha;if(te!==void 0&&Pe!==void 0){const He=await Ue.single(te,Pe,I.getIndexBranchName(D),{authentication:this.providerService.getAuthentication(l)});He!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:He.snapshotId}),this.workspaceSnapshot=He,this.documentListeners=this.installDocumentListeners(),((ce==null?void 0:ce.display)===k.Edit||D.HEAD.sha!==Pe)&&(this.mapper=new Sr(this.providerService,l,Pe,D.HEAD.sha)))}}await $t.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Nt(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{_(a.repository.uri)===_(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const l of a)if(_(l)===_(this.repository.uri)){r();break}})),this.environmentListeners=s.Disposable.from(...i),r(!0),$t.addService(this),this.indexMetadata.then(async a=>{var l;const c=this.repository.uri;let u=!1;const d=zn.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===Kn.Latest&&a.type!==nn.Active||d.type===Kn.SHA&&(a.type!==nn.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(l=this.currentlyResolved[2])!=null?l:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===k.Browse&&a!==void 0&&h.index!==Ge.None&&a.type!==nn.Active?u=!0:(a==null?void 0:a.type)===nn.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===k.Browse,u=!0)}u&&s.window.showWarningMessage(s.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),En.fileSystemProvider===void 0&&(En.fileSystemProvider=new rn,s.workspace.registerFileSystemProvider(rn.scheme,En.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===Ge.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===Ge.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await ie.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return _(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),$t.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Et.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return I.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:se.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===nn.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=E.externalIndexUri(this.providerService,t),n=I.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await Ue.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await le.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=E.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([le.get(this.providerService,this.repository.uri,t),Ue.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Et.scheme!==r&&rn.scheme!==r)return;const i=n.uri.toString();if(r===Et.scheme&&!i.startsWith(this.repositoryRoot)||r===rn.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let l=this.capabilitiesCache.get(i);if(l!==null){if(l===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),l=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,l===void 0?null:l)}l===void 0||!s.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,l,a)}},"openHandler");return t.push(s.workspace.onDidOpenTextDocument(e)),s.workspace.textDocuments.forEach(e),t.push(s.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),s.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,l=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((x,ce)=>{const De=`/${r.snapshotId}/source/`;this.metadata.then(te=>{x(v(Pe=>{const He=s.Uri.parse(Pe);if(te===void 0)return He;try{if(He.scheme==="vsck"&&He.authority===r.workspaceId&&He.path.startsWith(De))return this.repository.createRelativeUri(He.path.substr(De.length));const $e=Jt.toVSCode(Pe);return $e!==void 0?(this.knownDesignTimeFiles.add($e.toString()),$e):He}catch($e){return He}}))},ce)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(x){const ce=d.exec(x);return ce===null||ce.length===2}o(f,"designTimeFilter");function h(x){if(x==null)return x;if(Array.isArray(x)){if(x.length===0)return[];const ce=x[0];return typeof ce.uri=="string"?x.filter(Pe=>f(Pe.uri)):typeof ce.targetUri=="string"?x.filter(Pe=>f(Pe.targetUri)):[]}return d.exec(x.uri)===null?x:void 0}o(h,"filterDesignTimeFiles");async function m(x,ce,De){var te,Pe,He;if(De==null||x===void 0)return De;const $e=new Map(s.workspace.textDocuments.map(Ct=>[Ct.uri.toString(!0),Ct]));if(Array.isArray(De)){const Ct=[],at=[];if(De.length===0)return[];for(const Ot of De){const Zt=Ot;if(Zt.uri instanceof s.Uri){const Kt=await x.mapRangeFromIndexToCode((te=$e.get(Zt.uri.toString()))!=null?te:Zt.uri,Zt.range);Kt!==void 0&&Ct.push(new s.Location(Zt.uri,Kt))}else{const Kt=Ot,It=(Pe=$e.get(Kt.targetUri.toString()))!=null?Pe:Kt.targetUri,jt=Kt.originSelectionRange?await x.mapRangeFromIndexToCode(ce,Kt.originSelectionRange):void 0;if(jt!==void 0||Kt.originSelectionRange===void 0){const dr=await x.mapRangeFromIndexToCode(It,Kt.targetRange);if(dr!==void 0){const ti=Kt.targetSelectionRange?await x.mapRangeFromIndexToCode(It,Kt.targetSelectionRange):void 0;(ti!==void 0||Kt.targetSelectionRange===void 0)&&at.push({targetUri:Kt.targetUri,targetRange:dr,targetSelectionRange:ti,originSelectionRange:jt})}}}}return Ct.length>0?Ct:at}const Xe=await x.mapRangeFromIndexToCode((He=$e.get(De.uri.toString()))!=null?He:De.uri,De.range);if(Xe!==void 0)return new s.Location(De.uri,Xe)}o(m,"mapLocations");const D=o(x=>({authentication:this.providerService.getAuthentication(x.uri),correlationId:St()}),"getRestApiOptions"),ae=o((x,ce)=>{const De={method:x,correlationId:ce.correlationId};this.telemetryService.publicLog2("codex.restAPICall",De)},"sendTelemetry");En.registerCapability(i,"hoverProvider",e)&&c.push(s.languages.registerHoverProvider(l,{provideHover:async(x,ce)=>{const De=await this.createTextDocumentPositionParams(x,ce);if(De===void 0)return;const te=D(x);return ae("codex.provideHover",te),(await u).asHover(await lt.provideHover(n,De,te))}})),En.registerCapability(i,"definitionProvider",e)&&c.push(s.languages.registerDefinitionProvider(l,{provideDefinition:async(x,ce)=>{const De=await this.createTextDocumentPositionParams(x,ce);if(De===void 0)return;const te=D(x);return ae("codex.provideDefinition",te),m(this.mapper,x,(await u).asDefinitionResult(h(await lt.provideDefinition(n,De,te))))}})),En.registerCapability(i,"declarationProvider",e)&&c.push(s.languages.registerDeclarationProvider(l,{provideDeclaration:async(x,ce)=>{const De=await this.createTextDocumentPositionParams(x,ce);if(De===void 0)return;const te=D(x);return ae("codex.provideDeclaration",te),m(this.mapper,x,(await u).asDeclarationResult(h(await lt.provideDeclaration(n,De,te))))}})),En.registerCapability(i,"typeDefinitionProvider",e)&&c.push(s.languages.registerTypeDefinitionProvider(l,{provideTypeDefinition:async(x,ce)=>{const De=await this.createTextDocumentPositionParams(x,ce);if(De===void 0)return;const te=D(x);return ae("codex.provideTypeDefinition",te),m(this.mapper,x,(await u).asDefinitionResult(h(await lt.provideTypeDefinition(n,De,te))))}})),En.registerCapability(i,"referencesProvider",e)&&c.push(s.languages.registerReferenceProvider(l,{provideReferences:async(x,ce,De)=>{const te=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(x,ce):ce;if(te===void 0)return;const Pe={position:{line:te.line,character:te.character},textDocument:{uri:this.createRichNavDocumentUri(x.uri).toString(!0)},context:{includeDeclaration:De.includeDeclaration}},He=D(x);return ae("codex.provideReferences",He),m(this.mapper,x,(await u).asReferences(h(await lt.provideReferences(n,Pe,He))))}})),En.registerCapability(i,"foldingRangeProvider",e)&&c.push(s.languages.registerFoldingRangeProvider(l,{provideFoldingRanges:async x=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(x))return;const ce=D(x);return ae("codex.provideFoldingRanges",ce),(await u).asFoldingRanges(await lt.providerFoldingRanges(n,this.createTextDocumentParams(x.uri),ce))}})),En.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(s.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async x=>{const ce=D(t),De=await lt.provideWorkspaceSymbols(n,x,ce);if(De!==void 0)return(await u).asSymbolInformations(De)}})),this.registeredFeatures.set(t.uri.toString(),s.Disposable.from(...c)),$t.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await lt.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===rn.scheme){const r=Jt.toRichNavComponents(t);return r===void 0?t:s.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return s.Uri.file(n.substr(e.length))}},"_RichNavService");let Nr=En;Nr.localCapabilities=new Map([["javascript",Object.assign(ut.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(ut.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(ut.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(ut.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Nr.disabledCapabilities=new Map([["javascript",Object.assign(ut.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(ut.create(),{declarationProvider:!0})],["typescript",Object.assign(ut.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(ut.create(),{declarationProvider:!0})]]);var xi=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),hi=o((t,e,n)=>(xi(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),_o=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),eo=o((t,e,n,r)=>(xi(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),ei;class qi{constructor(e){_o(this,ei,void 0),eo(this,ei,e)}async provideEditSessionIdentity(e,n){await mr(hi(this,ei),e.uri);const r=hi(this,ei).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await hi(this,ei).getRepositoryContext(r),l=await hi(this,ei).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:l.cloneUrl.http,ref:a,sha:l.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=to(e),i=to(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?s.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?s.EditSessionIdentityMatch.Partial:s.EditSessionIdentityMatch.None}catch(r){return s.EditSessionIdentityMatch.Partial}}}o(qi,"EditSessionIdentityProvider"),ei=new WeakMap;function to(t){let{remote:e,ref:n,sha:r}=JSON.parse(t);return typeof e=="string"&&e.endsWith(".git")&&(e=e.slice(0,e.length-4)),{remote:e,ref:n,sha:r}}o(to,"normalizeEditSessionIdentity");var no=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Fr=o((t,e,n)=>(no(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),Ta=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),Ma=o((t,e,n,r)=>(no(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Rr;class ua{constructor(e){Ta(this,Rr,void 0),Ma(this,Rr,e),this.registerApiCommands()}registerApiCommands(){s.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await mr(Fr(this,Rr),e);const n=Fr(this,Rr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Fr(this,Rr).getRepositoryContext(n)})}async getMetadata(e){const n=Fr(this,Rr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await Fr(this,Rr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Fr(this,Rr).getRegisteredProvider(e)}getProviderUri(e){return B.getProviderUri(e)}getProviderRootUri(e){return Fr(this,Rr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Et.scheme&&Fr(this,Rr).hasProvider(e,n)}getVirtualUri(e){return B.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Fr(this,Rr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==B.scheme)return!1;await mr(Fr(this,Rr),e);const n=Fr(this,Rr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new Ut(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:ge.Debug}),i=await Fr(this,Rr).loadWorkspaceContents(n);return r.stop(),i}}o(ua,"ExtensionApi"),Rr=new WeakMap;var Pa=Object.defineProperty,ro=Object.getOwnPropertyDescriptor,Qi=o((t,e,n,r)=>{for(var i=r>1?void 0:r?ro(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&Pa(e,n,i),i},"fs_decorateClass");const da=s.FileSystemError.FileNotFound().code;class Ki{constructor(e){this.providerService=e,this._onDidChangeFile=new s.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=s.Disposable.from(s.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),s.workspace.registerFileSearchProvider(this.scheme,this),s.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case L.Created:return{type:s.FileChangeType.Created,uri:i.uri};case L.Changed:return{type:s.FileChangeType.Changed,uri:i.uri};case L.Deleted:return{type:s.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Et.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(G.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=B.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(l=>Q(a,l))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));G.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(_(i),i);const r=[...n.values()].map(i=>({type:s.FileChangeType.Changed,uri:i}));setTimeout(()=>{G.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=_(e);this.watchedUris.set(r,e);const i=mr(this.providerService,e).then(()=>this.providerService.watch(B.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new Ut(`fs.stat(${e.toString()})`);await mr(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(_(e),e);return a=await this.providerService.stat(B.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(_(e)),n.stop()}}async readDirectory(e){const n=new Ut(`fs.readDirectory(${e.toString()})`);await mr(this.providerService,e),this.implicitlyWatchedUris.set(_(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(B.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new Ut(`fs.createDirectory(${e.toString()})`);await mr(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw G.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new Ut(`fs.readFile(${e.toString()})`),r=_(e);let i;await mr(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(B.getProviderUri(e)),i}catch(a){throw a instanceof $n&&fe.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new Ut(`fs.writeFile(${e.toString()})`,{},n.length,r);await mr(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw s.FileSystemError.FileExists()}catch(l){if(l instanceof s.FileSystemError&&l.code===da){if(!r.create)throw s.FileSystemError.FileNotFound(e)}else throw l}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let l;try{l=await this.providerService.readFile(B.getProviderUri(e))}catch(c){if(c instanceof s.FileSystemError&&c.code===da)l=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,l)}}catch(l){throw G.error(l,i.context),l}}catch(a){throw a instanceof $n&&fe.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new Ut(`fs.delete(${e.toString()})`,{},n);await mr(this.providerService,e);try{switch((await this.stat(e)).type){case s.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case s.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw s.FileSystemError.NoPermissions()}}catch(i){throw G.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new Ut(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===s.FileType.Directory))throw s.FileSystemError.NoPermissions();for(const[a,l]of i)l===s.FileType.Directory?await this.deleteDirectory(s.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(s.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw G.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new Ut(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await mr(this.providerService,e);try{switch((await this.stat(e)).type){case s.FileType.File:{const l=await this.readFile(e);await this.writeFile(n,l,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case s.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw s.FileSystemError.NoPermissions()}}catch(a){throw G.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new Ut(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw G.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new Ut(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case s.FileType.File:{const l=await this.readFile(e);await this.writeFile(n,l,{create:!0,overwrite:r.overwrite});break}case s.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw s.FileSystemError.NoPermissions()}}catch(a){throw G.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new Ut(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw s.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[l,c]of a)c===s.FileType.Directory?await this.copyDirectory(s.Uri.joinPath(e,l),s.Uri.joinPath(n,l),r):await this.copy(s.Uri.joinPath(e,l),s.Uri.joinPath(n,l),r)}catch(a){throw G.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof s.FileSystemError&&n.code===da)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new Ut(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:ge.Debug});await mr(this.providerService,n.folder);let l;try{return l=await this.providerService.provideFileSearchResults(e,{...n,folder:B.getProviderUri(n.folder)},r),l==null?void 0:l.map(c=>B.getVirtualUri(c))}catch(c){throw G.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=l==null?void 0:l.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await mr(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:B.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:B.getVirtualUri(a.uri)})},i)}}o(Ki,"ChangeTrackingFileSystem"),Qi([Pr()],Ki.prototype,"stat",1),Qi([Pr()],Ki.prototype,"readDirectory",1),Qi([Pr()],Ki.prototype,"readFile",1);const io=o(class{constructor(t){this.providerService=t,this.lock=new gr("PendingRepositoryOpenActions"),this.disposable=s.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=ie.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:l}=await this.providerService.getMetadata(e.uri);if(l===void 0||l.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?s.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):s.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";l.behind===1?d=s.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,l.behind.toString()):l.behind>1&&(d=s.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,l.behind.toString()));const f=[u,d].join(`

`),h={title:s.l10n.t("Sync")},m={title:s.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},D={title:s.l10n.t("Don't Show Again")},ae=await s.window.showInformationMessage(f,{modal:!0},h,m,D);switch(ae==null?void 0:ae.title){case h.title:await s.commands.executeCommand("remoteHub.sync");break;case D.title:await ie.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){G.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){G.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){G.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const l=s.Uri.joinPath(t,n);let c;try{c=await s.workspace.fs.stat(l)}catch{}if((c==null?void 0:c.type)===s.FileType.Directory)s.commands.executeCommand("revealInExplorer",l);else{let u;i!==void 0&&(u={selection:new s.Range(Number(i)-1,0,a!=null?a:i,0)}),s.commands.executeCommand("vscode.open",l,u)}}}}setChangesetToApply(t,e){return G.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return G.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){G.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){G.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${_(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&P(r)?s.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return G.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:io.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let ao=io;ao.storageSchemaVersion=1;function gi(){}o(gi,"Diff"),gi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function l(x){return i?(setTimeout(function(){i(void 0,x)},0),!0):x}o(l,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],m=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&m+1>=u)return l([{value:this.join(n),count:n.length}]);function D(){for(var x=-1*d;x<=d;x+=2){var ce=void 0,De=h[x-1],te=h[x+1],Pe=(te?te.newPos:0)-x;De&&(h[x-1]=void 0);var He=De&&De.newPos+1<c,$e=te&&0<=Pe&&Pe<u;if(!He&&!$e){h[x]=void 0;continue}if(!He||$e&&De.newPos<te.newPos?(ce=Me(te),a.pushComponent(ce.components,void 0,!0)):(ce=De,ce.newPos++,a.pushComponent(ce.components,!0,void 0)),Pe=a.extractCommon(ce,n,e,x),ce.newPos+1>=c&&Pe+1>=u)return l(oo(a,ce.components,n,e,a.useLongestToken));h[x]=ce}d++}if(o(D,"execEditLength"),i)o(function x(){setTimeout(function(){if(d>f)return i();D()||x()},0)},"exec")();else for(;d<=f;){var ae=D();if(ae)return ae}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,l=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<l&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function oo(t,e,n,r,i){for(var a=0,l=e.length,c=0,u=0;a<l;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(D,ae){var x=r[u+ae];return x.length>D.length?x:D}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var m=e[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&t.equals("",m.value)&&(e[l-2].value+=m.value,e.pop()),e}o(oo,"buildValues");function Me(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(Me,"clonePath");var ft=new gi;function bt(t,e,n){return ft.diff(t,e,n)}o(bt,"diffChars");function Wt(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Wt,"generateOptions");var mn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,An=/\S/,Cn=new gi;Cn.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!An.test(t)&&!An.test(e)},Cn.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&mn.test(e[n])&&mn.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function _r(t,e,n){return n=Wt(n,{ignoreWhitespace:!0}),Cn.diff(t,e,n)}o(_r,"diffWords");function Er(t,e,n){return Cn.diff(t,e,n)}o(Er,"diffWordsWithSpace");var ir=new gi;ir.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Tr(t,e,n){return ir.diff(t,e,n)}o(Tr,"diffLines");function ki(t,e,n){var r=Wt(n,{ignoreWhitespace:!0});return ir.diff(t,e,r)}o(ki,"diffTrimmedLines");var ur=new gi;ur.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Yo(t,e,n){return ur.diff(t,e,n)}o(Yo,"diffSentences");var qo=new gi;qo.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Pc(t,e,n){return qo.diff(t,e,n)}o(Pc,"diffCss");function so(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?so=o(function(e){return typeof e},"_typeof"):so=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),so(t)}o(so,"_typeof");function Ni(t){return al(t)||ol(t)||sl(t)||ll()}o(Ni,"_toConsumableArray");function al(t){if(Array.isArray(t))return Eo(t)}o(al,"_arrayWithoutHoles");function ol(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(ol,"_iterableToArray");function sl(t,e){if(!!t){if(typeof t=="string")return Eo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eo(t,e)}}o(sl,"_unsupportedIterableToArray");function Eo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(Eo,"_arrayLikeToArray");function ll(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(ll,"_nonIterableSpread");var cl=Object.prototype.toString,fa=new gi;fa.useLongestToken=!0,fa.tokenize=ir.tokenize,fa.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,l){return typeof l=="undefined"?n:l}:r;return typeof t=="string"?t:JSON.stringify(Ao(t,null,null,i),i,"  ")},fa.equals=function(t,e){return gi.prototype.equals.call(fa,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Ic(t,e,n){return fa.diff(t,e,n)}o(Ic,"diffJson");function Ao(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var l;if(cl.call(t)==="[object Array]"){for(e.push(t),l=new Array(t.length),n.push(l),a=0;a<t.length;a+=1)l[a]=Ao(t[a],e,n,r,i);return e.pop(),n.pop(),l}if(t&&t.toJSON&&(t=t.toJSON()),so(t)==="object"&&t!==null){e.push(t),l={},n.push(l);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],l[u]=Ao(t[u],e,n,r,u);e.pop(),n.pop()}else l=t;return l}o(Ao,"canonicalize");var lo=new gi;lo.tokenize=function(t){return t.slice()},lo.join=lo.removeEmpty=function(t){return t};function Lc(t,e,n){return lo.diff(t,e,n)}o(Lc,"diffArrays");function Ia(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function l(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var m=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(m))break;if(/^@@/.test(m))d.hunks.push(u());else{if(m&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(m));a++}}}o(l,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",m=f[2].split("	",2),D=m[0].replace(/\\\\/g,"\\");/^".*"$/.test(D)&&(D=D.substr(1,D.length-2)),d[h+"FileName"]=D,d[h+"Header"]=(m[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),m={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};m.oldLines===0&&(m.oldStart+=1),m.newLines===0&&(m.newStart+=1);for(var D=0,ae=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var x=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(x==="+"||x==="-"||x===" "||x==="\\")m.lines.push(n[a]),m.linedelimiters.push(r[a]||`
`),x==="+"?D++:x==="-"?ae++:x===" "&&(D++,ae++);else break}if(!D&&m.newLines===1&&(m.newLines=0),!ae&&m.oldLines===1&&(m.oldLines=0),e.strict){if(D!==m.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(ae!==m.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return m}for(o(u,"parseHunk");a<n.length;)l();return i}o(Ia,"parsePatch");function ul(t,e,n){var r=!0,i=!1,a=!1,l=1;return o(function c(){if(r&&!a){if(i?l++:r=!1,t+l<=n)return l;a=!0}if(!i)return a||(r=!0),e<=t-l?-l++:(i=!0,c())},"iterator")}o(ul,"distanceIterator");function Qo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ia(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,l=n.compareLine||function(ti,ni,Gi,vi){return ni===vi},c=0,u=n.fuzzFactor||0,d=0,f=0,h,m;function D(ti,ni){for(var Gi=0;Gi<ti.lines.length;Gi++){var vi=ti.lines[Gi],va=vi.length>0?vi[0]:" ",So=vi.length>0?vi.substr(1):vi;if(va===" "||va==="-"){if(!l(ni+1,r[ni],va,So)&&(c++,c>u))return!1;ni++}}return!0}o(D,"hunkFits");for(var ae=0;ae<a.length;ae++){for(var x=a[ae],ce=r.length-x.oldLines,De=0,te=f+x.oldStart-1,Pe=ul(te,d,ce);De!==void 0;De=Pe())if(D(x,te+De)){x.offset=f+=De;break}if(De===void 0)return!1;d=x.offset+x.oldStart+x.oldLines}for(var He=0,$e=0;$e<a.length;$e++){var Xe=a[$e],Ct=Xe.oldStart+Xe.offset+He-1;He+=Xe.newLines-Xe.oldLines;for(var at=0;at<Xe.lines.length;at++){var Ot=Xe.lines[at],Zt=Ot.length>0?Ot[0]:" ",Kt=Ot.length>0?Ot.substr(1):Ot,It=Xe.linedelimiters[at];if(Zt===" ")Ct++;else if(Zt==="-")r.splice(Ct,1),i.splice(Ct,1);else if(Zt==="+")r.splice(Ct,0,Kt),i.splice(Ct,0,It),Ct++;else if(Zt==="\\"){var jt=Xe.lines[at-1]?Xe.lines[at-1][0]:null;jt==="+"?h=!0:jt==="-"&&(m=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else m&&(r.push(""),i.push(`
`));for(var dr=0;dr<r.length-1;dr++)r[dr]=r[dr]+i[dr];return r.join("")}o(Qo,"applyPatch");function xc(t,e){typeof t=="string"&&(t=Ia(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,l){if(a)return e.complete(a);var c=Qo(l,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(xc,"applyPatches");function Xo(t,e,n,r,i,a,l){l||(l={}),typeof l.context=="undefined"&&(l.context=4);var c=Tr(n,r,l);c.push({value:"",lines:[]});function u(De){return De.map(function(te){return" "+te})}o(u,"contextLines");for(var d=[],f=0,h=0,m=[],D=1,ae=1,x=o(function(te){var Pe=c[te],He=Pe.lines||Pe.value.replace(/\n$/,"").split(`
`);if(Pe.lines=He,Pe.added||Pe.removed){var $e;if(!f){var Xe=c[te-1];f=D,h=ae,Xe&&(m=l.context>0?u(Xe.lines.slice(-l.context)):[],f-=m.length,h-=m.length)}($e=m).push.apply($e,Ni(He.map(function(dr){return(Pe.added?"+":"-")+dr}))),Pe.added?ae+=He.length:D+=He.length}else{if(f)if(He.length<=l.context*2&&te<c.length-2){var Ct;(Ct=m).push.apply(Ct,Ni(u(He)))}else{var at,Ot=Math.min(He.length,l.context);(at=m).push.apply(at,Ni(u(He.slice(0,Ot))));var Zt={oldStart:f,oldLines:D-f+Ot,newStart:h,newLines:ae-h+Ot,lines:m};if(te>=c.length-2&&He.length<=l.context){var Kt=/\n$/.test(n),It=/\n$/.test(r),jt=He.length==0&&m.length>Zt.oldLines;!Kt&&jt&&n.length>0&&m.splice(Zt.oldLines,0,"\\ No newline at end of file"),(!Kt&&!jt||!It)&&m.push("\\ No newline at end of file")}d.push(Zt),f=0,h=0,m=[]}D+=He.length,ae+=He.length}},"_loop"),ce=0;ce<c.length;ce++)x(ce);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(Xo,"structuredPatch");function dl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(dl,"formatPatch");function fl(t,e,n,r,i,a,l){return dl(Xo(t,e,n,r,i,a,l))}o(fl,"createTwoFilesPatch");function hl(t,e,n,r,i,a){return fl(t,t,e,n,r,i,a)}o(hl,"createPatch");function gl(t,e){return t.length!==e.length?!1:Do(t,e)}o(gl,"arrayEqual");function Do(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Do,"arrayStartsWith");function vl(t){var e=To(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(vl,"calcLineCount");function kc(t,e,n){t=Zo(t,n),e=Zo(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(es(t)?es(e)?(r.oldFileName=co(r,t.oldFileName,e.oldFileName),r.newFileName=co(r,t.newFileName,e.newFileName),r.oldHeader=co(r,t.oldHeader,e.oldHeader),r.newHeader=co(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,l=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(ts(u,d))r.hunks.push(ns(u,l)),i++,c+=u.newLines-u.oldLines;else if(ts(d,u))r.hunks.push(ns(d,c)),a++,l+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+l,d.oldStart+c),newLines:0,lines:[]};pl(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o(kc,"merge");function Zo(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ia(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Xo(void 0,void 0,e,t)}return t}o(Zo,"loadPatch");function es(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(es,"fileNameChanged");function co(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(co,"selectField");function ts(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(ts,"hunkBefore");function ns(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(ns,"cloneHunk");function pl(t,e,n,r,i){var a={offset:e,lines:n,index:0},l={offset:r,lines:i,index:0};for(is(t,a,l),is(t,l,a);a.index<a.lines.length&&l.index<l.lines.length;){var c=a.lines[a.index],u=l.lines[l.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))ml(t,a,l);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,Ni(Xi(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,Ni(Xi(l)))}else c[0]==="-"&&u[0]===" "?rs(t,a,l):u[0]==="-"&&c[0]===" "?rs(t,l,a,!0):c===u?(t.lines.push(c),a.index++,l.index++):Ro(t,Xi(a),Xi(l))}as(t,a),as(t,l),vl(t)}o(pl,"mergeLines");function ml(t,e,n){var r=Xi(e),i=Xi(n);if(os(r)&&os(i)){if(Do(r,i)&&ss(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,Ni(r));return}else if(Do(i,r)&&ss(e,i,i.length-r.length)){var l;(l=t.lines).push.apply(l,Ni(i));return}}else if(gl(r,i)){var c;(c=t.lines).push.apply(c,Ni(r));return}Ro(t,r,i)}o(ml,"mutualChange");function rs(t,e,n,r){var i=Xi(e),a=yl(n,i);if(a.merged){var l;(l=t.lines).push.apply(l,Ni(a.merged))}else Ro(t,r?a:i,r?i:a)}o(rs,"removal");function Ro(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(Ro,"conflict");function is(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(is,"insertLeading");function as(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(as,"insertTrailing");function Xi(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(Xi,"collectChange");function yl(t,e){for(var n=[],r=[],i=0,a=!1,l=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(l=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):l=!0}if((e[i]||"")[0]==="+"&&a&&(l=!0),l)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(yl,"collectContext");function os(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(os,"allRemoves");function ss(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(ss,"skipRemoveSuperset");function To(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=To(r.mine),a=To(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(To,"calcOldNewLineCount");function Nc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Nc,"convertChangesToDMP");function Fc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(wl(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Fc,"convertChangesToXML");function wl(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(wl,"escapeHTML");var ls=/[^a-zA-Z0-9]/,cs=/\s/,us=/[\r\n]/,Sl=/\n\r?\n$/,Cl=/^\r?\n\r?\n/,rt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(rt||(rt={}));function bl(t,e){return t<e?t:e}o(bl,"min");function _l(t,e){return t>e?t:e}o(_l,"max");var $r=Qe,La=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case rt.DIFF_INSERT:i="+";break;case rt.DIFF_DELETE:i="-";break;case rt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),El=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[rt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var l=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,l,a);return u&&f.unshift([rt.DIFF_EQUAL,u]),d&&f.push([rt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=$r.min(e.length,n.length),a=i,l=0;r<a;)e.substring(l,a)===n.substring(l,a)?(r=a,l=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=$r.min(e.length,n.length),a=i,l=0;r<a;)e.substring(e.length-a,e.length-l)===n.substring(n.length-a,n.length-l)?(r=a,l=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,l=0,c=0,u=0,d=0,f=0;l<e.length;)e[l][0]===rt.DIFF_EQUAL?(r[i++]=l,c=d,u=f,d=0,f=0,a=e[l][1]):(e[l][0]===rt.DIFF_INSERT?d+=e[l][1].length:f+=e[l][1].length,a&&a.length<=$r.max(c,u)&&a.length<=$r.max(d,f)&&(e.splice(r[i-1],0,[rt.DIFF_DELETE,a]),e[r[i-1]+1][0]=rt.DIFF_INSERT,i--,i--,l=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),l++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]===rt.DIFF_DELETE&&e[l][0]===rt.DIFF_INSERT){var h=e[l-1][1],m=e[l][1],D=this.diff_commonOverlap_(h,m),ae=this.diff_commonOverlap_(m,h);D>=ae?(D>=h.length/2||D>=m.length/2)&&(e.splice(l,0,[rt.DIFF_EQUAL,m.substring(0,D)]),e[l-1][1]=h.substring(0,h.length-D),e[l+1][1]=m.substring(D),l++):(ae>=h.length/2||ae>=m.length/2)&&(e.splice(l,0,[rt.DIFF_EQUAL,h.substring(0,ae)]),e[l-1][0]=rt.DIFF_INSERT,e[l-1][1]=m.substring(0,m.length-ae),e[l+1][0]=rt.DIFF_DELETE,e[l+1][1]=h.substring(ae),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===rt.DIFF_EQUAL&&e[n+1][0]===rt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],l=this.diff_commonSuffix(r,i);if(l){var c=i.substring(i.length-l);r=r.substring(0,r.length-l),i=c+i.substring(0,i.length-l),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var m=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);m>=h&&(h=m,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,l=0,c=!1,u=!1,d=!1,f=!1;l<e.length;)e[l][0]===rt.DIFF_EQUAL?(e[l][1].length<this.diffEditCost&&(d||f)?(r[i++]=l,c=d,u=f,a=e[l][1]):(i=0,a=null),d=f=!1):(e[l][0]===rt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[rt.DIFF_DELETE,a]),e[r[i-1]+1][0]=rt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,l=i>0?r[i-1]:-1,d=f=!1),n=!0)),l++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([rt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",l="",c;n<e.length;)switch(e[n][0]){case rt.DIFF_INSERT:i++,l+=e[n][1],n++;break;case rt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case rt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(l,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===rt.DIFF_EQUAL?e[n-r-i-1][1]+=l.substring(0,c):(e.splice(0,0,[rt.DIFF_EQUAL,l.substring(0,c)]),n++),l=l.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(l,a),c!==0&&(e[n][1]=l.substring(l.length-c)+e[n][1],l=l.substring(0,l.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[rt.DIFF_DELETE,a]),n++),l.length&&(e.splice(n,0,[rt.DIFF_INSERT,l]),n++),n++):n!==0&&e[n-1][0]===rt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",l="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===rt.DIFF_EQUAL&&e[n+1][0]===rt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,l=0,c;for(c=0;c<e.length&&(e[c][0]!==rt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==rt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,l=i;return e.length!==c&&e[c][0]===rt.DIFF_DELETE?l:l+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(l,"&para;<br>");switch(u){case rt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case rt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case rt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==rt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==rt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1];switch(l){case rt.DIFF_INSERT:r+=c.length;break;case rt.DIFF_DELETE:i+=c.length;break;case rt.DIFF_EQUAL:n+=$r.max(r,i),r=0,i=0;break}}return n+=$r.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case rt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case rt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case rt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,l=n.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{r[i++]=[rt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);l[c].charAt(0)==="="?r[i++]=[rt.DIFF_EQUAL,f]:r[i++]=[rt.DIFF_DELETE,f];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),l=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:l,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],l=0;l<i.length;l++)a[l]=n[i.charCodeAt(l)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=$r.max(0,$r.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var l=[],c=new La,u=0,d=0,f=0,h=i,m=i,D=0;D<a.length;D++){var ae=a[D][0],x=a[D][1];switch(!u&&ae!==rt.DIFF_EQUAL&&(c.start1=d,c.start2=f),ae){case rt.DIFF_INSERT:c.diffs[u++]=a[D],c.length2+=x.length,m=m.substring(0,f)+x+m.substring(f);break;case rt.DIFF_DELETE:c.length1+=x.length,c.diffs[u++]=a[D],m=m.substring(0,f)+m.substring(f+x.length);break;case rt.DIFF_EQUAL:x.length<=2*this.patchMargin&&u&&a.length!==D+1?(c.diffs[u++]=a[D],c.length1+=x.length,c.length2+=x.length):x.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),l.push(c),c=new La,u=0,h=m,d=f);break}ae!==rt.DIFF_INSERT&&(d+=x.length),ae!==rt.DIFF_DELETE&&(f+=x.length)}return u&&(this.patch_addContext_(c,h),l.push(c)),l},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new La,l=0;l<i.diffs.length;l++)a.diffs[l]=[i.diffs[l][0],i.diffs[l][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],l=0;l<e.length;l++){var c=e[l].start2+i,u=this.diff_text1(e[l].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[l]=!1,i-=e[l].length2-e[l].length1;else{a[l]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[l].diffs)+n.substring(d+u.length);else{var m=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(m)/u.length>this.patchDeleteThreshold)a[l]=!1;else{this.diff_cleanupSemanticLossless(m);for(var D=0,ae=0,x=0;x<e[l].diffs.length;x++){var ce=e[l].diffs[x];ce[0]!==rt.DIFF_EQUAL&&(ae=this.diff_xIndex(m,D)),ce[0]===rt.DIFF_INSERT?n=n.substring(0,d+ae)+ce[1]+n.substring(d+ae):ce[0]===rt.DIFF_DELETE&&(n=n.substring(0,d+ae)+n.substring(d+this.diff_xIndex(m,D+ce[1].length))),ce[0]!==rt.DIFF_DELETE&&(D+=ce[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],l=a.diffs;if(l.length===0||l[0][0]!==rt.DIFF_EQUAL)l.unshift([rt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>l[0][1].length){var c=n-l[0][1].length;l[0][1]=r.substring(l[0][1].length)+l[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],l=a.diffs,l.length===0||l[l.length-1][0]!==rt.DIFF_EQUAL)l.push([rt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>l[l.length-1][1].length){var c=n-l[l.length-1][1].length;l[l.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,l=i.start2,c="";i.diffs.length!==0;){var u=new La,d=!0;for(u.start1=a-c.length,u.start2=l-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([rt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===rt.DIFF_INSERT?(u.length2+=h.length,l+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===rt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===rt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===rt.DIFF_EQUAL?(u.length2+=h.length,l+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var m=this.diff_text1(i.diffs).substring(0,this.patchMargin);m!==""&&(u.length1+=m.length,u.length2+=m.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===rt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=m:u.diffs.push([rt.DIFF_EQUAL,m])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var l=r[i].match(a);if(!l)throw new Error("Invalid patch string: "+r[i]);var c=new La;n.push(c),c.start1=parseInt(l[1],10),l[2]===""?(c.start1--,c.length1=1):l[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(l[2],10)),c.start2=parseInt(l[3],10),l[4]===""?(c.start2--,c.length2=1):l[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(l[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([rt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([rt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([rt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[rt.DIFF_INSERT,n]];if(!n)return[[rt.DIFF_DELETE,e]];var l=e.length>n.length?e:n,c=e.length>n.length?n:e,u=l.indexOf(c);if(u!==-1)return a=[[rt.DIFF_INSERT,l.substring(0,u)],[rt.DIFF_EQUAL,c],[rt.DIFF_INSERT,l.substring(u+c.length)]],e.length>n.length&&(a[0][0]=rt.DIFF_DELETE,a[2][0]=rt.DIFF_DELETE),a;if(c.length===1)return[[rt.DIFF_DELETE,e],[rt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],m=d[2],D=d[3],ae=d[4],x=this.diff_main(f,m,r,i),ce=this.diff_main(h,D,r,i);return x.concat([[rt.DIFF_EQUAL,ae]],ce)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,l=this.diff_main(e,n,!1,r);this.diff_charsToLines(l,a),this.diff_cleanupSemantic(l),l.push([rt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<l.length;){switch(l[c][0]){case rt.DIFF_INSERT:d++,h+=l[c][1];break;case rt.DIFF_DELETE:u++,f+=l[c][1];break;case rt.DIFF_EQUAL:if(u>=1&&d>=1){l.splice(c-u-d,u+d),c=c-u-d;for(var m=this.diff_main(f,h,!1,r),D=m.length-1;D>=0;D--)l.splice(c,0,m[D]);c=c+m.length}d=0,u=0,f="",h="";break}c++}return l.pop(),l},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,l=Math.ceil((i+a)/2),c=l,u=2*l,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var m=i-a,D=m%2!=0,ae=0,x=0,ce=0,De=0,te=0;te<l&&!(Date.now()>r);te++){for(var Pe=-te+ae;Pe<=te-x;Pe+=2){var He=c+Pe,$e=void 0;Pe===-te||Pe!==te&&d[He-1]<d[He+1]?$e=d[He+1]:$e=d[He-1]+1;for(var Xe=$e-Pe;$e<i&&Xe<a&&e.charAt($e)===n.charAt(Xe);)$e++,Xe++;if(d[He]=$e,$e>i)x+=2;else if(Xe>a)ae+=2;else if(D){var Ct=c+m-Pe;if(Ct>=0&&Ct<u&&f[Ct]!==-1){var at=i-f[Ct];if($e>=at)return this.diff_bisectSplit_(e,n,$e,Xe,r)}}}for(var Ot=-te+ce;Ot<=te-De;Ot+=2){var Ct=c+Ot,at=void 0;Ot===-te||Ot!==te&&f[Ct-1]<f[Ct+1]?at=f[Ct+1]:at=f[Ct-1]+1;for(var Zt=at-Ot;at<i&&Zt<a&&e.charAt(i-at-1)===n.charAt(a-Zt-1);)at++,Zt++;if(f[Ct]=at,at>i)De+=2;else if(Zt>a)ce+=2;else if(!D){var He=c+m-Ot;if(He>=0&&He<u&&d[He]!==-1){var $e=d[He],Xe=c+$e-He;if(at=i-at,$e>=at)return this.diff_bisectSplit_(e,n,$e,Xe,r)}}}}return[[rt.DIFF_DELETE,e],[rt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var l=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(l,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",l=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,l),c===-1&&(c=e.length-1);var d=e.substring(l,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(l),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),l=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=$r.min(r,i);if(e===n)return a;for(var l=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return l;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(l=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),l=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!l)return null;l?a?c=a[4].length>l[4].length?a:l:c=l:c=a;var u,d,f,h,m=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,m]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",l,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),m=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<m+h&&(a=n.substring(f-m,f)+n.substring(f,f+h),l=e.substring(0,r-m),c=e.substring(r+h),u=n.substring(0,f-m),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[l,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(ls),l=i.match(ls),c=a&&r.match(cs),u=l&&i.match(cs),d=c&&r.match(us),f=u&&i.match(us),h=d&&e.match(Sl),m=f&&n.match(Cl);return h||m?5:d||f?4:a&&!c&&u?3:c||u?2:a||l?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,l=e.indexOf(n,r);l!==-1&&(a=$r.min(this.match_bitapScore_(0,l,n,r),a),l=e.lastIndexOf(n,r+n.length),l!==-1&&(a=$r.min(this.match_bitapScore_(0,l,n,r),a)));var c=1<<n.length-1;l=-1;for(var u,d,f=n.length+e.length,h,m=0;m<n.length;m++){for(u=0,d=f;u<d;)this.match_bitapScore_(m,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var D=$r.max(1,r-d+1),ae=$r.min(r+d,e.length)+n.length,x=Array(ae+2);x[ae+1]=(1<<m)-1;for(var ce=ae;ce>=D;ce--){var De=i[e.charAt(ce-1)];if(m===0?x[ce]=(x[ce+1]<<1|1)&De:x[ce]=(x[ce+1]<<1|1)&De|((h[ce+1]|h[ce])<<1|1)|h[ce+1],x[ce]&c){var te=this.match_bitapScore_(m,ce-1,n,r);if(te<=a)if(a=te,l=ce-1,l>r)D=$r.max(1,2*r-l);else break}}if(this.match_bitapScore_(m+1,r,n,r)>a)break;h=x}return l},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,l=Math.abs(i-n);return this.matchDistance?a+l/this.matchDistance:l?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([rt.DIFF_EQUAL,a]);var l=n.substring(e.start2+e.length1,e.start2+e.length1+i);l&&e.diffs.push([rt.DIFF_EQUAL,l]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+l.length,e.length2+=a.length+l.length}},t}();function Mo(t,e){let n={};for(let a=0;a<e.length;a++){const l=e[a];n[l]?n[l].push(a):n[l]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const l=t[a],c=n[l]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let m;for(m=u;m<i.length&&!(i[m].buffer2index<h&&(m===i.length-1||i[m+1].buffer2index>h));m++);if(m<i.length){const D={buffer1index:a,buffer2index:h,chain:i[m]};if(u===i.length?i.push(d):i[u]=d,u=m+1,d=D,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Mo,"LCS");function Al(t,e){const n=Mo(t,e);let r=[],i=t.length,a=e.length,l={common:[]};function c(){l.common.length&&(l.common.reverse(),r.push(l),l={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&l.common.push(t[i])}return c(),r.reverse(),r}o(Al,"diffComm");function ds(t,e){const n=Mo(t,e);let r=[],i=t.length,a=e.length;for(let l=n;l!==null;l=l.chain){const c=i-l.buffer1index-1,u=a-l.buffer2index-1;i=l.buffer1index,a=l.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ds,"diffIndices");function Oc(t,e){const n=Mo(t,e);let r=[],i=t.length,a=e.length;function l(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(l,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:l(t,c.buffer1index+1,u),buffer2:l(e,c.buffer2index+1,d)})}return r.reverse(),r}o(Oc,"diffPatch");function Dl(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ds(e,t).forEach(u=>i(u,"a")),ds(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],l=0;function c(u){u>l&&(a.push({stable:!0,buffer:"o",bufferStart:l,bufferLength:u-l,bufferContent:e.slice(l,u)}),l=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const m=r[0],D=m.oStart;if(D>f)break;f=Math.max(f,D+m.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const m=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:m.slice(u.abStart,u.abStart+u.abLength)})}}else{let m={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const te=u.oStart,Pe=te+u.oLength,He=u.abStart,$e=He+u.abLength;let Xe=m[u.ab];Xe[0]=Math.min(He,Xe[0]),Xe[1]=Math.max($e,Xe[1]),Xe[2]=Math.min(te,Xe[2]),Xe[3]=Math.max(Pe,Xe[3])}const D=m.a[0]+(d-m.a[2]),ae=m.a[1]+(f-m.a[3]),x=m.b[0]+(d-m.b[2]),ce=m.b[1]+(f-m.b[3]);let De={stable:!1,aStart:D,aLength:ae-D,aContent:t.slice(D,ae),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:x,bLength:ce-x,bContent:n.slice(x,ce)};a.push(De)}l=f}return c(e.length),a}o(Dl,"diff3MergeRegions");function Po(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",l=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),l&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=Dl(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function m(D,ae){if(D.length!==ae.length)return!1;for(let x=0;x<D.length;x++)if(D[x]!==ae[x])return!1;return!0}return o(m,"isFalseConflict"),d.forEach(D=>{D.stable?f.push(...D.bufferContent):r.excludeFalseConflicts&&m(D.aContent,D.bContent)?f.push(...D.aContent):(h(),u.push({conflict:{a:D.aContent,aIndex:D.aStart,o:D.oContent,oIndex:D.oStart,b:D.bContent,bIndex:D.bStart}}))}),h(),u}o(Po,"diff3Merge");function Hc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Po(t,e,n,r);let l=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(l=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:l,result:c}}o(Hc,"mergeDiff3");function Rl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Po(t,e,n,r);let l=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(l=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:l,result:c}}o(Rl,"node_diff3_merge");function Bc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Po(t,e,n,r);let l=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=Al(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let m=f[h];m.common?c=c.concat(m.common):(l=!0,c=c.concat([`
<<<<<<<<<
`],m.buffer1,[`
=========
`],m.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:l,result:c}}o(Bc,"mergeDigIn");function Uc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let l=e[a];i(l.buffer1.offset);for(let c=0;c<l.buffer2.chunk.length;c++)n.push(l.buffer2.chunk[c]);r+=l.buffer1.length}return i(t.length),n}o(Uc,"patch");function Wc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Wc,"stripPatch");function $c(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o($c,"invertPatch");const Io=new El;Io.diffTimeout=0;function fs(t,e,n){return ie.get("experimental.useDiffMatchPatch")===!0?Io.patch_toText(Io.patch_make(e,n)):hl(t,e,n)}o(fs,"diffs_createPatch");function hs(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return fs(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const l=/\r?\n/g,c=n.split(l),u=n.match(l)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,l=>(a++,`${l}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(hs,"createPatch2");function gs(t,e,n){return Qo(t,e,n)}o(gs,"diffs_applyPatch");function Tl(t,e){const n=[];for(const r of Ia(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(Tl,"reversePatch");function vs(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const l=Rl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=l.result;let u=l.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(vs,"diffs_merge");var Ml=Object.defineProperty,Pl=Object.getOwnPropertyDescriptor,Il=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Pl(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&Ml(e,n,i),i},"changeStore_decorateClass");const Ll=s.FileSystemError.FileNotFound().code,ps=`===================================================================
`,Si=new TextDecoder,xl=new TextEncoder;function kl(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o(kl,"isOperation");function uo(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(uo,"toEvent");const xa=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new s.EventEmitter,this.cache=new Map,this.lock=new yr,this.scopedStores=new Map,a===void 0&&(this.disposable=s.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await s.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void s.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=s.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new Ut("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=s.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===B.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;G.log(n);const r=[];await this.lock.synchronizeWrite(_(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let l=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){l.push(u);continue}u.fileType===s.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===L.Created&&u.fileType===s.FileType.Directory&&(i.some(f=>X(f.uri,u.uri))||(d={type:L.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:uo(u,t)),u.type===L.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,m=>m.type===L.Created);if(h){a.push(h),f=h.uri;continue}break}}}l.length>0&&a.length>0&&(l=l.filter(u=>a.includes(u)?(r.push(uo(u,t)),!1):!0)),await this.saveWorkingOperations(t,l)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;G.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){G.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=W(e),a=r.findIndex(u=>W(u.uri)===i);if(a===-1)return;const[l]=r.splice(a,1);let c;switch(l.type){case L.Created:c=L.Deleted;break;case L.Deleted:c=L.Created;break;default:c=l.type;break}if(n.push({type:c,rootUri:t,uri:e}),l.type===L.Created){let u=l.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:L.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(l.type===L.Deleted){let u=l.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:m})=>{f[m]=void 0,n.push({type:L.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),l.fileType===s.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;G.log(r);const i=[];await this.lock.synchronizeWrite(_(t),async()=>{const a=await this.getWorkingOperations(t),l=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===s.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case L.Created:f=L.Deleted;break;case L.Deleted:f=L.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===L.Created){let h=d.uri;for(;;){const{parent:m}=this.findNewParentWithOnlyChild(h,a);if(m){l.push(m),h=m.uri;continue}break}}}c.length>0&&l.length>0&&(c=c.filter(d=>l.includes(d)?(i.push({type:L.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;G.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;G.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(L.Deleted)){const l=s.l10n.t("Yes");if(await s.window.showWarningMessage(s.l10n.t("Are you sure you want to stage {0} with merge conflicts?",z(e)),{modal:!0},l)!==l)return!1}const[,a]=n.conflicts.status;switch(a){case L.Changed:switch(n.type){case L.Created:return!1;case L.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case L.Deleted:const l=s.l10n.t("Keep Their Version"),c=s.l10n.t("Delete File"),u=await s.window.showInformationMessage(s.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,z(e)),{modal:!0},l,c);return u===l?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:L.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case L.Created:switch(n.type){case L.Changed:case L.Deleted:return!1;case L.Created:return await this.spliceOperation(e,i,{...n,type:L.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case L.Deleted:switch(n.type){case L.Created:case L.Changed:{const l=s.l10n.t("Keep Our Version"),c=s.l10n.t("Delete File"),u=await s.window.showInformationMessage(s.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,z(e)),{modal:!0},l,c);return u===l?(await this.spliceOperation(e,i,{...n,type:L.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case L.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;G.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;G.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>uo(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=_(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=_(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=W(e);return i.some(l=>W(l.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(_(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(l=>{var c;return(!i||l.conflicts===void 0)&&((c=a==null?void 0:a(l))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),l={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?l.conflicts.push(c):c.staged?l.staged.push(c):l.working.push(c));return l},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=_(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=Si.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;kl(n)?a=n:r=r!=null?r:n,G.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const l=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await l.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Si.decode(await s.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=B.getProviderUri(u),m=Si.decode(await s.workspace.fs.readFile(h)),D=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),ae=Si.decode(await s.workspace.fs.readFile(D)),x=await this.providerService.getMetadata(D);return{...vs(f,m,ae,x.HEAD.sha),baseUri:h,incomingUri:D}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(G.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;G.debug(r,n==null?void 0:n.save);const i=new s.WorkspaceEdit,a=[],l=new Map;async function c(m){var D;const ae=_(m),x=s.workspace.textDocuments.find(ce=>_(ce.uri)===ae);return(D=x==null?void 0:x.getText())!=null?D:Si.decode(await s.workspace.fs.readFile(m))}o(c,"getContent");async function u(m){try{const D=await s.workspace.fs.stat(m);return Boolean(D)}catch{return!1}}o(u,"exists");async function d(m,D,ae){let x=gs("",ae,{fuzzFactor:0});if(x===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${D}`);x=await n.getIncomingContent(D)}i.createFile(m,{overwrite:!0}),i.replace(m,new s.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),x)}o(d,"applyCreate");async function f(m,D,ae,x){const ce=await c(m);let De=gs(ce,ae,{fuzzFactor:1});if(De===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${D}; Resulted in conflicts`);const te={title:s.l10n.t("Merge")},Pe={title:s.l10n.t("Skip File"),isCloseAffordance:!0};if(await s.window.showWarningMessage(s.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,D),{modal:!0},te,Pe)!==te)return;const $e=await n.merge(m,D,ce);De=$e.mergedContent,$e.conflicts&&l.set(_(m),{type:x,baseUri:$e.baseUri,incomingUri:$e.incomingUri})}i.replace(m,new s.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),De)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?Tl(e,{}):Ia(e,{});for(const m of h)if(m.oldFileName==="/dev/null"){if(!m.newFileName)continue;const D=m.newFileName.startsWith("b/")?m.newFileName.substr(2):m.newFileName,ae=this.providerService.createRelativeVirtualUri(t,D);a.push(_(ae)),!await u(ae)?await d(ae,D,m):await f(ae,D,m,L.Created)}else if(m.newFileName==="/dev/null"){if(!m.oldFileName)continue;const D=m.oldFileName.startsWith("a/")?m.oldFileName.substr(2):m.oldFileName,ae=this.providerService.createRelativeVirtualUri(t,D);await u(ae)&&i.deleteFile(ae)}else if(m.oldFileName===m.newFileName){if(!m.newFileName)continue;const D=this.providerService.createRelativeVirtualUri(t,m.newFileName);a.push(_(D)),!await u(D)?await d(D,m.newFileName,m):await f(D,m.newFileName,m,L.Changed)}else throw new Error(`Unable to apply patch to ${m.oldFileName}; Renames aren't currently supported`);if(await s.workspace.applyEdit(i),n.save&&a.length)for(const m of a){const D=s.workspace.textDocuments.find(ae=>_(ae.uri)===m);await(D==null?void 0:D.save())}l.size&&setTimeout(async()=>{const m=[];await this.lock.synchronizeWrite(_(t),async()=>{const D=await this.getWorkingOperations(t);if(D.length===0)return;let ae=-1;for(const x of D){ae++;const ce=l.get(_(x.uri));ce!==void 0&&await this.spliceOperation(x.uri,ae,{...x,conflicts:{baseUri:ce.baseUri,incomingUri:ce.incomingUri,status:[x.type,ce.type]},timestamp:Date.now()},m)}},r),m.length!==0&&this._onDidChange.fire(m)},0)}async createChangeset(t){G.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(G.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const l=[];for(const c of a){const u=await this.createPatchCore(t,c);l.push(u)}return l.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==s.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===L.Created){let u=await this.getContent(e.uri);return hs(n,"",u,"add")}if(e.type===L.Deleted){let u=Si.decode(await s.workspace.fs.readFile(B.getProviderUri(e.uri)));return hs(n,u,"","delete")}const i=await this.getContent(e.uri),a=Si.decode(await s.workspace.fs.readFile(B.getProviderUri(e.uri))),l=fs(n,a,i),c=l.indexOf(ps);return`${r}
${l.substr(c+ps.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;G.log(r,e);const i=[];await this.lock.synchronizeWrite(_(n),async()=>{const{operation:a,index:l}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case L.Changed:switch(a.type){case L.Changed:case L.Created:case L.Deleted:await this.spliceOperation(t,l,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case L.Created:switch(a.type){case L.Changed:case L.Deleted:await this.spliceOperation(t,l,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case L.Created:await this.spliceOperation(t,l,{...a,type:L.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case L.Deleted:switch(a.type){case L.Deleted:await this.discardCore(n,t,i);break;case L.Changed:await this.spliceOperation(t,l,{...a,type:L.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case L.Created:await this.spliceOperation(t,l,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case L.Changed:switch(a.type){case L.Deleted:await this.spliceOperation(t,l,{...a,type:L.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case L.Created:break;case L.Changed:break}break;case L.Created:switch(a.type){case L.Changed:case L.Deleted:return;case L.Created:break}break;case L.Deleted:switch(a.type){case L.Deleted:return this.discardCore(n,t,i);case L.Changed:await this.spliceOperation(t,l,{...a,type:L.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case L.Created:return}}const c=e!==void 0?await s.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,l,{...a,type:L.Changed,originalHash:c!==void 0?await Ye(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;G.log(i,e,n);const a=[];await this.lock.synchronizeWrite(_(r),async()=>{const{operation:l,index:c}=await this.getWorkingOperation(t,r);if(l===void 0)return;switch(e.type){case L.Changed:switch(l.type){case L.Deleted:await this.spliceOperation(t,c,{...l,type:L.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[l.type,e.type]},timestamp:Date.now()},a);return;case L.Created:break;case L.Changed:break}break;case L.Created:switch(l.type){case L.Deleted:case L.Changed:return;case L.Created:const D=await s.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...l,originalHash:D!==void 0?await Ye(D):l.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[l.type,e.type]},type:L.Changed,timestamp:Date.now()},a);break}break;case L.Deleted:switch(l.type){case L.Deleted:return this.discardCore(r,t,a);case L.Changed:await this.spliceOperation(t,c,{...l,type:L.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[l.type,e.type]},timestamp:Date.now()},a);return;case L.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=l.type===L.Created?new Uint8Array(0):await s.workspace.fs.readFile(n.providerUri),h=await s.workspace.fs.readFile(e.providerUri),m=vs(Si.decode(d),Si.decode(f),Si.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,xl.encode(m.mergedContent),h!=null?h:new Uint8Array(0),m.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[l.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===L.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===L.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;G.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new xa.ScopedChangeStore(this,e,this.workspaceId):new xa.ScopedChangeStore(new xa(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=_(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:l}=await this.getWorkingOperation(t,n);if(l!==void 0){if(l.type===L.Deleted)throw s.FileSystemError.FileNotFound(`The ${l.fileType===s.FileType.Directory?"folder":"file"} has been deleted.`);return{type:l.fileType,size:(a=l.size)!=null?a:0,ctime:0,mtime:l.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new Ut(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=_(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const l=this.cache.get(i);if((l==null?void 0:l.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ut(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),l=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,i===void 0?{type:L.Created,uri:t,fileType:s.FileType.Directory,revision:l.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ut(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===L.Created)return this.discardCore(e,t,r);const l=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:L.Deleted,uri:t,fileType:s.FileType.Directory,revision:l.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new Ut(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=_(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:l}=H(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case L.Changed:break;case L.Created:{if(X(u.uri,l)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case L.Deleted:{if(X(u.uri,l)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new Ut(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const l=[];if(await this.lock.synchronizeWrite(_(i),async()=>this.writeFileCore(i,t,l,e,n,r),a.context),l.length===0)return;this._onDidChange.fire(l)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const l=new Ut(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Ye(r),Ye(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===L.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:L.Changed,uri:e,fileType:s.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{l.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new Ut(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(_(n),async()=>{const[{operation:a,index:l},c,u]=await Promise.all([this.getWorkingOperation(t,n),Ye(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,l,a===void 0?{type:L.Created,uri:t,fileType:s.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===L.Deleted?{...a,type:L.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:L.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ut(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===L.Created)return this.discardCore(e,t,r);const[l]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:L.Deleted,uri:t,fileType:s.FileType.File,revision:l.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ee(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=W(t);return this.findParent(t,e,(r,i)=>r.type===L.Created&&!i.some(a=>X(a.uri,r.uri)&&W(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===L.Deleted&&Q(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=W(t);let r=-1;const i=e.find((a,l)=>W(a.uri)!==n?!1:(r=l,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=_(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){G.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=_(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),G.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw G.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){G.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof s.FileSystemError&&n.code===Ll)return;throw G.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){G.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw G.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${N(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(uo(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&P(r)?typeof r=="string"?s.Uri.parse(r):s.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw G.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:xa.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Lo=xa;Lo.operationsStorageSchemaVersion=1,Lo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=s.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Il([S()],Lo.prototype,"getWorkingOperations",1);function Nl(t){switch(t){case L.Changed:return s.l10n.t("Modified");case L.Created:return s.l10n.t("Added");case L.Deleted:return s.l10n.t("Deleted")}}o(Nl,"getStatusText");function Fl(t){const[e,n]=t;switch(e){case L.Changed:switch(n){case L.Changed:case L.Created:return s.l10n.t("Modified by Both");case L.Deleted:return s.l10n.t("Deleted by Incoming")}case L.Created:switch(n){case L.Changed:case L.Created:return s.l10n.t("Added by Both");case L.Deleted:return s.l10n.t("Deleted by Incoming")}case L.Deleted:switch(n){case L.Changed:case L.Created:return s.l10n.t("Deleted by Current");case L.Deleted:return s.l10n.t("Deleted by Both")}}}o(Fl,"getConflictStatusText");class ms{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new s.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=s.Disposable.from(s.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(_(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(_(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Et.scheme)return;await mr(this.providerService,e);const r=_(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1),l=(await s.workspace.fs.stat(e)).type===s.FileType.Directory;if(a==null?void 0:a.isArbitraryPathIgnored(e.path,l))return i={color:new s.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>_(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case L.Created:i={badge:"\u2193A",color:new s.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:s.l10n.t("Pending Incoming Changes (Added)")};break;case L.Deleted:i={badge:"\u2193D",color:new s.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:s.l10n.t("Pending Incoming Changes (Deleted)")};break;case L.Changed:i={badge:"\u2193M",color:new s.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:s.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new s.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:s.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new s.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new s.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:s.l10n.t("Merge Conflicts ({0})",Fl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case L.Created:i={badge:"\u26A0",color:new s.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:s.l10n.t("Possible Merge Conflicts (Added)")};break;case L.Deleted:i={badge:"\u26A0",color:new s.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:s.l10n.t("Possible Merge Conflicts (Deleted)")};break;case L.Changed:i={badge:"\u26A0",color:new s.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:s.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new s.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:s.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case L.Created:i={badge:"A",color:new s.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:s.l10n.t("Added")};break;case L.Changed:i={badge:"M",color:new s.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:s.l10n.t("Modified")};break;case L.Deleted:i={badge:"D",color:new s.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:s.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(ms,"ScmDecorationProvider");var Kc=jn(919);function Gc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(l=>`${l}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Gc,"globFilter");function ys(t,e={}){if(!t)return Es;if(typeof t=="string"||Yl(t)){const n=ko(t,e);if(n===Ci)return Es;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return Ql(t,e)}o(ys,"parse");function Ol(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(Ol,"equals");function xo(t){return!!t&&typeof t.then=="function"}o(xo,"isThenable");function zc(){return Object.create(null)}o(zc,"getEmptyExpression");const fo="**",ws="/",ho="[/\\\\]",go="[^/\\\\]",Jc=/\//g;function Ss(t,e){switch(t){case 0:return"";case 1:return`${go}*?`;default:return`(?:${ho}|${go}+${ho}${e?`|${ho}${go}+`:""})*?`}}o(Ss,"starsToRegExp");function Cs(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const l of t){switch(l){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=l}return a&&n.push(a),n}o(Cs,"splitGlobAware");function bs(t){if(!t)return"";let e="";const n=Cs(t,ws);if(n.every(r=>r===fo))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===fo){if(r)return;e+=Ss(2,a===n.length-1)}else{let l=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&l){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===ws?h="":h=Qt(f),d+=h;continue}switch(f){case"{":l=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Cs(c,",").map(D=>bs(D)).join("|")})`,l=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=go;continue;case"*":e+=Ss(1);continue;default:e+=Qt(f)}}a<n.length-1&&(n[a+1]!==fo||a+2<n.length)&&(e+=ho)}r=i===fo})}return e}o(bs,"parseRegExp");const Hl=/^\*\*\/\*\.[\w\.-]+$/,Bl=/^\*\*\/([\w\.-]+)\/?$/,Ul=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Wl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,$l=/^\*\*((\/[\w\.-]+)+)\/?$/,Kl=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,_s=new Nt(1e4),Es=o(function(){return!1},"FALSE"),Ci=o(function(){return null},"NULL");function ko(t,e){if(!t)return Ci;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=_s.get(r);if(i)return As(i,t);let a;return Hl.test(n)?i=zl(n.substr(4),n):(a=Bl.exec(No(n,e)))?i=Jl(a[1],n):(e.trimForExclusions?Wl:Ul).test(n)?i=Vl(n,e):(a=$l.exec(No(n,e)))?i=Ds(a[1].substr(1),n,!0):(a=Kl.exec(No(n,e)))?i=Ds(a[1],n,!1):i=jl(n),_s.set(r,i),As(i,t)}o(ko,"parsePattern");function Gl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Gl,"ltrim");function As(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return Q(r,e.base)?t(Gl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(As,"wrapRelativePattern");function No(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(No,"trimForExclusions");function zl(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(zl,"trivia1");function Jl(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(l,c){return typeof l!="string"?null:c?c===t?e:null:l===t||l.endsWith(n)||l.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(Jl,"trivia2");function Vl(t,e){const n=Rs(t.slice(1,-1).split(",").map(c=>ko(c,e)).filter(c=>c!==Ci),t),r=n.length;if(!r)return Ci;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const l=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return l.length&&(i.allPaths=l),i}o(Vl,"trivia3");function Ds(t,e,n){const r="/"+t;let i;return n?i=o(function(a,l){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,l){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(Ds,"trivia4and5");function jl(t){try{const e=new RegExp(`^${bs(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return Ci}}o(jl,"toRegExp");function Vc(t,e,n){return!t||typeof e!="string"?!1:ys(t)(e,void 0,n)}o(Vc,"match");function Yl(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(Yl,"isRelativePattern");function jc(t){return t.allBasenames||[]}o(jc,"getBasenameTerms");function Yc(t){return t.allPaths||[]}o(Yc,"getPathTerms");function ql(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let l=t.length-1;l>=0;--l){const c=t.charCodeAt(l);if(c===47){if(!i){n=l+1;break}continue}r===-1&&(i=!1,r=l+1),c===46?e===-1?e=l:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(ql,"extname");function Ql(t,e){const n=Rs(Object.getOwnPropertyNames(t).map(c=>Xl(c,t[c],e)).filter(c=>c!==Ci)),r=n.length;if(!r)return Ci;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let m;for(let D=0,ae=n.length;D<ae;D++){const x=n[D](f,h);if(typeof x=="string")return x;xo(x)&&(m||(m=[]),m.push(x))}return m?(async()=>{for(const D of m){const ae=await D;if(typeof ae=="string")return ae}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let m=0,D=n.length;m<D;m++){const ae=n[m];ae.requiresSiblings&&d&&(u||(u=z(c)),f||(f=u.substr(0,u.length-ql(c).length)));const x=ae(c,u,f,d);if(typeof x=="string")return x;xo(x)&&(h||(h=[]),h.push(x))}return h?(async()=>{for(const m of h){const D=await m;if(typeof D=="string")return D}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const l=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return l.length&&(i.allPaths=l),i}o(Ql,"parsedExpression");function Xl(t,e,n){if(e===!1)return Ci;const r=ko(t,n);if(r===Ci)return Ci;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((l,c,u,d)=>{if(!d||!r(l,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return xo(h)?h.then(m=>m?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(Xl,"parseExpressionPattern");function Rs(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const l=t.filter(c=>!c.basenames);return l.push(a),l}o(Rs,"aggregateBasenameMatches");function qc(t,e){return Ol(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(qc,"patternsEquals");class Ts{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(l=>l);let i=!1,a="";for(let l=0;l<r.length;l++){const c=l===r.length-1,u=r[l];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(l=>this.gitignoreLineToGlob(l,n)),a=Object.create(null);for(const l of i)a[l]=!0;return ys(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(x=>x.trim()).filter(x=>x&&x[0]!=="#"),a=i.filter(x=>!x.endsWith("/")),l=a.filter(x=>!x.includes("!")),c=this.gitignoreLinesToExpression(l,n,!0),u=a.filter(x=>x.includes("!")).map(x=>x.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(x=>!x.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),m=i.filter(x=>x.includes("!")).map(x=>x.replace(/!/g,"")),D=this.gitignoreLinesToExpression(m,n,!1);return o((x,ce)=>{if(!x.startsWith(n))return!1;if(ce&&h(x)&&!D(x))return!0;const De=c(x),te=d(x);return De&&!te?!0:r?r.isPathIgnored(x,ce):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(Ts,"IgnoreFile");const Ms=new TextDecoder;class Ps{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const l=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,l),l}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await s.workspace.fs.stat(r)).type!==s.FileType.File)return;const a=await s.workspace.fs.readFile(r);if(n!==void 0){const l=await n;if(l)return l.updateContents(Ms.decode(a)),l}return new Ts(Ms.decode(a),`${e.path}/`)}catch(i){}}}o(Ps,"IgnoreFileService");const Is=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Ls{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:l}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=l}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(l=>{if(typeof l=="string"){const c=l.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Is(u)}return Is(l)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[l,...c]=a.split("");a=l.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Ls,"a");const xs={separator:"_",dictionaries:[]},Zl=o(t=>{const e=[...t&&t.dictionaries||xs.dictionaries],n={...xs,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Ls(n).generate()},"n");var ec=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],tc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],nc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],Qc=null,Xc=null,Zc=null;class ks{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(ks,"y");class Fo{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Fo,"TaskDebouncer");class Fi{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await s.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Fi,"CommandQuickPickItem");var vo;(function(t){async function e(n,r,i,a,l,c){let u;Array.isArray(l)?u=l:c===void 0&&(u=[],c=l);const d=s.window.createQuickPick(),f=new Fo(500),h=[f],{defaultBranch:m,HEAD:D}=await n.getMetadata(r);async function ae(Pe){const[He,$e,Xe,Ct]=await Promise.all([n.getBranch(r,m.name),n.getBranches(r,{query:Pe,limit:100}),n.getTags(r,{query:Pe,limit:100}),n.getSnapshots(r)]),at=new Set,Ot=new Set;for(const jt of Ct)at.add(jt.hash),Ot.add(jt.branch.name);const Zt=((c==null?void 0:c.filterBranches)?$e.branches.filter(c==null?void 0:c.filterBranches):$e.branches).filter(jt=>jt.name!==m.name).sort((jt,dr)=>jt.committedDate&&dr.committedDate?dr.committedDate.getTime()-jt.committedDate.getTime():0),Kt=s.l10n.t("Open indexed commit"),It=[{iconPath:new s.ThemeIcon("layers-active"),tooltip:Kt}];if(Pe!==void 0&&u){for(const jt of u)if(jt.identifier==="remoteHub.createBranch"||jt.identifier==="remoteHub.createBranchFrom"){const dr=jt.commandArguments;if(!dr)continue;const ti=dr.findIndex(Gi=>"uri"in Gi);let ni;ti!==-1&&([ni]=dr.splice(ti,1),ni.branch=Pe,dr.push(ni),jt.commandArguments=dr)}}return[...u,{label:"",kind:s.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${O(D.sha)}${at.has(D.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:We.Commit,name:void 0,sha:D.sha,buttons:at.has(D.sha)?It:void 0}]:[],{label:`$(${(He==null?void 0:He.locked)?"lock":"git-branch"}) ${m.name} (default)`,description:`\u2022$(git-commit) ${O(m.sha)}${Ot.has(m.name)||at.has(m.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:We.Branch,name:void 0,sha:m.sha,buttons:Ot.has(m.name)||at.has(m.sha)?It:void 0},...Zt.map(jt=>({label:`$(${jt.locked?"lock":"git-branch"}) ${jt.name}`,description:`\u2022$(git-commit) ${O(jt.commit)}${Ot.has(jt.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:We.Branch,name:jt.name,sha:jt.commit,buttons:Ot.has(jt.name)?It:void 0})),...Xe.tags.map(jt=>({label:`$(tag) ${jt.name}`,description:`\u2022$(git-commit) ${O(jt.commit)}${at.has(jt.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:We.Tag,name:jt.name,sha:jt.commit,buttons:at.has(jt.commit)?It:void 0}))]}o(ae,"getItems");const x=ae(void 0);let ce,De=!1;async function te(Pe){ce=void 0;const He=d.activeItems;d.items=Pe!=null?Pe:await x,De&&He.length!==0&&(d.activeItems=d.items.filter($e=>He.some(Xe=>Xe.label===$e.label))),d.busy=!1}o(te,"setItems");try{return await new Promise(He=>{var $e;h.push(d.onDidHide(()=>He(void 0)),d.onDidChangeValue(Xe=>{if(De=!1,Xe=Xe.trim(),(c==null?void 0:c.allowResetToSha)&&D.branch&&M(Xe)){te([{label:`Reset $(git-branch) ${D.branch.name} to $(git-commit) ${Xe}`,name:D.branch.name,sha:Xe,type:We.Branch}]);return}d.busy=!0;const Ct=f.debounce(Xe?()=>ae(Xe):()=>x);ce===void 0&&(ce=Ct.then(async at=>te(at)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[Xe]=d.activeItems;He(Xe)}}),d.onDidTriggerItemButton(Xe=>{const Ct=Xe.item;!(Ct instanceof Fi)&&Ct.kind!==s.QuickPickItemKind.Separator&&(Ct.useIndex=!0),He(Ct)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=($e=c==null?void 0:c.ignoreFocusOut)!=null?$e:!0,d.busy=!0,d.show(),ce=f.debounce(async()=>x,0).then(Xe=>te(Xe))})}finally{d.dispose(),h.forEach(Pe=>void Pe.dispose())}}o(e,"show"),t.show=e})(vo||(vo={}));const rc=new TextDecoder;class Ns{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new s.EventEmitter,this._onDidOpenRepository=new s.EventEmitter,this._onDidChangeState=new s.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=s.Disposable.from(ie.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:l})=>{const c=this.getScmProvider(B.getVirtualUri(l.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:l,syncing:c})=>{const u=this.getScmProvider(B.getVirtualUri(l.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(l.uri))}),this.providerService.onDidRefresh(l=>{for(const c of l)this.update(c)}),this.providerService.onDidChangeChangeStore(l=>this.update(l[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=ie.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){ie.changed(e,"staging")&&(this._staging=void 0,ie.changed(e,"staging.enabled")&&this.refresh()),ie.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>_(i.sourceControl.rootUri)===_(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[s.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),s.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),s.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),s.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),s.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Fs(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(ka);if(c.length!==0){if(await Ho(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Ho(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),s.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!ka(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Ho([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),s.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),s.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!ka(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),s.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),s.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!ka(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),s.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!ka(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),s.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void s.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),s.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(Oo(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:s.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await s.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof s.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await s.window.showTextDocument(i)}}),s.commands.registerCommand("remoteHub.createBranch",async e=>{await Gt("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),s.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Na(this._scmProviders,s.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<K.Write&&(a=await this.providerService.getFork(r),a===void 0)){const x={title:s.l10n.t("Fork Repository")},ce={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showErrorMessage(s.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},x,ce)!==x){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await s.window.withProgress({location:s.ProgressLocation.Notification,title:s.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){s.window.showErrorMessage(s.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let l,c=e==null?void 0:e.branch,u=!1;try{(!c||!y(c))&&(c=await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>Fa(this.providerService,r,s.l10n.t("Please provide a new branch name"),s.l10n.t("New branch name"),void 0,void 0)));let x;if(e==null?void 0:e.fromSha)x=e.fromSha,x==="HEAD"&&(x=i.HEAD.sha);else{const ce=await vo.show(this.providerService,r,s.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!ce){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}x=ce.sha,u=Boolean(ce.useIndex)}c&&x&&(l=await this.providerService.createBranch(r,c,x,a))}catch(x){G.error(x),s.window.showErrorMessage(s.l10n.t("Unable to create the new branch."));return}if(!l){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:We.Branch,id:l});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=s.l10n.t("Switch to Branch"),m=s.l10n.t("Open in New Window"),ae=ie.get("switchToCreatedBranch")==="always"?h:await s.window.showInformationMessage(s.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,l),{modal:!0},h,m);!ae||(await this.providerService.getChangeStore(r).discardAll(r),d.location=ae===m?se.NewWindow:se.CurrentWindow,u&&await ie.setMode(d.uri,ee.getIndexDefault(F.Branch)),await Ce(this.providerService,d,{skipChangesPrompt:!0}))}),s.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=s.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await s.window.showOpenDialog({openLabel:s.l10n.t("Open Patch"),title:s.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=rc.decode(await s.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{s.window.showErrorMessage(s.l10n.t("Invalid patch file"))}}),s.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;Oo(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const l=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await s.workspace.openTextDocument({language:"diff",content:l});await s.window.showTextDocument(c)}}),s.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await Na(this._scmProviders,s.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],l=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new Fi(Pn({command:"remoteHub.createBranch",title:s.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new Fi(Pn({command:"remoteHub.createBranchFrom",title:s.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),l.HEAD.type){case q.Branch:a.push(new Fi(Pn({command:"remoteHub.openOnRemote",title:s.l10n.t("{0} Open Branch on {1}...","$(globe)",l.provider.name),arguments:[{provider:l.provider,repo:l.repo,branch:l.HEAD.branch.name}]})));break;case q.RemoteBranch:a.push(new Fi(Pn({command:"remoteHub.openOnRemote",title:s.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",l.provider.name),arguments:[{provider:l.provider,repo:l.HEAD.branch.remote.repo,branch:l.HEAD.branch.name}]})));break;case q.Tag:a.push(new Fi(Pn({command:"remoteHub.openOnRemote",title:s.l10n.t("{0} Open Tag on {1}...","$(globe)",l.provider.name),arguments:[{provider:l.provider,repo:l.repo,tag:l.HEAD.detached.name}]})));break;case q.Commit:a.push(new Fi(Pn({command:"remoteHub.openOnRemote",title:s.l10n.t("{0} Open Commit on {1}...","$(globe)",l.provider.name),arguments:[{provider:l.provider,repo:l.repo,sha:l.HEAD.sha}]})));break}const c=(r=l.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await vo.show(this.providerService,i,s.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Fi?void d.execute():u&&d.type===We.Branch&&d.name===c&&d.sha?s.window.withProgress({location:s.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){G.error(f),s.window.showErrorMessage(s.l10n.t("Unable to reset the repository to commit '{0}'.",O(d.sha)))}}):void s.window.withProgress({location:s.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await ie.setMode(f.uri,ee.getIndexDefault(h))}return Ce(this.providerService,f)}})}),s.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Na(this._scmProviders,s.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){s.window.showErrorMessage(s.l10n.t("Unable to fetch repository"))}}}),s.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await s.window.withProgress({location:s.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(l){i.push(l)}return i})).length&&!(e==null?void 0:e.automated)&&s.window.showErrorMessage(n.length?s.l10n.t("Unable to fetch repositories"):s.l10n.t("Unable to fetch repository"))}),s.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Na(this._scmProviders,s.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),s.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await Na(this._scmProviders,s.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),s.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),ie.updateEffective("commitDirectlyWarning",Ze.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(re.asVirtualProviderErrorCode(i)===Te.SyncConflictsError){const a={title:s.l10n.t("Continue")},l={title:s.l10n.t("Cancel"),isCloseAffordance:!0};await s.window.showWarningMessage(n?s.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):s.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,l)===a?await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:Fe.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(re.asVirtualProviderErrorCode(i)===Te.UnresolvedConflictsError)await s.window.showErrorMessage(n?s.l10n.t("You must resolve any pending conflicts before pulling."):s.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw G.error(i),this.telemetryService.sendException(i),s.window.showErrorMessage(s.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(re.asVirtualProviderErrorCode(r)===Te.NothingToCommitError){s.window.showInformationMessage(s.l10n.t("There are no changes to commit."));return}G.error(r),s.window.showErrorMessage(s.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new Ut(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const l=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(s.l10n.t("You must resolve any pending conflicts before committing."),s.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const m=await this.providerService.getCommitOperations(r,{staged:d});if(m.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?s.l10n.t("There are no staged changes to commit."):s.l10n.t("There are no changes to commit."),s.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(s.l10n.t("You must specify a commit message before committing."),s.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let D,ae;if(l.HEAD.type===q.RemoteBranch?(ae=l.HEAD.branch.remote.accessLevel<K.Write,D=ae&&l.accessLevel<K.Write):(D=l.accessLevel<K.Write,ae=D),u===void 0&&D&&(u=await this.providerService.getFork(r),u===void 0)){const x={title:s.l10n.t("Fork Repository")},ce={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showInformationMessage(s.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},x,ce)!==x){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await s.window.withProgress({location:s.ProgressLocation.Notification,title:s.l10n.t("Forking {0}...",l.name)},()=>this.providerService.fork(r)),u===void 0){s.window.showErrorMessage(s.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||ae){if(u===void 0){const De={title:s.l10n.t("Commit to a New Branch")},te={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showErrorMessage(s.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},De,te)!==De){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let x=0;try{const De=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const te of De.branches){const Pe=/^patch-(?<num>\d+)$/.exec(te.name);if(Pe==null?void 0:Pe.groups){const He=Number(Pe.groups.num);He>x&&(x=He)}}}catch{}const ce=await Fa(this.providerService,r,s.l10n.t("Please provide a new branch name"),s.l10n.t("New branch name"),s.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:l.name),`patch-${x+1}`);if(ce&&(c=await this.providerService.createBranch(r,ce,l.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,m,c,n,u),await this.closeDiffEditors(r,void 0)}catch(x){const ce=re.asVirtualProviderErrorCode(x);if(ce===Te.DetachedHEADError){const De={title:s.l10n.t("Commit to a New Branch")},te={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showErrorMessage(s.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},De,te)!==De){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const He=await Fa(this.providerService,r,s.l10n.t("Please provide a new branch name"),s.l10n.t("New branch name"),s.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:l.name));if(He&&(c=await this.providerService.createBranch(r,He,l.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ce===Te.MergeConflictError){const De={title:s.l10n.t("Pull")},te={title:s.l10n.t("Sync (Pull & Push)")},Pe={title:s.l10n.t("Cancel"),isCloseAffordance:!0},He=await s.window.showErrorMessage(s.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},De,te,Pe);if(He!==De&&He!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:He===De,conflictResolution:Fe.Merge}),He===De){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(ce===Te.CommitToProtectedBranchError){const De={title:s.l10n.t("Commit to a New Branch")},te={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if((s.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?De:await s.window.showErrorMessage(s.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},De,te))!==De){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const $e=await Fa(this.providerService,r,s.l10n.t("Please provide a new branch name"),s.l10n.t("New branch name"),s.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:l.name));if($e&&(c=await this.providerService.createBranch(r,$e,l.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(ce===Te.CommitToArchivedRepositoryError){s.window.showErrorMessage(s.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(x)}`;return}else throw G.error(x),a=`: Aborted; ${String(x)}`,x}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Wo(ea.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const x={title:s.l10n.t("Switch to Fork")},ce={title:s.l10n.t("Cancel"),isCloseAffordance:!0},De=await s.window.showInformationMessage(s.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",l.name),{modal:!0},x,ce);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(De===x)}),De===x){let te;c!==void 0?te={type:We.Branch,id:c}:l.HEAD.branch!==void 0&&(te={type:We.Branch,id:l.HEAD.branch.name}),Ce(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:te}),location:se.CurrentWindow})}return}const h={title:s.l10n.t("Switch to Branch")},m={title:s.l10n.t("Cancel"),isCloseAffordance:!0},D=ie.get("switchToCreatedBranch")==="always",ae=D?h:await s.window.showInformationMessage(s.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,m);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(ae===h),autoConfirm:String(D)}),ae===h&&Ce(this.providerService,{name:l.name,uri:this.providerService.createVirtualUri(r,{repo:l.repo,ref:c?{type:We.Branch,id:c}:void 0}),location:se.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await s.window.withProgress({location:s.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=re.asVirtualProviderErrorCode(r);if(i===Te.NothingToCommitError){s.window.showInformationMessage(s.l10n.t("There are no changes to commit."));return}if(i===Te.CommitFailedError){s.window.showErrorMessage(s.l10n.t("Unable to commit."));return}G.error(r),s.window.showErrorMessage(s.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const l=new Ut(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(s.l10n.t("You must resolve any pending conflicts before committing."),s.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?s.l10n.t("There are no staged changes to commit."):s.l10n.t("There are no changes to commit."),s.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(s.l10n.t("You must specify a commit message before committing."),s.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const m=await this.providerService.getMetadata(i);let D,ae;m.HEAD.type===q.RemoteBranch?(ae=m.HEAD.branch.remote.accessLevel<K.Write,D=ae&&m.accessLevel<K.Write):(D=m.accessLevel<K.Write,ae=D);let x=n==null?void 0:n.fork;if(x===void 0&&D&&(x=await this.providerService.getFork(i),x===void 0)){const Xe={title:s.l10n.t("Fork Repository")},Ct={title:s.l10n.t("Cancel"),isCloseAffordance:!0};if(await s.window.showInformationMessage(s.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Xe,Ct)!==Xe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(x=await s.window.withProgress({location:s.ProgressLocation.Notification,title:s.l10n.t("Forking {0}...",m.name)},()=>this.providerService.fork(i)),x===void 0){s.window.showErrorMessage(s.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const ce=h.trimStart().split(`
`),De=await s.window.showInputBox({ignoreFocusOut:!0,placeHolder:s.l10n.t("New pull request title"),prompt:s.l10n.t("Please provide a title for the new pull request"),value:ce[0]});if(!De){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function te(Xe){let Ct=0;try{const Zt=await this.providerService.getBranches(x?this.providerService.createVirtualUri(i,x):i,{query:"patch-"});for(const Kt of Zt.branches){const It=/^patch-(?<num>\d+)$/.exec(Kt.name);if(It==null?void 0:It.groups){const jt=Number(It.groups.num);jt>Ct&&(Ct=jt)}}}catch{}const at=await Fa(this.providerService,i,s.l10n.t("Create a new branch for this pull request"),s.l10n.t("New branch name"),s.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",x?x.name:m.name),`patch-${Ct+1}`);let Ot;return at&&(Ot=await this.providerService.createBranch(i,at,Xe,x)),Ot}o(te,"createBranch");const Pe=await te.call(this,m.HEAD.sha);if(!Pe){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,Pe,void 0,x);const He=await this.providerService.createPullRequest(i,Pe,De,ce.slice(1).join(`
`),{draft:a},x);e.inputBox.value="",(d==null?void 0:d.length)&&(x?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function $e(){const Xe={title:s.l10n.t("Switch to Pull Request")},Ct={title:s.l10n.t("Cancel"),isCloseAffordance:!0},at=await s.window.showInformationMessage(s.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",He.id,m.name),{modal:!0},Xe,Ct);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(at===Xe)}),at===Xe&&Ce(this.providerService,{name:m.name,uri:this.providerService.createVirtualUri(i,{repo:m.repo,ref:{type:We.PullRequest,id:He.id}}),location:se.CurrentWindow})}o($e,"showSwitchToPrompt"),$e.call(this)}finally{l.stop(c?{message:c}:void 0)}}async update(e){const n=s.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),l=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:h=>h.fileType===s.FileType.File}),c=await Promise.all(l.conflicts.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,h.conflicts.incomingUri,s.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",z(h.uri)))}))),u=o(h=>this.providerService.createVirtualUri(B.getProviderId(h),{repo:r.repo,ref:{type:We.Commit,id:r.HEAD.sha}},this.providerService.getRelativeFilePath(h)),"getOriginalVirtualUri"),d=await Promise.all(l.staged.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),s.l10n.t("{0} (Index)",z(h.uri)))}))),f=await Promise.all(l.working.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,decorations:{strikeThrough:h.type===L.Deleted},command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),s.l10n.t("{0} (Working Tree)",z(h.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?d:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?f:[...d,...f],i}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:s.l10n.t("Commit & Push"),tooltip:i!==void 0?s.l10n.t("Your changes will be committed and pushed directly to {0}.",i):s.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:s.l10n.t("Continue Working On..."),tooltip:s.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let l;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,l=s.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),l.quickDiffProvider={provideOriginalResource:f=>B.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,l,a);u={id:a.provider.id,name:a.provider.name,sourceControl:l,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else l=u.sourceControl;return a.accessLevel>=K.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=K.Write?(l.acceptInputCommand={command:"remoteHub.commit",title:s.l10n.t("Commit"),arguments:[l]},c?l.inputBox.placeholder=s.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):l.inputBox.placeholder=s.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),ie.get("commitDirectlyWarning")===Ze.Off?l.inputBox.validateInput=void 0:l.inputBox.validateInput=d=>{if(ie.get("commitDirectlyWarning")===Ze.Auto&&js(ea.HasCommitted))return;const f=new s.MarkdownString(c?s.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):s.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name));return f.isTrusted=!0,f.appendMarkdown(`&nbsp; [${s.l10n.t("Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${s.l10n.t("Hide")}')`),{message:f,type:s.SourceControlInputBoxValidationType.Information}}):(l.acceptInputCommand={command:"remoteHub.createPullRequest",title:s.l10n.t("Create a Pull Request"),arguments:[l]},l.inputBox.placeholder=s.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,l,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),m=(h==null?void 0:h.type)===nn.Active,D=(h==null?void 0:h.type)===nn.Active,ae=nn.hasIndex(h==null?void 0:h.type),x=await this.providerService.getChangeStore(d).hasChanges(d),ce=(a=f.type===q.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:tn(f.type),De=[];if(De.push(Pn({command:"remoteHub.switchToBranch",title:`${ce} ${f.name}${x?"*":""}`,tooltip:`${O(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?De.push(Pn({command:"",title:"$(sync~spin)",tooltip:s.l10n.t("Syncing Changes..."),arguments:[]})):De.push(Pn({command:"remoteHub.sync",title:`$(sync)${((c=(l=r.state)==null?void 0:l.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:m||D?s.l10n.t("Sync to latest indexed commit"):s.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&De.push(Pn({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:s.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),ae){const te=this.providerService.getIndexProvider(d);te&&De.push(...await te.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=De}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,s.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,s.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,s.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=_(e);return this._scmProviders.find(r=>_(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(ic(e))n=e;else if(Fs(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(l=>l.id===r.id));n=i==null?void 0:i.sourceControl}else if(Oo(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(l=>l.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!s.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of s.window.tabGroups.all.map(l=>l.tabs).flat()){const{input:l}=a;(l instanceof s.TabInputTextDiff||l instanceof s.TabInputNotebookDiff)&&l.modified.scheme===B.scheme&&(!n||n.some(c=>c.path===l.modified.path))&&i.push(a)}await s.window.tabGroups.close(i,!0)}}o(Ns,"VirtualSourceControl");function ic(t){return"rootUri"in t&&"inputBox"in t}o(ic,"isSourceControl");function Fs(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Fs,"isSourceControlResourceGroup");function Oo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof s.Uri}o(Oo,"isSourceControlResourceState");function ka(t){return"type"in t}o(ka,"isTrackedChange");async function Ho(t){var e,n,r;if(t.length===0)return!0;let i,a=s.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===L.Created?(i=s.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,z((e=c.resourceUri)!=null?e:c.uri)),a=s.l10n.t("Delete file")):c.type===L.Deleted?(a=s.l10n.t("Restore file"),i=s.l10n.t("Are you sure you want to restore {0}?",z((n=c.resourceUri)!=null?n:c.uri))):i=s.l10n.t("Are you sure you want to discard changes in {0}?",z((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===L.Created)?i=s.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===L.Deleted)?(a=s.l10n.t("Restore files"),i=s.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=s.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await s.window.showWarningMessage(i,{modal:!0},a)===a}o(Ho,"confirmDiscard");async function Na(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await s.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o(Na,"getOrPickRootUri");async function Fa(t,e,n,r,i,a){let l;const c=s.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{l=s.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=s.l10n.t("Please enter a valid branch name");return}if(!y(d)){c.validationMessage=s.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=s.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=ac(a),c.show()})}finally{c.dispose(),l==null||l.dispose()}}o(Fa,"getBranchNameWithPrompt");function ac(t){const e=s.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=oc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(ac,"generateBranchName");function oc(){const t=s.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(ec),r.toLowerCase()==="animals"&&n.push(tc),r.toLowerCase()==="colors"&&n.push(nc),r.toLowerCase()==="numbers"&&n.push(ks.generate({length:3}));return n.length===0?"":Zl({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(oc,"generateRandomBranchName");class bi extends s.TimelineItem{static is(e){return e instanceof bi}constructor(e,n,r,i,{dateType:a,showAuthor:l,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${B.scheme}:${n}:file:commit`,this.command=i,l&&(this.description=r.authorName),this.tooltip=sc(r,c,h),this.iconPath=new s.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(bi,"CommitTimelineItem");function sc(t,e,n){return t.authorName&&t.authorEmail?s.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,O(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?s.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,O(t.hash),e.format(n),t.message):s.l10n.t(`{0}
{1}

{2}`,O(t.hash),e.format(n),t.message)}o(sc,"getCommitTooltip");class Zi extends s.TimelineItem{static is(e){return e instanceof Zi}constructor(e,n,r,i,a,{dateFormatter:l}){const c=s.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${B.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new s.ThemeIcon("git-commit"),this.tooltip=s.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,s.l10n.t("You"),s.l10n.t("Index"),l.format(new Date(r.timestamp)),Nl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(Zi,"ChangeOperationTimelineItem");class Os{constructor(e){this.providerService=e,this._onDidChange=new s.EventEmitter,this.id="github-file-history",this.label=s.l10n.t("GitHub File History"),this.debouncer=new Fo(500),this.disposable=s.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),ie.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);!e.some(r=>_(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);(e.added.some(r=>_(r.uri)===n)||e.removed.some(r=>_(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||_(this.rootUri)!==_(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);e.some(r=>_(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const ae of this.providerService.repositories)if(ae.uri.path===this.rootUri.path){this.rootUri=ae.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),l=await this.providerService.getMetadata(this.rootUri);if(!l||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:l.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(s.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=ie.getAny("git.timeline.date",void 0,"committed"),h=ie.getAny("git.timeline.showAuthor",void 0,!0),m=await Promise.all(c.commits.map(async ae=>new bi(this.rootUri,l.provider.id,ae,await this.resolveDiffCommand(ae,l,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),D=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(D&&Boolean(D.staged&&ie.get("staging.enabled"))){const x=new Zi(this.rootUri,l.provider.id,D,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(D.uri,B.getProviderUri(D.uri),s.l10n.t("{0} (Index)",z(D.uri))),{dateFormatter:d});m.splice(0,0,x)}return{items:m,paging:u}}catch(a){return G.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=s.workspace.registerTimelineProvider([Et.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[s.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!bi.is(n)||s.env.clipboard.writeText(n.hash)}),s.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!bi.is(n)||s.env.clipboard.writeText(n.message)}),s.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!bi.is(n)&&!Zi.is(n)||n.command!==void 0&&await s.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),s.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),s.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),s.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!bi.is(n)&&!Zi.is(n)||(e={uri:r,left:n},await s.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),s.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!bi.is(n)&&!Zi.is(n)||_(r)!==_(e.uri))return;const{left:a}=e,l=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=z(r),d=a.parents[0];let f;d===void 0?f=s.l10n.t("{0} ({1})",u,O(n.hash)):a.hash===""?f=s.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=s.l10n.t("{0} (Index)",u):f=s.l10n.t("{0} ({1})",u,O(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:We.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},l);d===void 0&&(h=h.with({query:"~"}));const m=n.parents[0];let D;m===void 0?D=s.l10n.t("{0} ({1})",u,O(n.hash)):m==="~"&&n.hash===""?D=s.l10n.t("{0} (Working Tree)",u):n.hash==="~"?D=s.l10n.t("{0} (Index)",u):D=s.l10n.t("{0} ({1})",u,O(n.hash));const ae=s.l10n.t("{0} \u27F7 {1}",f,D),x=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:We.Commit,id:n.hash}},l);await s.commands.executeCommand("vscode.diff",h,x,ae)})]}async resolveDiffCommand(e,n,r,i,a){const l=z(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:We.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=s.l10n.t("{0} ({1})",l,O(e.hash)):e.hash===""?d=s.l10n.t("{0} (Working Tree)",l):e.hash==="~"?d=s.l10n.t("{0} (Index)",l):d=s.l10n.t("{0} ({1}) \u27F7  {0} ({2})",l,O(c),O(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:We.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!bi.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await Gt("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(Os,"VirtualTimelineProvider");class Hs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=s.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new Ut(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await mr(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===se.CurrentWindow?se.CurrentWindow:se.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:se.NewWindow;const l=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!l){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});return}r.log({message:`: Opening ${i} in ${a}`}),Ce(this.providerService,l);break}case"/open-files":{let i;for(const l of e.query.split("&")){const[c,u]=l.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=yo())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(Hs,"RemoteUriHandler");var lc=Object.defineProperty,cc=Object.getOwnPropertyDescriptor,uc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?cc(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&lc(e,n,i),i},"view_decorateClass"),ha;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(ha||(ha={}));const Bs=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof Bs}get id(){}toString(){return`${G.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let ga=Bs;uc([S((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],ga.prototype,"triggerChange",1);class Us{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new s.EventEmitter,this.disposables=[];const a=!1;if(G.isDebugging&&a){const l=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await l.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new s.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!ie.changed(e,`views.${this.configKey}`)}dispose(){s.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=s.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(ie.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await mr(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){G.error(r)}}async show(){try{await s.commands.executeCommand(`${this.id}.focus`)}catch(e){G.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=ie.get("views")[this.configKey]),this._config}}o(Us,"View");class Ws extends ga{constructor(e,n,r,i,a,l,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=l,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new s.TreeItem(this._message,s.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:ha.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(Ws,"MessageNode");var dc=Object.defineProperty,fc=Object.getOwnPropertyDescriptor,Bo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?fc(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(i=(r?l(e,n,i):l(i))||i);return r&&i&&dc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const $s=o(class extends ga{constructor(t,e,n,r,i,a,l){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=l}static getId(t,e,n){return`${Oa.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return $s.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new s.TreeItem(t,s.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${ha.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&ie.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=B.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?s.l10n.t("{0} (Index)",z(this.operation.uri),this.workspaceRepository.ref.name):s.l10n.t("{0} (Working Tree)",z(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:We.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?s.l10n.t("{0} (Index of {1})",z(this.operation.uri),this.workspaceRepository.ref.name):s.l10n.t("{0} (Working Tree of {1})",z(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await s.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await s.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){s.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ks=$s;Ks.key=":changes";const Gs=o(class extends ga{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${po.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Gs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||s.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Ks(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Hr(this.workspaceRepository),n=Et.isCanonicalUri(this.workspaceRepository.uri)?s.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new s.TreeItem(this.root?this.canonical.name:n,e?s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${ha.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Pt(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new s.ThemeIcon("check"):this.root?Vs(this.canonical.provider.id):Yn(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new s.MarkdownString(void 0,!0).appendMarkdown(s.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?s.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",hc(this.workspaceRepository.ref.type),tn(this.workspaceRepository.ref.type),n,t?` \u2014 _${s.l10n.t("Active")}_ `:"",Pt(this.workspaceRepository.timestamp,{ago:!0}),ai(this.workspaceRepository.changes,{preamble:`${s.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=s.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){s.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Oa=Gs;Oa.key=":wsrepo",Bo([S()],Oa.prototype,"refresh",1);const zs=o(class extends ga{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return zs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Ws(this.view,this,s.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Oa(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new s.TreeItem(this.canonical.name,t?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed);return e.contextValue=ha.WorkspaceRepositories,e.iconPath=Vs(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let po=zs;po.key=":wsrepos",Bo([S()],po.prototype,"refresh",1);class Uo extends ga{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=s.Uri.parse(r);try{const{name:l,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:l,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new Oa(this.view,this,u,i[0],!0)):n.push(new po(this.view,this,u,i))}catch(l){if(l instanceof $n)continue;G.error(l)}}this.children=n}return this.children}getTreeItem(){return new s.TreeItem("Repositories",s.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(Uo,"WorkspaceRepositoriesViewNode"),Bo([S()],Uo.prototype,"refresh",1);class Js extends Us{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",s.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),s.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new s.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:s.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new Uo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[s.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),s.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),Ce(this.providerService,{name:e.name,uri:e.uri,location:se.CurrentWindow})),this),s.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),Ce(this.providerService,{name:e.name,uri:e.uri,location:se.NewWindow})),this),s.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),s.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),s.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),s.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),s.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=_(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>_(a.canonicalUri)===n);return await gc(r,s.l10n.t("Choose a repository to apply the changeset to"))}}o(Js,"WorkspaceRepositoriesView");function hc(t,e){switch(t){case q.Branch:return e?s.l10n.t("Pull Request #{0}",e.id):s.l10n.t("Branch");case q.RemoteBranch:return e?s.l10n.t("Pull Request #{0}",e.id):s.l10n.t("Remote Branch");case q.Tag:return s.l10n.t("Tag");case q.Commit:return s.l10n.t("Commit")}}o(hc,"headTypeToString");function Vs(t){switch(t){case"github":return new s.ThemeIcon("github");case"azurerepos":return new s.ThemeIcon("azure-devops");default:return new s.ThemeIcon("vm")}}o(Vs,"providerToIconPath");async function gc(t,e){if(t.length!==0){if(t.length>1){const n=await s.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(gc,"getRepository");let mo;function yo(){return mo}o(yo,"getOpenActionsService");var ea;(function(t){t.HasCommitted="has:committed",t.Version="version"})(ea||(ea={}));let wo;function js(t){return wo.globalState.get(t)}o(js,"getState");async function Wo(t,e){return wo.globalState.update(t,e)}o(Wo,"updateState");let Ys=!1;function vc(){return Ys}o(vc,"isPreRelease");async function pc(t){wo=t,Se.configure("remoteHub",t),G.configure(t,"Remote Repositories",ie.get("logLevel")),Ut.start("Time to root directory",{log:!1});const e=Xt.configure(t),n=new ze(t),r=t.extension.packageJSON.version;await Wo(ea.Version,r),await t.workspaceState.update(ea.Version,r);const[,i]=wo.extension.packageJSON.version.split(".");Ys=Number.parseInt(i)%2==1;try{const a=new Et(n,t.workspaceState);mo=new ao(a);const l=new Ps(a),c=new Ns(a,mo,n,l),u=new ua(a);return typeof s.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(s.workspace.registerEditSessionIdentityProvider(B.scheme,new qi(a))),t.subscriptions.push(ie.onDidChange(d=>{!ie.changed(d,"logLevel")||(G.logLevel=ie.get("logLevel"))}),a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:m,defaultBranch:D,name:ae,provider:x,pullRequest:ce}=h,De=m.name.replace(/\//g,"\u2009\u2215\u2009");let te=" ";if(ce!==void 0)te=` (PR ${ce.id}) `;else if(m.type===q.Tag)te=` (${De}) `;else if(m.type===q.Commit)te=` (${De}) `;else if(m.type===q.Branch||m.type===q.RemoteBranch){const He=m.branch.name.replace(/\//g,"\u2009\u2215\u2009");m.branch.name!==D.name&&(te=` (${He}) `)}const Pe={uri:f.uri,type:"folder",label:`${ae}${te}[${x.name}]`};s.commands.executeCommand("_workbench.addToRecentlyOpened",Pe)}catch(h){G.error(h,"Failed to add repository to recently opened")}}),new ms(a,l),new Ki(a),new Hs(a,n),...qt(a,t.extension.id,n),...Sc(a,n),...await mc(a,c,t,n),new Os(a),new Js(a,e,n),c,mo,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw G.error(a),ot(t,a),a}}o(pc,"activate");async function mc(t,e,n,r){const i=[];if(qs()){const a=new Rt(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(wc(t,e),yc(e)),i}o(mc,"registerProviders");function yc(t){async function e(){let r=s.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const l=s.extensions.onDidChange(()=>{r=s.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(l.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return s.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(yc,"registerStaticWebApps");function wc(t,e){async function n(){var i;try{let a=(i=s.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:s.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(G.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const m=s.extensions.onDidChange(()=>{var D;a=(D=s.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?D:s.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(m.dispose(),h())})})),G.log("[ GHPR] Registering..."),Tn(Yt.HasPullRequestExtension,!0);const l=await a.activate();if(!l)throw new Error("Unable to get registration api");const c=l.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const m=h.added.filter(D=>D.provider.id==="github");if(m.length!==0){G.log("[ GHPR] Checking for opened PRs...");for(const D of m){const ae=await t.getBestRemoteUri(D.uri,sr.PullRequest);if(!!ae){u.dispose(),G.log("[ GHPR] Opened PR found; preloading"),s.commands.executeCommand("github.api.preloadPullRequest",ae.toString());return}}G.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),G.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),s.Disposable.from(c,u)}catch(a){return G.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return s.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(wc,"registerGitHub");function Sc(t,e){if(!qs())return[];e.publicLog2("codex.enableRichNav",{});const n=new Dt(t);return[n,n.register(new cn(e)),...cn.createStatus()]}o(Sc,"registerNavigationServiceProviders");function qs(){return s.env.uiKind===s.UIKind.Desktop||ie.get("richNavigation.enabled")===!0}o(qs,"isRichNavEnabled");const $o=new Map,Ko=new Map;async function mr(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Et.getProviderId(e)),e&&Ko.has(e)){const a=Ko.get(e);if(!a)return;await $o.get(a);return}for(const a of s.extensions.all){const l=a.id,{contributes:c}=a.packageJSON;if(!c||!["github.remotehub","ms-vscode.azure-repos"].includes(l.toLowerCase()))continue;const u=$o.get(l),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(m=>m===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const m=(i=s.extensions.getExtension(l))==null?void 0:i.activate().then(D=>D.registerVirtualProviderService(t));if(m===void 0)return;$o.set(l,m);for(const D of d)Ko.set(D,l);if(await m,e!==void 0&&f)return}else u&&await u}}o(mr,"ensureProvidersRegistered")})(),module.exports=bo})();
